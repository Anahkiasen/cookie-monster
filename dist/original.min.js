function Start_Cookie_Monster(){return 0!=$("#cookie_monster_bar").length?(alert("Cookie Monster "+version+"\n\nCookie Monster is already loaded, silly!"),!1):($("#topBar").css("display","none"),$("#tooltip").css("margin-top","32px"),$("#tooltip").css("pointer-events","none"),$("#cookies").css("background","rgba(0,0,0,0.75)"),$("#cookies").css("border-top","1px solid black"),$("#cookies").css("border-bottom","1px solid black"),$("#goldenCookie").css("cssText","z-index: 1000001 !important;"),$("#game").css("cssText","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;user-select: none;top: 0px;bottom: 57px;"),$("#storeTitle").css("cssText","font-size: 18px;padding: 4px 8px 2px 8px;border-bottom: 1px solid black;"),$("#storeTitle").after('<table cellpadding=0 cellspacing=0 style="width:300px; table-layout:fixed; padding:4px; font-weight:bold; background:rgba(0,0,0,0.6); border-bottom: 1px solid black; cursor:default;"><tr><td align=center style="color:#4bb8f0; padding:2px;" id="cm_up_q0">0</td><td align=center style="color:#00ff00; padding:2px;" id="cm_up_q1">0</td><td align=center style="color:#ffff00; padding:2px;" id="cm_up_q2">0</td><td align=center style="color:#ff7f00; padding:2px;" id="cm_up_q3">0</td><td align=center style="color:#ff0000; padding:2px;" id="cm_up_q4">0</td><td align=center style="color:#ff00ff; padding:2px;" id="cm_up_q5">0</td></tr></table>'),$("body").append("<div id=\"cookie_monster_bar\" style=\"z-index:1000; position:absolute; bottom:0px; left:0px; width:100%; height:56px; border-top:1px solid black; cursor:default;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;background: rgb(69,72,77); /* Old browsers */background: -moz-linear-gradient(top,  rgba(69,72,77,1) 0%, rgba(0,0,0,1) 100%); /* FF3.6+ */background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(69,72,77,1)), color-stop(100%,rgba(0,0,0,1))); /* Chrome,Safari4+ */background: -webkit-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Chrome10+,Safari5.1+ */background: -o-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Opera 11.10+ */background: -ms-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* IE10+ */background: linear-gradient(to bottom,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* W3C */filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#45484d', endColorstr='#000000',GradientType=0 ); /* IE6-9 */\"></div>"),$("body").append('<div id="cookie_monster_overlay" style="position:fixed; z-index:1000000; height:100%; width:100%; background:rgba(255,255,255,1); pointer-events:none; display:none;"></div>'),$("body").append('<div id="cookie_monster_golden_overlay" style="position:fixed; z-index:1000002; height:96px; width:96px; pointer-events:none; cursor:pointer; opacity:0; display:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:32px; text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black !important;" onclick="Game.goldenCookie.click();"></div>'),$("#sectionLeft").append('<div id="cookie_monster_timer_bars_div" style="position:absolute; z-index:1000; bottom:-1px; left:0px; width:100%; pointer-events:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:16px; background:rgba(0,0,0,0.6); border-top:1px solid black;"></div>'),$("link").each(function(){"img/favicon.ico"==$(this).attr("href")&&$(this).attr("id","cm_favicon")}),Make_Table(),Save_Tooltips(),Update_Game_Scripts(),Load_Settings(),Set_Up_Tooltips(),Main_Loop(),Game.Popup('<span style="color:#FFFF00; text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black !important;">Cookie Monster '+version+" Loaded!</span>"),void 0)}function Main_Loop(){Update_Table(),Update_Tooltips("all"),Do_Emphasize(),Manage_Buffs(),loops++,1==loops&&Game.RebuildStore(),setTimeout(function(){Main_Loop()},settings[3])}function Fav_Icon_Spinner(a){a>6&&(a=1),"(G) "==gc_avail?($("#cm_favicon").attr("href","http://frozenelm.com/cookiemonster/images/cm_gc_"+a+".png"),a++,setTimeout(function(){Fav_Icon_Spinner(a)},250)):$("#cm_favicon").attr("href","http://orteil.dashnet.org/cookieclicker/img/favicon.ico")}function Load_Settings(){settings=[1,1,1,1e3,1,1,1,1,0,1,1,1,1],"undefined"!=typeof Storage&&(void 0!=localStorage.FlashScreen?settings[0]=localStorage.FlashScreen:(localStorage.FlashScreen=1,settings[0]=1),void 0!=localStorage.CookieTimer?settings[1]=localStorage.CookieTimer:(localStorage.CookieTimer=1,settings[1]=1),void 0!=localStorage.BuffBars?settings[2]=localStorage.BuffBars:(localStorage.BuffBars=1,settings[2]=1),void 0!=localStorage.Refresh?settings[3]=localStorage.Refresh:(localStorage.Refresh=1e3,settings[3]=1e3),void 0!=localStorage.CookieCD?settings[4]=localStorage.CookieCD:(localStorage.CookieCD=1,settings[4]=1),void 0!=localStorage.CMBar?settings[5]=localStorage.CMBar:(localStorage.CMBar=1,settings[5]=1),void 0!=localStorage.ColoredPrices?settings[6]=localStorage.ColoredPrices:(localStorage.ColoredPrices=1,settings[6]=1),void 0!=localStorage.ShortNumbers?settings[7]=localStorage.ShortNumbers:(localStorage.ShortNumbers=1,settings[7]=1),void 0!=localStorage.CookieSound?settings[8]=localStorage.CookieSound:(localStorage.CookieSound=0,settings[8]=0),void 0!=localStorage.UpdateTitle?settings[9]=localStorage.UpdateTitle:(localStorage.UpdateTitle=1,settings[9]=1),void 0!=localStorage.LuckyAlert?settings[10]=localStorage.LuckyAlert:(localStorage.LuckyAlert=1,settings[10]=1),void 0!=localStorage.UpgradeIcons?settings[11]=localStorage.UpgradeIcons:(localStorage.UpgradeIcons=1,settings[11]=1),void 0!=localStorage.UpgradeDisplay?settings[12]=localStorage.UpgradeDisplay:(localStorage.UpgradeDisplay=1,settings[12]=1)),Show_Hide_CM_Bar()}function Save_Settings(){"undefined"!=typeof Storage&&(localStorage.FlashScreen=settings[0],localStorage.CookieTimer=settings[1],localStorage.BuffBars=settings[2],localStorage.Refresh=settings[3],localStorage.CookieCD=settings[4],localStorage.CMBar=settings[5],localStorage.ColoredPrices=settings[6],localStorage.ShortNumbers=settings[7],localStorage.CookieSound=settings[8],localStorage.UpdateTitle=settings[9],localStorage.LuckyAlert=settings[10],localStorage.UpgradeIcons=settings[11],localStorage.UpgradeDisplay=settings[12]),Show_Hide_CM_Bar()}function Show_Hide_CM_Bar(){0==settings[5]?($("#cookie_monster_bar").css("display","none"),$("#game").css("bottom","0px")):($("#cookie_monster_bar").css("display",""),$("#game").css("bottom","57px"))}function Update_Game_Scripts(){Game.Logic=new Function("",Game.Logic.toString().replace(".title=",".title=gc_avail+").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var a="\n\n'<div class=\"subsection\">'+'<div class=\"title\"><span style=\"color:#4bb8f0;\">Cookie Monster Goodies</span></div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required:</b> ' + CM_Lucky('reg', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required (Frenzy):</b> ' + CM_Lucky('frenzy', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX):</b> ' + CM_Lucky_Reward('max') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX) (Frenzy):</b> ' + CM_Lucky_Reward('max_frenzy') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (CUR):</b> ' + CM_Lucky_Reward('cur') + '</div>'+'</br><div class=\"listing\"><b>Heavenly Chips (MAX):</b> ' + CM_Heavenly_Chip('max') + '</div>'+'<div class=\"listing\"><b>Heavenly Chips (CUR):</b> ' + CM_Heavenly_Chip('cur') + '</div>'+'<div class=\"listing\"><b>Cookies To Next Chip:</b> ' + CM_Heavenly_Chip('next') + '</div>'+'<div class=\"listing\"><b>Time To Next Chip:</b> ' + CM_Heavenly_Chip('time') + '</div>'+'</div>'+";Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("Statistics</div>'+","Statistics</div>'+"+a).replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var b='\n\'<div class="subsection">\'+\'<div class="title"><span style="color:#4bb8f0;">Cookie Monster Settings</span></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Flash Screen \' + CM_Option_State(0) + \'</a><label>Flashes the screen when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Timer \' + CM_Option_State(1) + \'</a><label>Displays a timer on Golden Cookies and Red Cookies</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Sound \' + CM_Option_State(8) + \'</a><label>Plays a sound when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Next Cookie Timer \' + CM_Option_State(4) + \'</a><label>Displays a countdown bar and updates the Title for when the next Cookie will appear</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Update Title \' + CM_Option_State(9) + \'</a><label>Updates the Title to display if a Cookie is waiting to be clicked</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Buff Bars \' + CM_Option_State(2) + \'</a><label>Displays a countdown bar for each effect currently active</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Bottom Bar \' + CM_Option_State(5) + \'</a><label>Displays a bar at the bottom of the screen that shows all Building information</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Colored Prices \' + CM_Option_State(6) + \'</a><label>Changes the colors of all Building prices to correspond with their Cost Per Income</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Icons \' + CM_Option_State(11) + \'</a><label>Displays a small square icon on the Upgrade to better display the Cost Per Income color value</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Short Numbers \' + CM_Short_Numbers() + \'</a><label>Formats all numbers to be shorter when displayed</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Display (\' + CM_Upgrade_Display() + \')</a><label>Changes how the store displays Upgrades</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Lucky Alert (\' + CM_Lucky_Alert() + \')</a><label>Changes the tooltip to display if you would be under the number of cookies required for "Lucky!"</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Refresh Rate (\' + CM_Refresh() + \' fps)</a><label>The rate at which Cookie Monster updates data (higher rates may slow the game)</label></div>\'+\'</div>\'+';Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("OFF')+'</div>'+","OFF')+'</div>'+"+b).replace("startDate=Game.sayTime(date.getTime()/1000*Game.fps,2);","startDate = formatTime(((new Date).getTime() - Game.startDate) / 1000, '');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var c='\nvar cm_id = from.id;\nif(cm_id == "") { cm_id = $(from).parents(".product").prop("id"); }\nif(cm_id == "product5" || cm_id == "product6" || cm_id == "product7" || cm_id == "product8" || cm_id == "product9") { y -= 100; }\nif(cm_id == "product8" || cm_id == "product9") { y -= 13; }\nif(cm_id == "product9" && settings[7] == 0) { y -= 13; }\n';Game.tooltip.draw=new Function("from,text,x,y,origin",Game.tooltip.draw.toString().replace("implemented');}","implemented');}"+c).replace("this.on=1;","this.on=1;\nUpdate_Tooltips('all');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Reset=new Function("bypass",Game.Reset.toString().replace("Game.researchT=0;","Game.researchT=0;\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.LoadSave=new Function("data",Game.LoadSave.toString().replace("Game.Popup('Game loaded');","Game.Popup('Game loaded');\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.RebuildStore=new Function("",Game.RebuildStore.toString().replace("l('products').innerHTML=str;","l('products').innerHTML=str;\nUpdate_Tooltips('ob');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Draw=new Function("",Game.Draw.toString().replace("Beautify(Math.round(Game.cookiesd))","formatNumB(Game.cookiesd)").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var d="return formatNum(what);";Beautify=new Function("what,floats",Beautify.toString().replace("var str='';",d+"\nvar str='';").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""))}function CM_Heavenly_Chip(a){var b=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned),c=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned+sell_out),d=cookies_to_h_chips(Game.cookiesReset),e=h_chips_to_cookies(b+1)-(Game.cookiesReset+Game.cookiesEarned),f=h_chips_to_cookies(c+1)-(Game.cookiesReset+Game.cookiesEarned+sell_out);return"max"==a?formatNum(b)+" <small>("+formatNum(2*b)+"%)</small>":"max_sell_out"==a?formatNum(c)+" <small>("+formatNum(2*c)+"%)</small>":"cur"==a?formatNum(d)+" <small>("+formatNum(2*d)+"%)</small>":"next"==a?formatNum(Math.round(e)):"next_sell_out"==a?formatNum(Math.round(f)):"time"==a?formatTime(Math.round(e/Game.cookiesPs),""):void 0}function cookies_to_h_chips(a){return Math.floor(Math.sqrt(2.5*Math.pow(10,11)+2*a)/Math.pow(10,6)-.5)}function h_chips_to_cookies(a){return 5*Math.pow(10,11)*a*(a+1)}function CM_Upgrade_Display(){switch(1*settings[12]){case 1:return"Normal";case 2:return"All";case 0:return"None";default:return"Normal"}}function CM_Short_Numbers(){switch(1*settings[7]){case 1:return"ON (A)";case 2:return"ON (B)";case 0:return"OFF";default:return"OFF"}}function CM_Lucky_Alert(){switch(1*settings[10]){case 1:return"Both";case 2:return"Icons";case 3:return"Notes";case 0:return"Off";default:return"Both"}}function CM_Refresh(){switch(1*settings[3]){case 1e3:return"1";case 500:return"2";case 250:return"4";case 100:return"10";case 33:return"30";default:return"1"}}function CM_Option_State(a){return 0==settings[a]?"OFF":"ON"}function CM_Option_Toggle(a){a=$(a);var b=a.text();switch(b){case"Flash Screen ON":settings[0]=0,a.text("Flash Screen OFF");break;case"Flash Screen OFF":settings[0]=1,a.text("Flash Screen ON");break;case"Cookie Sound ON":settings[8]=0,a.text("Cookie Sound OFF");break;case"Cookie Sound OFF":settings[8]=1,a.text("Cookie Sound ON");break;case"Cookie Timer ON":settings[1]=0,a.text("Cookie Timer OFF");break;case"Cookie Timer OFF":settings[1]=1,a.text("Cookie Timer ON");break;case"Next Cookie Timer ON":settings[4]=0,a.text("Next Cookie Timer OFF");break;case"Next Cookie Timer OFF":settings[4]=1,a.text("Next Cookie Timer ON");break;case"Update Title ON":settings[9]=0,a.text("Update Title OFF");break;case"Update Title OFF":settings[9]=1,a.text("Update Title ON");break;case"Buff Bars ON":settings[2]=0,a.text("Buff Bars OFF");break;case"Buff Bars OFF":settings[2]=1,a.text("Buff Bars ON");break;case"Bottom Bar ON":settings[5]=0,a.text("Bottom Bar OFF");break;case"Bottom Bar OFF":settings[5]=1,a.text("Bottom Bar ON");break;case"Colored Prices ON":settings[6]=0,a.text("Colored Prices OFF"),Update_Tooltips("ob");break;case"Colored Prices OFF":settings[6]=1,a.text("Colored Prices ON"),Update_Tooltips("ob");break;case"Upgrade Icons ON":settings[11]=0,a.text("Upgrade Icons OFF"),Game.RebuildUpgrades();break;case"Upgrade Icons OFF":settings[11]=1,a.text("Upgrade Icons ON"),Game.RebuildUpgrades();break;case"Upgrade Display (All)":settings[12]=0,a.text("Upgrade Display (None)"),Update_Upgrade_Display();break;case"Upgrade Display (None)":settings[12]=1,a.text("Upgrade Display (Normal)"),Update_Upgrade_Display();break;case"Upgrade Display (Normal)":settings[12]=2,a.text("Upgrade Display (All)"),Update_Upgrade_Display();break;case"Short Numbers ON (B)":settings[7]=0,a.text("Short Numbers OFF"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers OFF":settings[7]=1,a.text("Short Numbers ON (A)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers ON (A)":settings[7]=2,a.text("Short Numbers ON (B)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Lucky Alert (Both)":settings[10]=2,a.text("Lucky Alert (Icons)");break;case"Lucky Alert (Icons)":settings[10]=3,a.text("Lucky Alert (Notes)");break;case"Lucky Alert (Notes)":settings[10]=0,a.text("Lucky Alert (Off)");break;case"Lucky Alert (Off)":settings[10]=1,a.text("Lucky Alert (Both)");break;case"Refresh Rate (1 fps)":settings[3]=500,a.text("Refresh Rate (2 fps)");break;case"Refresh Rate (2 fps)":settings[3]=250,a.text("Refresh Rate (4 fps)");break;case"Refresh Rate (4 fps)":settings[3]=100,a.text("Refresh Rate (10 fps)");break;case"Refresh Rate (10 fps)":settings[3]=33,a.text("Refresh Rate (30 fps)");break;case"Refresh Rate (30 fps)":settings[3]=1e3,a.text("Refresh Rate (1 fps)")}Save_Settings()}function Update_Upgrade_Display(){var a=$("#upgrades");switch(1*settings[12]){case 1:a.css("cssText","");break;case 2:a.css("cssText","height: auto !important;");break;case 0:a.css("cssText","height: 0px !important;")}}function CM_Lucky(a,b){var c=Game.cookiesPs;Game.frenzy>0&&(c/=Game.frenzyPower),"frenzy"==a&&(c=7*c);var d=Math.round((1200*c+13)/.1);return b||(d=d<=Game.cookies?'<span style="color:#00FF00; font-weight:bold;">'+formatNum(d)+"</span>":formatNum(d)),d}function CM_Lucky_Reward(a){var b=Game.cookiesPs;Game.frenzy>0&&"cur"!=a&&(b/=Game.frenzyPower),"max_frenzy"==a&&(b=7*b);var c=new Array(Math.round(1200*b+13),Math.round(.1*Game.cookies+13));return("max"==a||"max_frenzy"==a)&&Math.round((1200*b+13)/.1)>Game.cookies?formatNum(c[0]):formatNum(Math.min.apply(Math,c))}function Save_Tooltips(){Game.UpgradesById.forEach(function(a,b){tooltips[b]=a.desc}),Game.ObjectsById.forEach(function(a,b){building_tooltips[b]=a.desc})}function Set_Up_Tooltips(){var a=!1;Game.UpgradesById.forEach(function(b,c){for(var d=0;upgrade_count>d;d++)if(_cup(d,c,!0)){b.desc=Manage_Tooltip(d,c,!0,!1),a=!0;break}b.bought&&b.desc!=tooltips[c]&&(b.desc=tooltips[c],a=!0)}),a&&Game.RebuildUpgrades()}function Update_Tooltips(a){("all"==a||"up"==a)&&(in_store=new Array(0,0,0,0,0,0),Game.UpgradesById.forEach(function(a,b){for(var c=0;upgrade_count>c;c++)if(_cup(c,b,!1)){Manage_Tooltip(c,b,!1,!1);break}})),("all"==a||"ob"==a)&&Game.ObjectsById.forEach(function(a){Manage_Building_Tooltip(a)})}function _cup(a,b,c){if(up=Game.UpgradesById[b],-1==up.desc.indexOf("cm_up_div_")&&!c)return!1;switch(a){case 0:if(!up.bought&&"Reinforced index finger"==up.name)return!0;break;case 1:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors are <b>twice</b> as efficient."))return!0;break;case 2:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors gain"))return!0;break;case 3:if(!up.bought&&"Forwards from grandma"==up.name)return!0;break;case 4:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>twice</b> as efficient."))return!0;break;case 5:if(!up.bought&&"Cheap hoes"==up.name)return!0;break;case 6:if(!up.bought&&-1!=up.desc.indexOf("Farms are <b>twice</b> as efficient."))return!0;break;case 7:if(!up.bought&&"Sturdier conveyor belts"==up.name)return!0;break;case 8:if(!up.bought&&-1!=up.desc.indexOf("Factories are <b>twice</b> as efficient."))return!0;break;case 9:if(!up.bought&&"Sugar gas"==up.name)return!0;break;case 10:if(!up.bought&&-1!=up.desc.indexOf("Mines are <b>twice</b> as efficient."))return!0;break;case 11:if(!up.bought&&"Vanilla nebulae"==up.name)return!0;break;case 12:if(!up.bought&&-1!=up.desc.indexOf("Shipments are <b>twice</b> as efficient."))return!0;break;case 13:if(!up.bought&&"Antimony"==up.name)return!0;break;case 14:if(!up.bought&&-1!=up.desc.indexOf("Alchemy labs are <b>twice</b> as efficient."))return!0;break;case 15:if(!up.bought&&"Ancient tablet"==up.name)return!0;break;case 16:if(!up.bought&&-1!=up.desc.indexOf("Portals are <b>twice</b> as efficient."))return!0;break;case 17:if(!up.bought&&"Flux capacitors"==up.name)return!0;break;case 18:if(!up.bought&&-1!=up.desc.indexOf("Time machines are <b>twice</b> as efficient."))return!0;break;case 19:if(!up.bought&&-1!=up.desc.indexOf("the more milk you have"))return!0;break;case 20:if(!up.bought&&-1!=up.desc.indexOf("Cookie production multiplier <b>+"))return!0;break;case 21:if(!up.bought&&-1!=up.desc.indexOf("for each 50 grandmas"))return!0;break;case 22:if(!up.bought&&-1!=up.desc.indexOf("for each 20 portals"))return!0;break;case 23:if(!up.bought&&"Elder Pledge"==up.name)return!0;break;case 24:if(!up.bought&&"Elder Covenant"==up.name)return!0;break;case 25:if(!up.bought&&"Sacrificial rolling pins"==up.name)return!0;break;case 26:if(!up.bought&&-1!=up.desc.indexOf("Golden cookie"))return!0;break;case 27:if(!up.bought&&-1!=up.desc.indexOf("Clicking gains <b>+1% of your CpS</b>."))return!0;break;case 28:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>4 times</b> as efficient."))return!0;break;case 29:if(!up.bought&&-1!=up.desc.indexOf("Antimatter condensers are <b>twice</b> as efficient."))return!0;break;case 30:if(!up.bought&&"Sugar bosons"==up.name)return!0;break;case 31:if(!up.bought&&"Revoke Elder Covenant"==up.name)return!0;break;case 32:if(!up.bought&&-1!=up.desc.indexOf("heavenly chips"))return!0}return!1}function Manage_Tooltip(a,b,c,d){var e=0,f=0;switch(a){case 0:e=_bam("The mouse and cursors",.1,0);break;case 1:e=_bte(0);break;case 2:e=_mcg(b);break;case 3:e=_bam("Grandmas",.3,1);break;case 4:e=_bte(1),_lgt(b)&&f++;break;case 5:e=_bam("Farms",.5,2);break;case 6:e=_bte(2);break;case 7:e=_bam("Factories",4,3);break;case 8:e=_bte(3);break;case 9:e=_bam("Mines",10,4);break;case 10:e=_bte(4);break;case 11:e=_bam("Shipments",30,5);break;case 12:e=_bte(5);break;case 13:e=_bam("Alchemy labs",100,6);break;case 14:e=_bte(6);break;case 15:e=_bam("Portals",1666,7);break;case 16:e=_bte(7);break;case 17:e=_bam("Time machines",9876,8);break;case 18:e=_bte(8);break;case 21:e=_gpg();break;case 22:e=_gpp();break;case 23:f+=_cha("Elder nap"),4==Game.pledges&&(f+=_cha("Elder slumber"));break;case 24:f+=_cha("Elder calm");break;case 28:e=_fte(1);break;case 29:e=_bte(9);break;case 30:e=_bam("Antimatter condensers",99999,9);break;case 32:e=_dhc(f,b,e),_lhc(b)&&(f+=_cha("Wholesome"))}return 19==Game.UpgradesOwned&&(f+=_cha("Enhancer")),49==Game.UpgradesOwned&&(f+=_cha("Augmenter")),99==Game.UpgradesOwned&&(f+=_cha("Upgrader")),e+=Get_Achi_Worth(f,b,e,0),d?e:tooltips[b]+Colorize(e,b,c)}function _dhc(a,b,c){var d=Game.UpgradesById[b],e=d.desc.indexOf("<b>")+3,f=d.desc.indexOf("%"),g=1*d.desc.substr(e,f-e),h=Get_Achi_Worth(a,b,c,2*Game.prestige["Heavenly chips"]*(g/100));return h-Game.cookiesPs}function _lhc(a){return"Heavenly key"==Game.UpgradesById[a].name?!0:!1}function _cpc(){return.01*Game.mouseCps()*usr_clk}function _lgt(a){if(1==_cha("Elder")&&-1!=Game.UpgradesById[a].name.indexOf(" grandmas")){var b=new Array,c=new Array;if(Game.UpgradesById.forEach(function(a,d){a.bought&&-1!=a.name.indexOf(" grandmas")?b.push(d):a.bought||-1==a.name.indexOf(" grandmas")||c.push(d)}),1==c.length&&c[0]==a)return!0}return!1}function _cha(a){var b=0;return Game.AchievementsById.forEach(function(c){c.won||c.name!=a||(b=1)}),b}function _gpp(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.05*Game.ObjectsById[7].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _gpg(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.02*Game.ObjectsById[1].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _mcg(a){var b=Game.UpgradesById[a].desc,c=31;-1!=b.indexOf(" another ")&&(c+=8);var d=1*b.substr(c,b.indexOf("<",c)-c);return d*(Game.BuildingsOwned-Game.ObjectsById[0].amount)*Game.ObjectsById[0].amount*Game.globalCpsMult}function _bte(a){return Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _fte(a){return 3*Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _bam(a,b,c){var d=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf(a+" are <b>twice</b> as efficient.")&&(d=2*d),b.bought&&-1!=b.desc.indexOf(a+" are <b>4 times</b> as efficient.")&&(d=4*d)}),b*d*Game.ObjectsById[c].amount*Game.globalCpsMult}function _inc(a){var b=0;return Game.AchievementsById.forEach(function(c){var d=c.desc.replace(/,/g,"");c.won||-1==d.indexOf(" per second.")||a>=1*d.substr(8,d.indexOf("</b>",8)-8)&&b++}),b}function Get_Achi_Worth(a,b,c,d){var e=0,f=Calc_Heavenly_Mult();0!=d&&(f=d);var g=0,h=new Array(0,0,0,0),i=Game.milkProgress,j=Get_Frenzy_Mult();Game.UpgradesById.forEach(function(a){var c=a.desc.replace("[Research]<br>","");a.bought&&-1!=c.indexOf("Cookie production multiplier <b>+")&&(f+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought||-1==c.indexOf("Cookie production multiplier <b>+")||a.id!=b||(g+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought&&"Kitten helpers"==a.name&&(h[0]=.05),a.bought&&"Kitten workers"==a.name&&(h[1]=.1),a.bought&&"Kitten engineers"==a.name&&(h[2]=.2),a.bought&&"Kitten overseers"==a.name&&(h[3]=.2)});var k=100+f;k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var l=c,m=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j;i+=.04*a,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var n=0;switch(Game.UpgradesById[b].name){case"Kitten helpers":n=.05;break;case"Kitten workers":n=.1;break;case"Kitten engineers":n=.2;break;case"Kitten overseers":n=.2}k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m;var o=_inc(e+m);return o>0&&(i+=.04*o,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i,k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m),0!=d&&(e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j),Game.Has("Elder Covenant")&&(e*=.95),e}function Calc_Heavenly_Mult(){var a=2*Game.prestige["Heavenly chips"],b=0;return Game.Has("Heavenly chip secret")&&(b+=.05),Game.Has("Heavenly cookie stand")&&(b+=.2),Game.Has("Heavenly bakery")&&(b+=.25),Game.Has("Heavenly confectionery")&&(b+=.25),Game.Has("Heavenly key")&&(b+=.25),a*b}function Get_Frenzy_Mult(){return Game.frenzy>0?Game.frenzyPower:1}function Manage_Building_Tooltip(a){var b=a.id,c=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),d=new Array("none","none"),e=(new Array("",""),new Array(0,0));Game.cookies-a.price<c[0]&&(d[0]="block",e[0]=c[0]-(Game.cookies-a.price)),Game.cookies-a.price<c[1]&&(d[1]="block",e[1]=c[1]-(Game.cookies-a.price)),a.desc==building_tooltips[a.id]&&(a.desc+='<div id="cm_ob_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #000000; margin:6px -6px -6px -6px; display:none;"></div>',a.desc+='<div id="cm_ob_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_ob_lucky_div_warning" style="background:url(http://frozenelm.com/cookiemonster/images/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_ob_lucky_div_caution" style="background:url(http://frozenelm.com/cookiemonster/images/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div>',a.desc+='<div id="cm_ob_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_ob_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_ob_warning_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/warning.png" height=16px width=16px></div></div><div id="cm_ob_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_ob_caution_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/caution.png" height=16px width=16px></div></div></div>',Game.RebuildStore());var f=new Array("FFFF00","FFFF00"),g=new Array(hold_cpi[b],hold_tc[b]),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<f.length;i++)g[i]==j[i]?f[i]="00FF00":g[i]==h[i]?f[i]="FF0000":h[i]-g[i]<g[i]-j[i]&&(f[i]="FF7F00");1==$("#cm_ob_div_"+b).length&&($("#cm_ob_div_"+b).css("border","1px solid #"+f[0]),$("#cm_ob_div_"+b).css("display",""),$("#cm_ob_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(hold_is[b])+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"")+"</div>"),$("#cm_ob_warning_amount").text("Deficit: "+formatNum(e[0])),$("#cm_ob_caution_amount").text("Deficit: "+formatNum(e[1])),1==settings[10]||2==settings[10]?($("#cm_ob_lucky_div_warning").css("display",d[0]),$("#cm_ob_lucky_div_caution").css("display",d[1])):($("#cm_ob_lucky_div_warning").css("display","none"),$("#cm_ob_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_ob_note_div_warning").css("display",d[0]),$("#cm_ob_note_div_caution").css("display",d[1])):($("#cm_ob_note_div_warning").css("display","none"),$("#cm_ob_note_div_caution").css("display","none"))),1==settings[6]?$("#product"+b).find(".price").first().css("color","#"+f[0]):$("#product"+b).find(".price").first().css("color","")}function Make_Table(){var a='<th align=left width=130 style="color:#FFFF00;"> '+version+"</th>",b="",c="",d="";Game.ObjectsById.forEach(function(e,f){a+='<th align=middle id="cookie_monster_item_'+f+'" style="font-weight:bold;"></th>',b+='<td align=middle id="cookie_monster_is_'+f+'"></td>',c+='<td align=middle id="cookie_monster_cpi_'+f+'"></td>',d+='<td align=middle id="cookie_monster_tc_'+f+'"></td>'}),$("#cookie_monster_bar").html('<table style="width:100%; table-layout:fixed; margin-top:2px;"><tr>'+a+'</tr><tr><th align=right style="color:#4bb8f0;">Bonus Income</th>'+b+'</tr><tr><th align=right style="color:#4bb8f0;">Base Cost Per Income</th>'+c+'</tr><tr><th align=right style="color:#4bb8f0;">Time Left</th>'+d+"</tr></table>")}function Update_Table(){Game.ObjectsById.forEach(function(a,b){var c=a.price,d=a.amount,e=(a.storedTotalCps,a.storedCps*Game.globalCpsMult);"Grandma"==a.name&&(e=0);var f=Math.round(100*(e+Get_Upgrade_Bonuses(a.name,d,e)))/100,g=Math.round(c/f*100)/100,h=a.name.replace(/([^\s]+)/,"");hold_item[b]=a.name.replace(h,"")+' (<span style="color:#4bb8f0;">'+formatNum(d)+"</span>)",hold_is[b]=Math.round(100*f)/100,hold_cpi[b]=Math.round(100*g)/100,hold_tc[b]=Math.round(Seconds_Left(b,"ob"))}),Game.ObjectsById.forEach(function(a,b){var c=new Array("FFFF00","FFFF00"),d=new Array(hold_cpi[b],hold_tc[b]),e=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),f=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));
for(i=0;i<c.length;i++)d[i]==f[i]?c[i]="00FF00":d[i]==e[i]?c[i]="FF0000":e[i]-d[i]<d[i]-f[i]&&(c[i]="FF7F00");$("#cookie_monster_item_"+b).html(hold_item[b]),$("#cookie_monster_is_"+b).html(formatNum(hold_is[b])),$("#cookie_monster_cpi_"+b).html('<span style="color:#'+c[0]+';">'+formatNum(d[0])+"</span>"),$("#cookie_monster_tc_"+b).html('<span style="color:#'+c[1]+';">'+formatTime(d[1],"min")+"</span>")})}function Do_Emphasize(){var a=$("#cookie_monster_golden_overlay"),b=$("#goldenCookie");if("none"!=b.css("display")||emphasize||(emphasize=!0,gc_avail=""),"none"!=b.css("display")&&emphasize){if(emphasize=!1,1==settings[9]&&(gc_avail="(G) ",Fav_Icon_Spinner(1)),1==settings[8]){var c=new Audio("http://frozenelm.com/cookiemonster/sounds/ba%20dink.mp3");c.volume=1,c.play()}1==settings[0]&&($("#cookie_monster_overlay").fadeIn(100),$("#cookie_monster_overlay").fadeOut(500))}"none"!=b.css("display")&&1==settings[1]?(a.css("display","block"),a.css("opacity",b.css("opacity")),a.css("left",b.css("left")),a.css("top",b.css("top")),a.html('<div style="position:absolute; top:30px; width:96px; height:36px;">'+Math.round(Game.goldenCookie.life/Game.fps)+"</div>")):a.css("display","none")}function Manage_Buffs(){var a="",b="",c=0,d=13+13*Game.Has("Get lucky"),e=new Array(Game.goldenCookie.time,Game.goldenCookie.minTime,Game.goldenCookie.maxTime),f=parseInt($("#cookie_monster_timer_bars_div").css("width"));switch(Game.frenzyPower){case 7:c=77+77*Game.Has("Get lucky"),a="Frenzy",b="FFFF00";break;case 666:c=6+6*Game.Has("Get lucky"),a="Blood Frenzy",b="00FF00",c=66+66*Game.Has("Get lucky"),a="Clot",b="FF0000"}Game.frenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_"+b).length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_'+b+'" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">'+a+'<td><td><div id="cmt_'+b+'" style="position:relative; background:#'+b+"; height:10px; width:"+Game.frenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_'+b+'" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+c+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_"+b).css("width",Game.frenzy/e[2]*100+"%"),$("#cmt_time_"+b).text(Math.round(Game.frenzy/Game.fps))),$("#cookie_monster_timer_"+b).fadeIn(250),"1"==$("#cookie_monster_timer_FFFF00").css("opacity")&&"FFFF00"!=b&&$("#cookie_monster_timer_FFFF00").fadeOut(250),"1"==$("#cookie_monster_timer_00FF00").css("opacity")&&"00FF00"!=b&&$("#cookie_monster_timer_00FF00").fadeOut(250),"1"==$("#cookie_monster_timer_FF0000").css("opacity")&&"FF0000"!=b&&$("#cookie_monster_timer_FF0000").fadeOut(250)):1==$("#cookie_monster_timer_"+b).length&&"1"==$("#cookie_monster_timer_"+b).css("opacity")&&$("#cookie_monster_timer_"+b).fadeOut(250),Game.clickFrenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_4BB8F0").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_4BB8F0" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Click Frenzy<td><td><div id="cmt_4BB8F0" style="position:relative; background:#4BB8F0; height:10px; width:'+Game.clickFrenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_4BB8F0" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+d+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_4BB8F0").css("width",Game.clickFrenzy/e[2]*100+"%"),$("#cmt_time_4BB8F0").text(Math.round(Game.clickFrenzy/Game.fps))),$("#cookie_monster_timer_4BB8F0").fadeIn(250)):1==$("#cookie_monster_timer_4BB8F0").length&&"1"==$("#cookie_monster_timer_4BB8F0").css("opacity")&&$("#cookie_monster_timer_4BB8F0").fadeOut(250),e[0]>0&&"none"==$("#goldenCookie").css("display")&&1==settings[4]?(1!=$("#cookie_monster_timer_FF00FF").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_FF00FF" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Next Cookie<td><td><div id="cmt_FF00FF" style="position:relative; background:#aaaaaa; height:10px; width:100%; margin-left:4px; border:1px solid black;"><div id="cmt2_FF00FF" style="position:relative; background:#FF00FF; height:10px; width:100%; margin-left:0px; max-width:'+.67*(f-189)+'px; float:right;"></div><div id="cmt_time_FF00FF" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+Math.round((e[2]-e[0])/Game.fps)+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt2_FF00FF").css("max-width",.67*(f-189)+"px"),$("#cmt_FF00FF").css("width",(e[2]-e[0])/e[2]*100+"%"),$("#cmt_time_FF00FF").text(Math.round((e[2]-e[0])/Game.fps))),$("#cookie_monster_timer_FF00FF").fadeIn(250)):1==$("#cookie_monster_timer_FF00FF").length&&"1"==$("#cookie_monster_timer_FF00FF").css("opacity")&&$("#cookie_monster_timer_FF00FF").fadeOut(250),(e[2]-e[0])/Game.fps>0&&"none"==$("#goldenCookie").css("display")&&(gc_avail=1==settings[4]?"("+Math.round((e[2]-e[0])/Game.fps)+") ":""),$("#versionNumber").css("bottom",$("#cookie_monster_timer_bars_div").css("height"))}function Get_Upgrade_Bonuses(a,b,c){var d=0,e=0;switch(a){case"Cursor":0==b&&(e+=_cha("Click")),1==b&&(e+=_cha("Double-click")),49==b&&(e+=_cha("Mouse wheel")),99==b&&(e+=_cha("Of Mice and Men")),199==b&&(e+=_cha("The Digital"));break;case"Grandma":d+=Get_Grandma_Mod_Total(b)*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Grandma's Cookies")),49==b&&(e+=_cha("Sloppy kisses")),99==b&&(e+=_cha("Retirement home")),149==b&&(e+=_cha("Friend of the ancients")),199==b&&(e+=_cha("Ruler of the ancients"));break;case"Farm":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("My first farm")),49==b&&(e+=_cha("Reap what you sow")),99==b&&(e+=_cha("Farm ill"));break;case"Factory":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Production chain")),49==b&&(e+=_cha("Industrial revolution")),99==b&&(e+=_cha("Global warming"));break;case"Mine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("You know the drill")),49==b&&(e+=_cha("Excavation site")),99==b&&(e+=_cha("Hollow the planet"));break;case"Shipment":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Expedition")),49==b&&(e+=_cha("Galactic highway")),99==b&&(e+=_cha("Far far away"));break;case"Alchemy lab":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Transmutation")),49==b&&(e+=_cha("Transmogrification")),99==b&&(e+=_cha("Gold member"));break;case"Portal":d+=Get_Portal_Mod_Total()*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("A whole new world")),49==b&&(e+=_cha("Now you're thinking")),99==b&&(e+=_cha("Dimensional shift"));break;case"Time machine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Time warp")),49==b&&(e+=_cha("Alternate timeline")),99==b&&(e+=_cha("Rewriting history"));break;case"Antimatter condenser":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Antibatter")),49==b&&(e+=_cha("Quirky quarks")),99==b&&(e+=_cha("It does matter!"))}return 99==Game.BuildingsOwned&&(e+=_cha("Builder")),399==Game.BuildingsOwned&&(e+=_cha("Architect")),799==Game.BuildingsOwned&&(e+=_cha("Engineer")),_owe(a)&&e++,_mat(a)&&e++,_bat(a)&&e++,_cen(a)&&e++,d+Get_Achi_Worth(e,0,d+c,0)}function _bat(a){if(1==_cha("Base 10")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=10*c.length,e=0;e<c.length;e++){if(c[e]<d)return!1;d-=10}return!0}return!1}function _mat(a){if(1==_cha("Mathematician")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=128,e=0;e<c.length;e++)if(e>2&&(d/=2),c[e]<d)return!1;return!0}return!1}function _owe(a){if(1==_cha("One with everything")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>0?b.push(a.name):c.push(a.name)}),1==c.length&&c[0]==a)return!0}return!1}function _cen(a){if(1==_cha("Centennial")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>=100?b.push(a.name):c.push(a)}),1==c.length&&c[0].name==a&&99==c[0].amount)return!0}return!1}function Get_Cursor_Mod_Total(){var a=0;return Game.UpgradesById.forEach(function(b){if(b.bought&&-1!=b.desc.indexOf("The mouse and cursors gain")){var c=31;-1!=b.desc.indexOf(" another ")&&(c+=8),a+=1*b.desc.substr(c,b.desc.indexOf("<",c)-c)}}),a*Game.ObjectsById[0].amount}function Get_Grandma_Mod_Total(a){var b=.5,c=0,d=1;return Game.UpgradesById.forEach(function(e){e.bought&&"Forwards from grandma"==e.name&&(b+=.3),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(d=2*d),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(d=4*d),e.bought&&-1!=e.desc.indexOf("for each 50 grandmas")&&(c+=.02*(a+1)*(a+1)-.02*a*a),e.bought&&-1!=e.desc.indexOf("for each 20 portals")&&(c+=.05*Game.ObjectsById[7].amount)}),b*d+c*d}function Get_Portal_Mod_Total(){var a=0,b=1;return Game.UpgradesById.forEach(function(c){c.bought&&-1!=c.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(b=2*b),c.bought&&-1!=c.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(b=4*b),c.bought&&-1!=c.desc.indexOf("for each 20 portals")&&(a+=.05*Game.ObjectsById[1].amount)}),a*b}function inStore(a){return-1!=Game.UpgradesInStore.indexOf(a)?!0:!1}function formatNum(a){return _sts(a,!1).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatNumB(a){return _sts(a,!0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatTime(a,b){if(a=Math.round(a),1/0==a)return"Never";if(0==a)return"Done!";if(a/86400>1e3)return"> 1,000 days";var c=parseInt(a/86400)%999,d=parseInt(a/3600)%24,e=parseInt(a/60)%60,f=a%60,g=new Array(" days, "," hours, "," minutes, "," seconds");"min"!=b?(1==c&&(g[0]=" day, "),1==d&&(g[1]=" hour, "),1==e&&(g[2]=" minute, "),1==f&&(g[3]=" second")):g=new Array("d, ","h, ","m, ","s");var h="";return c>0&&(h=h+c+g[0]),(c>0||d>0)&&(h=h+d+g[1]),(c>0||d>0||e>0)&&(h=h+e+g[2]),(c>0||d>0||e>0||f>0)&&(h=h+f+g[3]),h}function Colorize(a,b,c){var d=Game.UpgradesById[b],e=d.basePrice,f=new Array("FFFF00","FFFF00"),g=new Array(Math.round(e/a*100)/100,Math.round(Seconds_Left(b,"up"))),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<f.length;i++)g[i]<j[i]?(f[i]="4BB8F0",inStore(d)&&0==i&&in_store[0]++):g[i]==j[i]?(f[i]="00FF00",inStore(d)&&0==i&&in_store[1]++):g[i]==h[i]?(f[i]="FF0000",inStore(d)&&0==i&&in_store[4]++):g[i]>h[i]?(f[i]="FF00FF",inStore(d)&&0==i&&in_store[5]++):h[i]-g[i]<g[i]-j[i]?(f[i]="FF7F00",inStore(d)&&0==i&&in_store[3]++):inStore(d)&&0==i&&in_store[2]++;for(i=0;i<in_store.length;i++)$("#cm_up_q"+i).text(in_store[i]);if(settings[11]&&inStore(d)&&$("#upgrade"+Game.UpgradesInStore.indexOf(d)).html('<div style="background-color:#'+f[0]+'; border:1px solid black; position:absolute; z-index:21; top:2px; left:2px; height:14px; width:14px; pointer-events:none;"></div>'),1==$("#cm_up_div_"+b).length){var k=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),l=new Array("none","none"),m=new Array(0,0);Game.cookies-e<k[0]&&(l[0]="block",m[0]=k[0]-(Game.cookies-e)),Game.cookies-e<k[1]&&(l[1]="block",m[1]=k[1]-(Game.cookies-e)),$("#cm_up_div_"+b).css("border","1px solid #"+f[0]),$("#cm_up_div_"+b).css("display",""),$("#cm_up_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(Math.round(100*a)/100)+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"min")+"</div>"),$("#cm_up_warning_amount").text("Deficit: "+formatNum(m[0])),$("#cm_up_caution_amount").text("Deficit: "+formatNum(m[1])),1==settings[10]||2==settings[10]?($("#cm_up_lucky_div_warning").css("display",l[0]),$("#cm_up_lucky_div_caution").css("display",l[1])):($("#cm_up_lucky_div_warning").css("display","none"),$("#cm_up_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_up_note_div_warning").css("display",l[0]),$("#cm_up_note_div_caution").css("display",l[1])):($("#cm_up_note_div_warning").css("display","none"),$("#cm_up_note_div_caution").css("display","none"))}return c?(f="000000",'<div id="cm_up_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_up_lucky_div_warning" style="background:url(http://frozenelm.com/images/cookiemonster/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_up_lucky_div_caution" style="background:url(http://frozenelm.com/images/cookiemonster/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div><div id="cm_up_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #'+f+'; margin:6px -6px -6px -6px; display:none;"></div><div id="cm_up_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_up_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_up_warning_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/warning.png" height=16px width=16px></div></div><div id="cm_up_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_up_caution_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/caution.png" height=16px width=16px></div></div></div>'):void 0}function Factor_Time(a){var b=Game.cookies-a,c=Game.cookiesPs;if(0==c)return 1;if(0>b){var d=a/c;return 1- -1*b/c/d}return 1}function Seconds_Left(a,b){var c=0;"ob"==b&&(c=Game.ObjectsById[a].price),"up"==b&&(c=Game.UpgradesById[a].basePrice);var d=Game.cookies-c,e=Game.cookiesPs;if(0==e)return 0;if(0>d){var f=-1*d/e;return f}return 0}function _sts(a,b){var c=settings[7];if(c>0)for(var d=1e33,e=sts_type[c-1].length-1;e>=0;e--){var f=(a/d%999).toFixed(3);if(f>=1)return f+sts_type[c-1][e];d/=1e3}return b?Math.round(a):Math.round(100*a)/100}function Sell_Out_Value(){var a=0,b=Game.cookies,c=new Array,d=0;for(Game.ObjectsById.forEach(function(a,b){c[b]=a.amount,d+=a.amount});b>=15||d>0;)for(var e=c.length-1;e>=0;e--){for(var f=!1,g=c[e],h=Game.ObjectsById[e],i=g;i>0;i--)b+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),a+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),c[e]--,d--;for(;b>=h.basePrice*Math.pow(1.15,c[e]);)f=!0,b-=h.basePrice*Math.pow(1.15,c[e]),c[e]++,d++;if(f)break}sell_out=a}function Sell_Out(){confirm("*** WARNING ***\nYou will have no buildings or cookies left after this.")&&(Game.ObjectsById.forEach(function(a){setTimeout(function(){for(;a.amount>0;)a.sell()})}),setTimeout(function(){Buy_Sell()}))}function Buy_Sell(){if(Game.cookies<1e9&&Game.BuildingsOwned<100)return Buy_Sell_No_Wait(),!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.price<=Game.cookies)return b.buy(),setTimeout(function(){Buy_Sell()}),!1;if(b.price>Game.cookies&&b.amount>0)return b.sell(),setTimeout(function(){Buy_Sell()}),!1}setTimeout(function(){Buy_Sell()})}function Buy_Sell_No_Wait(){if(Game.cookies<15)return!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.sell(),b.price<=Game.cookies)return b.buy(),b.sell(),Buy_Sell_No_Wait(),!1}Buy_Sell_No_Wait()}function Get_True_CPI(a,b){var c=0,d=0,e=0;if("ob"==b&&(c=Seconds_Left(Game.ObjectsById[a],"ob"),d=Game.ObjectsById[a].price,e=hold_is[a]),"up"==b){c=Seconds_Left(Game.UpgradesById[a],"up"),d=Game.UpgradesById[a].basePrice;for(var f=0;upgrade_count>f;f++)if(_cup(f,a,!1)){e=Manage_Tooltip(f,a,!1,!0);break}}var g=d/e;return Game.ObjectsById.forEach(function(f,h){var i=f.price,j=hold_is[h],k=Seconds_Left(f,"ob");if(c>k&&("up"==b||h!=a)){var l=c-k,m=j*l,n=d-i+m,o=n/e;o>g&&(g=o)}}),g}function Test_True_CPI(a,b){var c=0,d=0,e=0,f=0;if("ob"==b&&(c=Seconds_Left(a,"ob"),e=Game.ObjectsById[a].price,f=hold_is[a]),"up"==b){c=Seconds_Left(a,"up"),e=Game.UpgradesById[a].basePrice;for(var g=0;upgrade_count>g;g++)if(_cup(g,a,!1)){f=Manage_Tooltip(g,a,!1,!0);break}}var h=Organize_Object_List(),i=e,j=i/f,k=j,l=f;return h.forEach(function(g,j){if(e>g.price&&("up"==b||g.id!=a)){var m=g.price,n=hold_is[g.id],o=hold_cpi[g.id];0==l&&(l=n),0==k&&(k=o);var p=Seconds_Left(g.id,"ob"),q=0,r=h[j+1];if(r.id!=h.length&&(hold_cpi[r.id]<k||r.id==a)&&(q=Seconds_Left(r.id,"ob"),k=hold_cpi[r.id],l=n),c-d>p){var s=q-p;d+=s;var t=l*s;s>0&&(f-=l,i=i-m+t)}}}),j=i/f}function Organize_Object_List(){var a=new Array;return Game.ObjectsById.forEach(function(b){var c=!0;a.length>0?(a.forEach(function(d,e){b.price<d.price&&c&&(c=!1,a.splice(e,0,b),a.join())}),c&&a.push(b)):a.push(b)}),a}function Start_Cookie_Monster(){return 0!=$("#cookie_monster_bar").length?(alert("Cookie Monster "+version+"\n\nCookie Monster is already loaded, silly!"),!1):($("#topBar").css("display","none"),$("#tooltip").css("margin-top","32px"),$("#tooltip").css("pointer-events","none"),$("#cookies").css("background","rgba(0,0,0,0.75)"),$("#cookies").css("border-top","1px solid black"),$("#cookies").css("border-bottom","1px solid black"),$("#goldenCookie").css("cssText","z-index: 1000001 !important;"),$("#game").css("cssText","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;user-select: none;top: 0px;bottom: 57px;"),$("#storeTitle").css("cssText","font-size: 18px;padding: 4px 8px 2px 8px;border-bottom: 1px solid black;"),$("#storeTitle").after('<table cellpadding=0 cellspacing=0 style="width:300px; table-layout:fixed; padding:4px; font-weight:bold; background:rgba(0,0,0,0.6); border-bottom: 1px solid black; cursor:default;"><tr><td align=center style="color:#4bb8f0; padding:2px;" id="cm_up_q0">0</td><td align=center style="color:#00ff00; padding:2px;" id="cm_up_q1">0</td><td align=center style="color:#ffff00; padding:2px;" id="cm_up_q2">0</td><td align=center style="color:#ff7f00; padding:2px;" id="cm_up_q3">0</td><td align=center style="color:#ff0000; padding:2px;" id="cm_up_q4">0</td><td align=center style="color:#ff00ff; padding:2px;" id="cm_up_q5">0</td></tr></table>'),$("body").append("<div id=\"cookie_monster_bar\" style=\"z-index:1000; position:absolute; bottom:0px; left:0px; width:100%; height:56px; border-top:1px solid black; cursor:default;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;background: rgb(69,72,77); /* Old browsers */background: -moz-linear-gradient(top,  rgba(69,72,77,1) 0%, rgba(0,0,0,1) 100%); /* FF3.6+ */background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(69,72,77,1)), color-stop(100%,rgba(0,0,0,1))); /* Chrome,Safari4+ */background: -webkit-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Chrome10+,Safari5.1+ */background: -o-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Opera 11.10+ */background: -ms-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* IE10+ */background: linear-gradient(to bottom,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* W3C */filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#45484d', endColorstr='#000000',GradientType=0 ); /* IE6-9 */\"></div>"),$("body").append('<div id="cookie_monster_overlay" style="position:fixed; z-index:1000000; height:100%; width:100%; background:rgba(255,255,255,1); pointer-events:none; display:none;"></div>'),$("body").append('<div id="cookie_monster_golden_overlay" style="position:fixed; z-index:1000002; height:96px; width:96px; pointer-events:none; cursor:pointer; opacity:0; display:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:32px; text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black !important;" onclick="Game.goldenCookie.click();"></div>'),$("#sectionLeft").append('<div id="cookie_monster_timer_bars_div" style="position:absolute; z-index:1000; bottom:-1px; left:0px; width:100%; pointer-events:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:16px; background:rgba(0,0,0,0.6); border-top:1px solid black;"></div>'),$("link").each(function(){"img/favicon.ico"==$(this).attr("href")&&$(this).attr("id","cm_favicon")}),Make_Table(),Save_Tooltips(),Update_Game_Scripts(),Load_Settings(),Set_Up_Tooltips(),Main_Loop(),Game.Popup('<span style="color:#FFFF00; text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black !important;">Cookie Monster '+version+" Loaded!</span>"),void 0)}function Main_Loop(){Update_Table(),Update_Tooltips("all"),Do_Emphasize(),Manage_Buffs(),loops++,1==loops&&Game.RebuildStore(),setTimeout(function(){Main_Loop()},settings[3])}function Fav_Icon_Spinner(a){a>6&&(a=1),"(G) "==gc_avail?($("#cm_favicon").attr("href","http://frozenelm.com/cookiemonster/images/cm_gc_"+a+".png"),a++,setTimeout(function(){Fav_Icon_Spinner(a)},250)):$("#cm_favicon").attr("href","http://orteil.dashnet.org/cookieclicker/img/favicon.ico")}function Load_Settings(){settings=[1,1,1,1e3,1,1,1,1,0,1,1,1,1],"undefined"!=typeof Storage&&(void 0!=localStorage.FlashScreen?settings[0]=localStorage.FlashScreen:(localStorage.FlashScreen=1,settings[0]=1),void 0!=localStorage.CookieTimer?settings[1]=localStorage.CookieTimer:(localStorage.CookieTimer=1,settings[1]=1),void 0!=localStorage.BuffBars?settings[2]=localStorage.BuffBars:(localStorage.BuffBars=1,settings[2]=1),void 0!=localStorage.Refresh?settings[3]=localStorage.Refresh:(localStorage.Refresh=1e3,settings[3]=1e3),void 0!=localStorage.CookieCD?settings[4]=localStorage.CookieCD:(localStorage.CookieCD=1,settings[4]=1),void 0!=localStorage.CMBar?settings[5]=localStorage.CMBar:(localStorage.CMBar=1,settings[5]=1),void 0!=localStorage.ColoredPrices?settings[6]=localStorage.ColoredPrices:(localStorage.ColoredPrices=1,settings[6]=1),void 0!=localStorage.ShortNumbers?settings[7]=localStorage.ShortNumbers:(localStorage.ShortNumbers=1,settings[7]=1),void 0!=localStorage.CookieSound?settings[8]=localStorage.CookieSound:(localStorage.CookieSound=0,settings[8]=0),void 0!=localStorage.UpdateTitle?settings[9]=localStorage.UpdateTitle:(localStorage.UpdateTitle=1,settings[9]=1),void 0!=localStorage.LuckyAlert?settings[10]=localStorage.LuckyAlert:(localStorage.LuckyAlert=1,settings[10]=1),void 0!=localStorage.UpgradeIcons?settings[11]=localStorage.UpgradeIcons:(localStorage.UpgradeIcons=1,settings[11]=1),void 0!=localStorage.UpgradeDisplay?settings[12]=localStorage.UpgradeDisplay:(localStorage.UpgradeDisplay=1,settings[12]=1)),Show_Hide_CM_Bar()}function Save_Settings(){"undefined"!=typeof Storage&&(localStorage.FlashScreen=settings[0],localStorage.CookieTimer=settings[1],localStorage.BuffBars=settings[2],localStorage.Refresh=settings[3],localStorage.CookieCD=settings[4],localStorage.CMBar=settings[5],localStorage.ColoredPrices=settings[6],localStorage.ShortNumbers=settings[7],localStorage.CookieSound=settings[8],localStorage.UpdateTitle=settings[9],localStorage.LuckyAlert=settings[10],localStorage.UpgradeIcons=settings[11],localStorage.UpgradeDisplay=settings[12]),Show_Hide_CM_Bar()}function Show_Hide_CM_Bar(){0==settings[5]?($("#cookie_monster_bar").css("display","none"),$("#game").css("bottom","0px")):($("#cookie_monster_bar").css("display",""),$("#game").css("bottom","57px"))}function Update_Game_Scripts(){Game.Logic=new Function("",Game.Logic.toString().replace(".title=",".title=gc_avail+").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var a="\n\n'<div class=\"subsection\">'+'<div class=\"title\"><span style=\"color:#4bb8f0;\">Cookie Monster Goodies</span></div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required:</b> ' + CM_Lucky('reg', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required (Frenzy):</b> ' + CM_Lucky('frenzy', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX):</b> ' + CM_Lucky_Reward('max') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX) (Frenzy):</b> ' + CM_Lucky_Reward('max_frenzy') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (CUR):</b> ' + CM_Lucky_Reward('cur') + '</div>'+'</br><div class=\"listing\"><b>Heavenly Chips (MAX):</b> ' + CM_Heavenly_Chip('max') + '</div>'+'<div class=\"listing\"><b>Heavenly Chips (CUR):</b> ' + CM_Heavenly_Chip('cur') + '</div>'+'<div class=\"listing\"><b>Cookies To Next Chip:</b> ' + CM_Heavenly_Chip('next') + '</div>'+'<div class=\"listing\"><b>Time To Next Chip:</b> ' + CM_Heavenly_Chip('time') + '</div>'+'</div>'+";Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("Statistics</div>'+","Statistics</div>'+"+a).replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var b='\n\'<div class="subsection">\'+\'<div class="title"><span style="color:#4bb8f0;">Cookie Monster Settings</span></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Flash Screen \' + CM_Option_State(0) + \'</a><label>Flashes the screen when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Timer \' + CM_Option_State(1) + \'</a><label>Displays a timer on Golden Cookies and Red Cookies</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Sound \' + CM_Option_State(8) + \'</a><label>Plays a sound when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Next Cookie Timer \' + CM_Option_State(4) + \'</a><label>Displays a countdown bar and updates the Title for when the next Cookie will appear</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Update Title \' + CM_Option_State(9) + \'</a><label>Updates the Title to display if a Cookie is waiting to be clicked</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Buff Bars \' + CM_Option_State(2) + \'</a><label>Displays a countdown bar for each effect currently active</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Bottom Bar \' + CM_Option_State(5) + \'</a><label>Displays a bar at the bottom of the screen that shows all Building information</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Colored Prices \' + CM_Option_State(6) + \'</a><label>Changes the colors of all Building prices to correspond with their Cost Per Income</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Icons \' + CM_Option_State(11) + \'</a><label>Displays a small square icon on the Upgrade to better display the Cost Per Income color value</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Short Numbers \' + CM_Short_Numbers() + \'</a><label>Formats all numbers to be shorter when displayed</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Display (\' + CM_Upgrade_Display() + \')</a><label>Changes how the store displays Upgrades</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Lucky Alert (\' + CM_Lucky_Alert() + \')</a><label>Changes the tooltip to display if you would be under the number of cookies required for "Lucky!"</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Refresh Rate (\' + CM_Refresh() + \' fps)</a><label>The rate at which Cookie Monster updates data (higher rates may slow the game)</label></div>\'+\'</div>\'+';Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("OFF')+'</div>'+","OFF')+'</div>'+"+b).replace("startDate=Game.sayTime(date.getTime()/1000*Game.fps,2);","startDate = formatTime(((new Date).getTime() - Game.startDate) / 1000, '');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var c='\nvar cm_id = from.id;\nif(cm_id == "") { cm_id = $(from).parents(".product").prop("id"); }\nif(cm_id == "product5" || cm_id == "product6" || cm_id == "product7" || cm_id == "product8" || cm_id == "product9") { y -= 100; }\nif(cm_id == "product8" || cm_id == "product9") { y -= 13; }\nif(cm_id == "product9" && settings[7] == 0) { y -= 13; }\n';Game.tooltip.draw=new Function("from,text,x,y,origin",Game.tooltip.draw.toString().replace("implemented');}","implemented');}"+c).replace("this.on=1;","this.on=1;\nUpdate_Tooltips('all');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Reset=new Function("bypass",Game.Reset.toString().replace("Game.researchT=0;","Game.researchT=0;\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.LoadSave=new Function("data",Game.LoadSave.toString().replace("Game.Popup('Game loaded');","Game.Popup('Game loaded');\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.RebuildStore=new Function("",Game.RebuildStore.toString().replace("l('products').innerHTML=str;","l('products').innerHTML=str;\nUpdate_Tooltips('ob');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Draw=new Function("",Game.Draw.toString().replace("Beautify(Math.round(Game.cookiesd))","formatNumB(Game.cookiesd)").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var d="return formatNum(what);";Beautify=new Function("what,floats",Beautify.toString().replace("var str='';",d+"\nvar str='';").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""))}function CM_Heavenly_Chip(a){var b=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned),c=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned+sell_out),d=cookies_to_h_chips(Game.cookiesReset),e=h_chips_to_cookies(b+1)-(Game.cookiesReset+Game.cookiesEarned),f=h_chips_to_cookies(c+1)-(Game.cookiesReset+Game.cookiesEarned+sell_out);return"max"==a?formatNum(b)+" <small>("+formatNum(2*b)+"%)</small>":"max_sell_out"==a?formatNum(c)+" <small>("+formatNum(2*c)+"%)</small>":"cur"==a?formatNum(d)+" <small>("+formatNum(2*d)+"%)</small>":"next"==a?formatNum(Math.round(e)):"next_sell_out"==a?formatNum(Math.round(f)):"time"==a?formatTime(Math.round(e/Game.cookiesPs),""):void 0}function cookies_to_h_chips(a){return Math.floor(Math.sqrt(2.5*Math.pow(10,11)+2*a)/Math.pow(10,6)-.5)}function h_chips_to_cookies(a){return 5*Math.pow(10,11)*a*(a+1)}function CM_Upgrade_Display(){switch(1*settings[12]){case 1:return"Normal";case 2:return"All";case 0:return"None";default:return"Normal"}}function CM_Short_Numbers(){switch(1*settings[7]){case 1:return"ON (A)";case 2:return"ON (B)";case 0:return"OFF";default:return"OFF"}}function CM_Lucky_Alert(){switch(1*settings[10]){case 1:return"Both";case 2:return"Icons";case 3:return"Notes";
case 0:return"Off";default:return"Both"}}function CM_Refresh(){switch(1*settings[3]){case 1e3:return"1";case 500:return"2";case 250:return"4";case 100:return"10";case 33:return"30";default:return"1"}}function CM_Option_State(a){return 0==settings[a]?"OFF":"ON"}function CM_Option_Toggle(a){a=$(a);var b=a.text();switch(b){case"Flash Screen ON":settings[0]=0,a.text("Flash Screen OFF");break;case"Flash Screen OFF":settings[0]=1,a.text("Flash Screen ON");break;case"Cookie Sound ON":settings[8]=0,a.text("Cookie Sound OFF");break;case"Cookie Sound OFF":settings[8]=1,a.text("Cookie Sound ON");break;case"Cookie Timer ON":settings[1]=0,a.text("Cookie Timer OFF");break;case"Cookie Timer OFF":settings[1]=1,a.text("Cookie Timer ON");break;case"Next Cookie Timer ON":settings[4]=0,a.text("Next Cookie Timer OFF");break;case"Next Cookie Timer OFF":settings[4]=1,a.text("Next Cookie Timer ON");break;case"Update Title ON":settings[9]=0,a.text("Update Title OFF");break;case"Update Title OFF":settings[9]=1,a.text("Update Title ON");break;case"Buff Bars ON":settings[2]=0,a.text("Buff Bars OFF");break;case"Buff Bars OFF":settings[2]=1,a.text("Buff Bars ON");break;case"Bottom Bar ON":settings[5]=0,a.text("Bottom Bar OFF");break;case"Bottom Bar OFF":settings[5]=1,a.text("Bottom Bar ON");break;case"Colored Prices ON":settings[6]=0,a.text("Colored Prices OFF"),Update_Tooltips("ob");break;case"Colored Prices OFF":settings[6]=1,a.text("Colored Prices ON"),Update_Tooltips("ob");break;case"Upgrade Icons ON":settings[11]=0,a.text("Upgrade Icons OFF"),Game.RebuildUpgrades();break;case"Upgrade Icons OFF":settings[11]=1,a.text("Upgrade Icons ON"),Game.RebuildUpgrades();break;case"Upgrade Display (All)":settings[12]=0,a.text("Upgrade Display (None)"),Update_Upgrade_Display();break;case"Upgrade Display (None)":settings[12]=1,a.text("Upgrade Display (Normal)"),Update_Upgrade_Display();break;case"Upgrade Display (Normal)":settings[12]=2,a.text("Upgrade Display (All)"),Update_Upgrade_Display();break;case"Short Numbers ON (B)":settings[7]=0,a.text("Short Numbers OFF"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers OFF":settings[7]=1,a.text("Short Numbers ON (A)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers ON (A)":settings[7]=2,a.text("Short Numbers ON (B)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Lucky Alert (Both)":settings[10]=2,a.text("Lucky Alert (Icons)");break;case"Lucky Alert (Icons)":settings[10]=3,a.text("Lucky Alert (Notes)");break;case"Lucky Alert (Notes)":settings[10]=0,a.text("Lucky Alert (Off)");break;case"Lucky Alert (Off)":settings[10]=1,a.text("Lucky Alert (Both)");break;case"Refresh Rate (1 fps)":settings[3]=500,a.text("Refresh Rate (2 fps)");break;case"Refresh Rate (2 fps)":settings[3]=250,a.text("Refresh Rate (4 fps)");break;case"Refresh Rate (4 fps)":settings[3]=100,a.text("Refresh Rate (10 fps)");break;case"Refresh Rate (10 fps)":settings[3]=33,a.text("Refresh Rate (30 fps)");break;case"Refresh Rate (30 fps)":settings[3]=1e3,a.text("Refresh Rate (1 fps)")}Save_Settings()}function Update_Upgrade_Display(){var a=$("#upgrades");switch(1*settings[12]){case 1:a.css("cssText","");break;case 2:a.css("cssText","height: auto !important;");break;case 0:a.css("cssText","height: 0px !important;")}}function CM_Lucky(a,b){var c=Game.cookiesPs;Game.frenzy>0&&(c/=Game.frenzyPower),"frenzy"==a&&(c=7*c);var d=Math.round((1200*c+13)/.1);return b||(d=d<=Game.cookies?'<span style="color:#00FF00; font-weight:bold;">'+formatNum(d)+"</span>":formatNum(d)),d}function CM_Lucky_Reward(a){var b=Game.cookiesPs;Game.frenzy>0&&"cur"!=a&&(b/=Game.frenzyPower),"max_frenzy"==a&&(b=7*b);var c=new Array(Math.round(1200*b+13),Math.round(.1*Game.cookies+13));return("max"==a||"max_frenzy"==a)&&Math.round((1200*b+13)/.1)>Game.cookies?formatNum(c[0]):formatNum(Math.min.apply(Math,c))}function Save_Tooltips(){Game.UpgradesById.forEach(function(a,b){tooltips[b]=a.desc}),Game.ObjectsById.forEach(function(a,b){building_tooltips[b]=a.desc})}function Set_Up_Tooltips(){var a=!1;Game.UpgradesById.forEach(function(b,c){for(var d=0;upgrade_count>d;d++)if(_cup(d,c,!0)){b.desc=Manage_Tooltip(d,c,!0,!1),a=!0;break}b.bought&&b.desc!=tooltips[c]&&(b.desc=tooltips[c],a=!0)}),a&&Game.RebuildUpgrades()}function Update_Tooltips(a){("all"==a||"up"==a)&&(in_store=new Array(0,0,0,0,0,0),Game.UpgradesById.forEach(function(a,b){for(var c=0;upgrade_count>c;c++)if(_cup(c,b,!1)){Manage_Tooltip(c,b,!1,!1);break}})),("all"==a||"ob"==a)&&Game.ObjectsById.forEach(function(a){Manage_Building_Tooltip(a)})}function _cup(a,b,c){if(up=Game.UpgradesById[b],-1==up.desc.indexOf("cm_up_div_")&&!c)return!1;switch(a){case 0:if(!up.bought&&"Reinforced index finger"==up.name)return!0;break;case 1:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors are <b>twice</b> as efficient."))return!0;break;case 2:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors gain"))return!0;break;case 3:if(!up.bought&&"Forwards from grandma"==up.name)return!0;break;case 4:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>twice</b> as efficient."))return!0;break;case 5:if(!up.bought&&"Cheap hoes"==up.name)return!0;break;case 6:if(!up.bought&&-1!=up.desc.indexOf("Farms are <b>twice</b> as efficient."))return!0;break;case 7:if(!up.bought&&"Sturdier conveyor belts"==up.name)return!0;break;case 8:if(!up.bought&&-1!=up.desc.indexOf("Factories are <b>twice</b> as efficient."))return!0;break;case 9:if(!up.bought&&"Sugar gas"==up.name)return!0;break;case 10:if(!up.bought&&-1!=up.desc.indexOf("Mines are <b>twice</b> as efficient."))return!0;break;case 11:if(!up.bought&&"Vanilla nebulae"==up.name)return!0;break;case 12:if(!up.bought&&-1!=up.desc.indexOf("Shipments are <b>twice</b> as efficient."))return!0;break;case 13:if(!up.bought&&"Antimony"==up.name)return!0;break;case 14:if(!up.bought&&-1!=up.desc.indexOf("Alchemy labs are <b>twice</b> as efficient."))return!0;break;case 15:if(!up.bought&&"Ancient tablet"==up.name)return!0;break;case 16:if(!up.bought&&-1!=up.desc.indexOf("Portals are <b>twice</b> as efficient."))return!0;break;case 17:if(!up.bought&&"Flux capacitors"==up.name)return!0;break;case 18:if(!up.bought&&-1!=up.desc.indexOf("Time machines are <b>twice</b> as efficient."))return!0;break;case 19:if(!up.bought&&-1!=up.desc.indexOf("the more milk you have"))return!0;break;case 20:if(!up.bought&&-1!=up.desc.indexOf("Cookie production multiplier <b>+"))return!0;break;case 21:if(!up.bought&&-1!=up.desc.indexOf("for each 50 grandmas"))return!0;break;case 22:if(!up.bought&&-1!=up.desc.indexOf("for each 20 portals"))return!0;break;case 23:if(!up.bought&&"Elder Pledge"==up.name)return!0;break;case 24:if(!up.bought&&"Elder Covenant"==up.name)return!0;break;case 25:if(!up.bought&&"Sacrificial rolling pins"==up.name)return!0;break;case 26:if(!up.bought&&-1!=up.desc.indexOf("Golden cookie"))return!0;break;case 27:if(!up.bought&&-1!=up.desc.indexOf("Clicking gains <b>+1% of your CpS</b>."))return!0;break;case 28:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>4 times</b> as efficient."))return!0;break;case 29:if(!up.bought&&-1!=up.desc.indexOf("Antimatter condensers are <b>twice</b> as efficient."))return!0;break;case 30:if(!up.bought&&"Sugar bosons"==up.name)return!0;break;case 31:if(!up.bought&&"Revoke Elder Covenant"==up.name)return!0;break;case 32:if(!up.bought&&-1!=up.desc.indexOf("heavenly chips"))return!0}return!1}function Manage_Tooltip(a,b,c,d){var e=0,f=0;switch(a){case 0:e=_bam("The mouse and cursors",.1,0);break;case 1:e=_bte(0);break;case 2:e=_mcg(b);break;case 3:e=_bam("Grandmas",.3,1);break;case 4:e=_bte(1),_lgt(b)&&f++;break;case 5:e=_bam("Farms",.5,2);break;case 6:e=_bte(2);break;case 7:e=_bam("Factories",4,3);break;case 8:e=_bte(3);break;case 9:e=_bam("Mines",10,4);break;case 10:e=_bte(4);break;case 11:e=_bam("Shipments",30,5);break;case 12:e=_bte(5);break;case 13:e=_bam("Alchemy labs",100,6);break;case 14:e=_bte(6);break;case 15:e=_bam("Portals",1666,7);break;case 16:e=_bte(7);break;case 17:e=_bam("Time machines",9876,8);break;case 18:e=_bte(8);break;case 21:e=_gpg();break;case 22:e=_gpp();break;case 23:f+=_cha("Elder nap"),4==Game.pledges&&(f+=_cha("Elder slumber"));break;case 24:f+=_cha("Elder calm");break;case 28:e=_fte(1);break;case 29:e=_bte(9);break;case 30:e=_bam("Antimatter condensers",99999,9);break;case 32:e=_dhc(f,b,e),_lhc(b)&&(f+=_cha("Wholesome"))}return 19==Game.UpgradesOwned&&(f+=_cha("Enhancer")),49==Game.UpgradesOwned&&(f+=_cha("Augmenter")),99==Game.UpgradesOwned&&(f+=_cha("Upgrader")),e+=Get_Achi_Worth(f,b,e,0),d?e:tooltips[b]+Colorize(e,b,c)}function _dhc(a,b,c){var d=Game.UpgradesById[b],e=d.desc.indexOf("<b>")+3,f=d.desc.indexOf("%"),g=1*d.desc.substr(e,f-e),h=Get_Achi_Worth(a,b,c,2*Game.prestige["Heavenly chips"]*(g/100));return h-Game.cookiesPs}function _lhc(a){return"Heavenly key"==Game.UpgradesById[a].name?!0:!1}function _cpc(){return.01*Game.mouseCps()*usr_clk}function _lgt(a){if(1==_cha("Elder")&&-1!=Game.UpgradesById[a].name.indexOf(" grandmas")){var b=new Array,c=new Array;if(Game.UpgradesById.forEach(function(a,d){a.bought&&-1!=a.name.indexOf(" grandmas")?b.push(d):a.bought||-1==a.name.indexOf(" grandmas")||c.push(d)}),1==c.length&&c[0]==a)return!0}return!1}function _cha(a){var b=0;return Game.AchievementsById.forEach(function(c){c.won||c.name!=a||(b=1)}),b}function _gpp(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.05*Game.ObjectsById[7].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _gpg(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.02*Game.ObjectsById[1].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _mcg(a){var b=Game.UpgradesById[a].desc,c=31;-1!=b.indexOf(" another ")&&(c+=8);var d=1*b.substr(c,b.indexOf("<",c)-c);return d*(Game.BuildingsOwned-Game.ObjectsById[0].amount)*Game.ObjectsById[0].amount*Game.globalCpsMult}function _bte(a){return Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _fte(a){return 3*Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _bam(a,b,c){var d=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf(a+" are <b>twice</b> as efficient.")&&(d=2*d),b.bought&&-1!=b.desc.indexOf(a+" are <b>4 times</b> as efficient.")&&(d=4*d)}),b*d*Game.ObjectsById[c].amount*Game.globalCpsMult}function _inc(a){var b=0;return Game.AchievementsById.forEach(function(c){var d=c.desc.replace(/,/g,"");c.won||-1==d.indexOf(" per second.")||a>=1*d.substr(8,d.indexOf("</b>",8)-8)&&b++}),b}function Get_Achi_Worth(a,b,c,d){var e=0,f=Calc_Heavenly_Mult();0!=d&&(f=d);var g=0,h=new Array(0,0,0,0),i=Game.milkProgress,j=Get_Frenzy_Mult();Game.UpgradesById.forEach(function(a){var c=a.desc.replace("[Research]<br>","");a.bought&&-1!=c.indexOf("Cookie production multiplier <b>+")&&(f+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought||-1==c.indexOf("Cookie production multiplier <b>+")||a.id!=b||(g+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought&&"Kitten helpers"==a.name&&(h[0]=.05),a.bought&&"Kitten workers"==a.name&&(h[1]=.1),a.bought&&"Kitten engineers"==a.name&&(h[2]=.2),a.bought&&"Kitten overseers"==a.name&&(h[3]=.2)});var k=100+f;k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var l=c,m=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j;i+=.04*a,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var n=0;switch(Game.UpgradesById[b].name){case"Kitten helpers":n=.05;break;case"Kitten workers":n=.1;break;case"Kitten engineers":n=.2;break;case"Kitten overseers":n=.2}k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m;var o=_inc(e+m);return o>0&&(i+=.04*o,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i,k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m),0!=d&&(e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j),Game.Has("Elder Covenant")&&(e*=.95),e}function Calc_Heavenly_Mult(){var a=2*Game.prestige["Heavenly chips"],b=0;return Game.Has("Heavenly chip secret")&&(b+=.05),Game.Has("Heavenly cookie stand")&&(b+=.2),Game.Has("Heavenly bakery")&&(b+=.25),Game.Has("Heavenly confectionery")&&(b+=.25),Game.Has("Heavenly key")&&(b+=.25),a*b}function Get_Frenzy_Mult(){return Game.frenzy>0?Game.frenzyPower:1}function Manage_Building_Tooltip(a){var b=a.id,c=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),d=new Array("none","none"),e=(new Array("",""),new Array(0,0));Game.cookies-a.price<c[0]&&(d[0]="block",e[0]=c[0]-(Game.cookies-a.price)),Game.cookies-a.price<c[1]&&(d[1]="block",e[1]=c[1]-(Game.cookies-a.price)),a.desc==building_tooltips[a.id]&&(a.desc+='<div id="cm_ob_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #000000; margin:6px -6px -6px -6px; display:none;"></div>',a.desc+='<div id="cm_ob_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_ob_lucky_div_warning" style="background:url(http://frozenelm.com/cookiemonster/images/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_ob_lucky_div_caution" style="background:url(http://frozenelm.com/cookiemonster/images/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div>',a.desc+='<div id="cm_ob_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_ob_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_ob_warning_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/warning.png" height=16px width=16px></div></div><div id="cm_ob_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_ob_caution_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/caution.png" height=16px width=16px></div></div></div>',Game.RebuildStore());var f=new Array("FFFF00","FFFF00"),g=new Array(hold_cpi[b],hold_tc[b]),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<f.length;i++)g[i]==j[i]?f[i]="00FF00":g[i]==h[i]?f[i]="FF0000":h[i]-g[i]<g[i]-j[i]&&(f[i]="FF7F00");1==$("#cm_ob_div_"+b).length&&($("#cm_ob_div_"+b).css("border","1px solid #"+f[0]),$("#cm_ob_div_"+b).css("display",""),$("#cm_ob_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(hold_is[b])+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"")+"</div>"),$("#cm_ob_warning_amount").text("Deficit: "+formatNum(e[0])),$("#cm_ob_caution_amount").text("Deficit: "+formatNum(e[1])),1==settings[10]||2==settings[10]?($("#cm_ob_lucky_div_warning").css("display",d[0]),$("#cm_ob_lucky_div_caution").css("display",d[1])):($("#cm_ob_lucky_div_warning").css("display","none"),$("#cm_ob_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_ob_note_div_warning").css("display",d[0]),$("#cm_ob_note_div_caution").css("display",d[1])):($("#cm_ob_note_div_warning").css("display","none"),$("#cm_ob_note_div_caution").css("display","none"))),1==settings[6]?$("#product"+b).find(".price").first().css("color","#"+f[0]):$("#product"+b).find(".price").first().css("color","")}function Make_Table(){var a='<th align=left width=130 style="color:#FFFF00;"> '+version+"</th>",b="",c="",d="";Game.ObjectsById.forEach(function(e,f){a+='<th align=middle id="cookie_monster_item_'+f+'" style="font-weight:bold;"></th>',b+='<td align=middle id="cookie_monster_is_'+f+'"></td>',c+='<td align=middle id="cookie_monster_cpi_'+f+'"></td>',d+='<td align=middle id="cookie_monster_tc_'+f+'"></td>'}),$("#cookie_monster_bar").html('<table style="width:100%; table-layout:fixed; margin-top:2px;"><tr>'+a+'</tr><tr><th align=right style="color:#4bb8f0;">Bonus Income</th>'+b+'</tr><tr><th align=right style="color:#4bb8f0;">Base Cost Per Income</th>'+c+'</tr><tr><th align=right style="color:#4bb8f0;">Time Left</th>'+d+"</tr></table>")}function Update_Table(){Game.ObjectsById.forEach(function(a,b){var c=a.price,d=a.amount,e=(a.storedTotalCps,a.storedCps*Game.globalCpsMult);"Grandma"==a.name&&(e=0);var f=Math.round(100*(e+Get_Upgrade_Bonuses(a.name,d,e)))/100,g=Math.round(c/f*100)/100,h=a.name.replace(/([^\s]+)/,"");hold_item[b]=a.name.replace(h,"")+' (<span style="color:#4bb8f0;">'+formatNum(d)+"</span>)",hold_is[b]=Math.round(100*f)/100,hold_cpi[b]=Math.round(100*g)/100,hold_tc[b]=Math.round(Seconds_Left(b,"ob"))}),Game.ObjectsById.forEach(function(a,b){var c=new Array("FFFF00","FFFF00"),d=new Array(hold_cpi[b],hold_tc[b]),e=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),f=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<c.length;i++)d[i]==f[i]?c[i]="00FF00":d[i]==e[i]?c[i]="FF0000":e[i]-d[i]<d[i]-f[i]&&(c[i]="FF7F00");$("#cookie_monster_item_"+b).html(hold_item[b]),$("#cookie_monster_is_"+b).html(formatNum(hold_is[b])),$("#cookie_monster_cpi_"+b).html('<span style="color:#'+c[0]+';">'+formatNum(d[0])+"</span>"),$("#cookie_monster_tc_"+b).html('<span style="color:#'+c[1]+';">'+formatTime(d[1],"min")+"</span>")})}function Do_Emphasize(){var a=$("#cookie_monster_golden_overlay"),b=$("#goldenCookie");if("none"!=b.css("display")||emphasize||(emphasize=!0,gc_avail=""),"none"!=b.css("display")&&emphasize){if(emphasize=!1,1==settings[9]&&(gc_avail="(G) ",Fav_Icon_Spinner(1)),1==settings[8]){var c=new Audio("http://frozenelm.com/cookiemonster/sounds/ba%20dink.mp3");c.volume=1,c.play()}1==settings[0]&&($("#cookie_monster_overlay").fadeIn(100),$("#cookie_monster_overlay").fadeOut(500))}"none"!=b.css("display")&&1==settings[1]?(a.css("display","block"),a.css("opacity",b.css("opacity")),a.css("left",b.css("left")),a.css("top",b.css("top")),a.html('<div style="position:absolute; top:30px; width:96px; height:36px;">'+Math.round(Game.goldenCookie.life/Game.fps)+"</div>")):a.css("display","none")}function Manage_Buffs(){var a="",b="",c=0,d=13+13*Game.Has("Get lucky"),e=new Array(Game.goldenCookie.time,Game.goldenCookie.minTime,Game.goldenCookie.maxTime),f=parseInt($("#cookie_monster_timer_bars_div").css("width"));switch(Game.frenzyPower){case 7:c=77+77*Game.Has("Get lucky"),a="Frenzy",b="FFFF00";break;case 666:c=6+6*Game.Has("Get lucky"),a="Blood Frenzy",b="00FF00",c=66+66*Game.Has("Get lucky"),a="Clot",b="FF0000"}Game.frenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_"+b).length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_'+b+'" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">'+a+'<td><td><div id="cmt_'+b+'" style="position:relative; background:#'+b+"; height:10px; width:"+Game.frenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_'+b+'" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+c+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_"+b).css("width",Game.frenzy/e[2]*100+"%"),$("#cmt_time_"+b).text(Math.round(Game.frenzy/Game.fps))),$("#cookie_monster_timer_"+b).fadeIn(250),"1"==$("#cookie_monster_timer_FFFF00").css("opacity")&&"FFFF00"!=b&&$("#cookie_monster_timer_FFFF00").fadeOut(250),"1"==$("#cookie_monster_timer_00FF00").css("opacity")&&"00FF00"!=b&&$("#cookie_monster_timer_00FF00").fadeOut(250),"1"==$("#cookie_monster_timer_FF0000").css("opacity")&&"FF0000"!=b&&$("#cookie_monster_timer_FF0000").fadeOut(250)):1==$("#cookie_monster_timer_"+b).length&&"1"==$("#cookie_monster_timer_"+b).css("opacity")&&$("#cookie_monster_timer_"+b).fadeOut(250),Game.clickFrenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_4BB8F0").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_4BB8F0" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Click Frenzy<td><td><div id="cmt_4BB8F0" style="position:relative; background:#4BB8F0; height:10px; width:'+Game.clickFrenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_4BB8F0" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+d+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_4BB8F0").css("width",Game.clickFrenzy/e[2]*100+"%"),$("#cmt_time_4BB8F0").text(Math.round(Game.clickFrenzy/Game.fps))),$("#cookie_monster_timer_4BB8F0").fadeIn(250)):1==$("#cookie_monster_timer_4BB8F0").length&&"1"==$("#cookie_monster_timer_4BB8F0").css("opacity")&&$("#cookie_monster_timer_4BB8F0").fadeOut(250),e[0]>0&&"none"==$("#goldenCookie").css("display")&&1==settings[4]?(1!=$("#cookie_monster_timer_FF00FF").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_FF00FF" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Next Cookie<td><td><div id="cmt_FF00FF" style="position:relative; background:#aaaaaa; height:10px; width:100%; margin-left:4px; border:1px solid black;"><div id="cmt2_FF00FF" style="position:relative; background:#FF00FF; height:10px; width:100%; margin-left:0px; max-width:'+.67*(f-189)+'px; float:right;"></div><div id="cmt_time_FF00FF" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+Math.round((e[2]-e[0])/Game.fps)+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt2_FF00FF").css("max-width",.67*(f-189)+"px"),$("#cmt_FF00FF").css("width",(e[2]-e[0])/e[2]*100+"%"),$("#cmt_time_FF00FF").text(Math.round((e[2]-e[0])/Game.fps))),$("#cookie_monster_timer_FF00FF").fadeIn(250)):1==$("#cookie_monster_timer_FF00FF").length&&"1"==$("#cookie_monster_timer_FF00FF").css("opacity")&&$("#cookie_monster_timer_FF00FF").fadeOut(250),(e[2]-e[0])/Game.fps>0&&"none"==$("#goldenCookie").css("display")&&(gc_avail=1==settings[4]?"("+Math.round((e[2]-e[0])/Game.fps)+") ":""),$("#versionNumber").css("bottom",$("#cookie_monster_timer_bars_div").css("height"))}function Get_Upgrade_Bonuses(a,b,c){var d=0,e=0;switch(a){case"Cursor":0==b&&(e+=_cha("Click")),1==b&&(e+=_cha("Double-click")),49==b&&(e+=_cha("Mouse wheel")),99==b&&(e+=_cha("Of Mice and Men")),199==b&&(e+=_cha("The Digital"));break;case"Grandma":d+=Get_Grandma_Mod_Total(b)*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Grandma's Cookies")),49==b&&(e+=_cha("Sloppy kisses")),99==b&&(e+=_cha("Retirement home")),149==b&&(e+=_cha("Friend of the ancients")),199==b&&(e+=_cha("Ruler of the ancients"));break;case"Farm":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("My first farm")),49==b&&(e+=_cha("Reap what you sow")),99==b&&(e+=_cha("Farm ill"));break;case"Factory":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Production chain")),49==b&&(e+=_cha("Industrial revolution")),99==b&&(e+=_cha("Global warming"));break;case"Mine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("You know the drill")),49==b&&(e+=_cha("Excavation site")),99==b&&(e+=_cha("Hollow the planet"));break;case"Shipment":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Expedition")),49==b&&(e+=_cha("Galactic highway")),99==b&&(e+=_cha("Far far away"));break;case"Alchemy lab":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Transmutation")),49==b&&(e+=_cha("Transmogrification")),99==b&&(e+=_cha("Gold member"));break;case"Portal":d+=Get_Portal_Mod_Total()*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("A whole new world")),49==b&&(e+=_cha("Now you're thinking")),99==b&&(e+=_cha("Dimensional shift"));break;case"Time machine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Time warp")),49==b&&(e+=_cha("Alternate timeline")),99==b&&(e+=_cha("Rewriting history"));break;case"Antimatter condenser":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Antibatter")),49==b&&(e+=_cha("Quirky quarks")),99==b&&(e+=_cha("It does matter!"))}return 99==Game.BuildingsOwned&&(e+=_cha("Builder")),399==Game.BuildingsOwned&&(e+=_cha("Architect")),799==Game.BuildingsOwned&&(e+=_cha("Engineer")),_owe(a)&&e++,_mat(a)&&e++,_bat(a)&&e++,_cen(a)&&e++,d+Get_Achi_Worth(e,0,d+c,0)}function _bat(a){if(1==_cha("Base 10")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=10*c.length,e=0;e<c.length;e++){if(c[e]<d)return!1;d-=10}return!0}return!1}function _mat(a){if(1==_cha("Mathematician")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=128,e=0;e<c.length;e++)if(e>2&&(d/=2),c[e]<d)return!1;return!0}return!1}function _owe(a){if(1==_cha("One with everything")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>0?b.push(a.name):c.push(a.name)}),1==c.length&&c[0]==a)return!0}return!1}function _cen(a){if(1==_cha("Centennial")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>=100?b.push(a.name):c.push(a)}),1==c.length&&c[0].name==a&&99==c[0].amount)return!0}return!1}function Get_Cursor_Mod_Total(){var a=0;return Game.UpgradesById.forEach(function(b){if(b.bought&&-1!=b.desc.indexOf("The mouse and cursors gain")){var c=31;-1!=b.desc.indexOf(" another ")&&(c+=8),a+=1*b.desc.substr(c,b.desc.indexOf("<",c)-c)}}),a*Game.ObjectsById[0].amount}function Get_Grandma_Mod_Total(a){var b=.5,c=0,d=1;return Game.UpgradesById.forEach(function(e){e.bought&&"Forwards from grandma"==e.name&&(b+=.3),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(d=2*d),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(d=4*d),e.bought&&-1!=e.desc.indexOf("for each 50 grandmas")&&(c+=.02*(a+1)*(a+1)-.02*a*a),e.bought&&-1!=e.desc.indexOf("for each 20 portals")&&(c+=.05*Game.ObjectsById[7].amount)}),b*d+c*d}function Get_Portal_Mod_Total(){var a=0,b=1;return Game.UpgradesById.forEach(function(c){c.bought&&-1!=c.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(b=2*b),c.bought&&-1!=c.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(b=4*b),c.bought&&-1!=c.desc.indexOf("for each 20 portals")&&(a+=.05*Game.ObjectsById[1].amount)}),a*b}function inStore(a){return-1!=Game.UpgradesInStore.indexOf(a)?!0:!1}function formatNum(a){return _sts(a,!1).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatNumB(a){return _sts(a,!0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatTime(a,b){if(a=Math.round(a),1/0==a)return"Never";if(0==a)return"Done!";if(a/86400>1e3)return"> 1,000 days";var c=parseInt(a/86400)%999,d=parseInt(a/3600)%24,e=parseInt(a/60)%60,f=a%60,g=new Array(" days, "," hours, "," minutes, "," seconds");"min"!=b?(1==c&&(g[0]=" day, "),1==d&&(g[1]=" hour, "),1==e&&(g[2]=" minute, "),1==f&&(g[3]=" second")):g=new Array("d, ","h, ","m, ","s");var h="";return c>0&&(h=h+c+g[0]),(c>0||d>0)&&(h=h+d+g[1]),(c>0||d>0||e>0)&&(h=h+e+g[2]),(c>0||d>0||e>0||f>0)&&(h=h+f+g[3]),h}function Colorize(a,b,c){var d=Game.UpgradesById[b],e=d.basePrice,f=new Array("FFFF00","FFFF00"),g=new Array(Math.round(e/a*100)/100,Math.round(Seconds_Left(b,"up"))),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<f.length;i++)g[i]<j[i]?(f[i]="4BB8F0",inStore(d)&&0==i&&in_store[0]++):g[i]==j[i]?(f[i]="00FF00",inStore(d)&&0==i&&in_store[1]++):g[i]==h[i]?(f[i]="FF0000",inStore(d)&&0==i&&in_store[4]++):g[i]>h[i]?(f[i]="FF00FF",inStore(d)&&0==i&&in_store[5]++):h[i]-g[i]<g[i]-j[i]?(f[i]="FF7F00",inStore(d)&&0==i&&in_store[3]++):inStore(d)&&0==i&&in_store[2]++;for(i=0;i<in_store.length;i++)$("#cm_up_q"+i).text(in_store[i]);if(settings[11]&&inStore(d)&&$("#upgrade"+Game.UpgradesInStore.indexOf(d)).html('<div style="background-color:#'+f[0]+'; border:1px solid black; position:absolute; z-index:21; top:2px; left:2px; height:14px; width:14px; pointer-events:none;"></div>'),1==$("#cm_up_div_"+b).length){var k=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),l=new Array("none","none"),m=new Array(0,0);Game.cookies-e<k[0]&&(l[0]="block",m[0]=k[0]-(Game.cookies-e)),Game.cookies-e<k[1]&&(l[1]="block",m[1]=k[1]-(Game.cookies-e)),$("#cm_up_div_"+b).css("border","1px solid #"+f[0]),$("#cm_up_div_"+b).css("display",""),$("#cm_up_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(Math.round(100*a)/100)+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"min")+"</div>"),$("#cm_up_warning_amount").text("Deficit: "+formatNum(m[0])),$("#cm_up_caution_amount").text("Deficit: "+formatNum(m[1])),1==settings[10]||2==settings[10]?($("#cm_up_lucky_div_warning").css("display",l[0]),$("#cm_up_lucky_div_caution").css("display",l[1])):($("#cm_up_lucky_div_warning").css("display","none"),$("#cm_up_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_up_note_div_warning").css("display",l[0]),$("#cm_up_note_div_caution").css("display",l[1])):($("#cm_up_note_div_warning").css("display","none"),$("#cm_up_note_div_caution").css("display","none"))}return c?(f="000000",'<div id="cm_up_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_up_lucky_div_warning" style="background:url(http://frozenelm.com/images/cookiemonster/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_up_lucky_div_caution" style="background:url(http://frozenelm.com/images/cookiemonster/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div><div id="cm_up_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #'+f+'; margin:6px -6px -6px -6px; display:none;"></div><div id="cm_up_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_up_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_up_warning_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/warning.png" height=16px width=16px></div></div><div id="cm_up_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_up_caution_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/caution.png" height=16px width=16px></div></div></div>'):void 0
}function Factor_Time(a){var b=Game.cookies-a,c=Game.cookiesPs;if(0==c)return 1;if(0>b){var d=a/c;return 1- -1*b/c/d}return 1}function Seconds_Left(a,b){var c=0;"ob"==b&&(c=Game.ObjectsById[a].price),"up"==b&&(c=Game.UpgradesById[a].basePrice);var d=Game.cookies-c,e=Game.cookiesPs;if(0==e)return 0;if(0>d){var f=-1*d/e;return f}return 0}function _sts(a,b){var c=settings[7];if(c>0)for(var d=1e33,e=sts_type[c-1].length-1;e>=0;e--){var f=(a/d%999).toFixed(3);if(f>=1)return f+sts_type[c-1][e];d/=1e3}return b?Math.round(a):Math.round(100*a)/100}function Sell_Out_Value(){var a=0,b=Game.cookies,c=new Array,d=0;for(Game.ObjectsById.forEach(function(a,b){c[b]=a.amount,d+=a.amount});b>=15||d>0;)for(var e=c.length-1;e>=0;e--){for(var f=!1,g=c[e],h=Game.ObjectsById[e],i=g;i>0;i--)b+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),a+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),c[e]--,d--;for(;b>=h.basePrice*Math.pow(1.15,c[e]);)f=!0,b-=h.basePrice*Math.pow(1.15,c[e]),c[e]++,d++;if(f)break}sell_out=a}function Sell_Out(){confirm("*** WARNING ***\nYou will have no buildings or cookies left after this.")&&(Game.ObjectsById.forEach(function(a){setTimeout(function(){for(;a.amount>0;)a.sell()})}),setTimeout(function(){Buy_Sell()}))}function Buy_Sell(){if(Game.cookies<1e9&&Game.BuildingsOwned<100)return Buy_Sell_No_Wait(),!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.price<=Game.cookies)return b.buy(),setTimeout(function(){Buy_Sell()}),!1;if(b.price>Game.cookies&&b.amount>0)return b.sell(),setTimeout(function(){Buy_Sell()}),!1}setTimeout(function(){Buy_Sell()})}function Buy_Sell_No_Wait(){if(Game.cookies<15)return!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.sell(),b.price<=Game.cookies)return b.buy(),b.sell(),Buy_Sell_No_Wait(),!1}Buy_Sell_No_Wait()}function Get_True_CPI(a,b){var c=0,d=0,e=0;if("ob"==b&&(c=Seconds_Left(Game.ObjectsById[a],"ob"),d=Game.ObjectsById[a].price,e=hold_is[a]),"up"==b){c=Seconds_Left(Game.UpgradesById[a],"up"),d=Game.UpgradesById[a].basePrice;for(var f=0;upgrade_count>f;f++)if(_cup(f,a,!1)){e=Manage_Tooltip(f,a,!1,!0);break}}var g=d/e;return Game.ObjectsById.forEach(function(f,h){var i=f.price,j=hold_is[h],k=Seconds_Left(f,"ob");if(c>k&&("up"==b||h!=a)){var l=c-k,m=j*l,n=d-i+m,o=n/e;o>g&&(g=o)}}),g}function Test_True_CPI(a,b){var c=0,d=0,e=0,f=0;if("ob"==b&&(c=Seconds_Left(a,"ob"),e=Game.ObjectsById[a].price,f=hold_is[a]),"up"==b){c=Seconds_Left(a,"up"),e=Game.UpgradesById[a].basePrice;for(var g=0;upgrade_count>g;g++)if(_cup(g,a,!1)){f=Manage_Tooltip(g,a,!1,!0);break}}var h=Organize_Object_List(),i=e,j=i/f,k=j,l=f;return h.forEach(function(g,j){if(e>g.price&&("up"==b||g.id!=a)){var m=g.price,n=hold_is[g.id],o=hold_cpi[g.id];0==l&&(l=n),0==k&&(k=o);var p=Seconds_Left(g.id,"ob"),q=0,r=h[j+1];if(r.id!=h.length&&(hold_cpi[r.id]<k||r.id==a)&&(q=Seconds_Left(r.id,"ob"),k=hold_cpi[r.id],l=n),c-d>p){var s=q-p;d+=s;var t=l*s;s>0&&(f-=l,i=i-m+t)}}}),j=i/f}function Organize_Object_List(){var a=new Array;return Game.ObjectsById.forEach(function(b){var c=!0;a.length>0?(a.forEach(function(d,e){b.price<d.price&&c&&(c=!1,a.splice(e,0,b),a.join())}),c&&a.push(b)):a.push(b)}),a}function Start_Cookie_Monster(){return 0!=$("#cookie_monster_bar").length?(alert("Cookie Monster "+version+"\n\nCookie Monster is already loaded, silly!"),!1):($("#topBar").css("display","none"),$("#tooltip").css("margin-top","32px"),$("#tooltip").css("pointer-events","none"),$("#cookies").css("background","rgba(0,0,0,0.75)"),$("#cookies").css("border-top","1px solid black"),$("#cookies").css("border-bottom","1px solid black"),$("#goldenCookie").css("cssText","z-index: 1000001 !important;"),$("#game").css("cssText","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;user-select: none;top: 0px;bottom: 57px;"),$("#storeTitle").css("cssText","font-size: 18px;padding: 4px 8px 2px 8px;border-bottom: 1px solid black;"),$("#storeTitle").after('<table cellpadding=0 cellspacing=0 style="width:300px; table-layout:fixed; padding:4px; font-weight:bold; background:rgba(0,0,0,0.6); border-bottom: 1px solid black; cursor:default;"><tr><td align=center style="color:#4bb8f0; padding:2px;" id="cm_up_q0">0</td><td align=center style="color:#00ff00; padding:2px;" id="cm_up_q1">0</td><td align=center style="color:#ffff00; padding:2px;" id="cm_up_q2">0</td><td align=center style="color:#ff7f00; padding:2px;" id="cm_up_q3">0</td><td align=center style="color:#ff0000; padding:2px;" id="cm_up_q4">0</td><td align=center style="color:#ff00ff; padding:2px;" id="cm_up_q5">0</td></tr></table>'),$("body").append("<div id=\"cookie_monster_bar\" style=\"z-index:1000; position:absolute; bottom:0px; left:0px; width:100%; height:56px; border-top:1px solid black; cursor:default;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;background: rgb(69,72,77); /* Old browsers */background: -moz-linear-gradient(top,  rgba(69,72,77,1) 0%, rgba(0,0,0,1) 100%); /* FF3.6+ */background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(69,72,77,1)), color-stop(100%,rgba(0,0,0,1))); /* Chrome,Safari4+ */background: -webkit-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Chrome10+,Safari5.1+ */background: -o-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Opera 11.10+ */background: -ms-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* IE10+ */background: linear-gradient(to bottom,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* W3C */filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#45484d', endColorstr='#000000',GradientType=0 ); /* IE6-9 */\"></div>"),$("body").append('<div id="cookie_monster_overlay" style="position:fixed; z-index:1000000; height:100%; width:100%; background:rgba(255,255,255,1); pointer-events:none; display:none;"></div>'),$("body").append('<div id="cookie_monster_golden_overlay" style="position:fixed; z-index:1000002; height:96px; width:96px; pointer-events:none; cursor:pointer; opacity:0; display:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:32px; text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black !important;" onclick="Game.goldenCookie.click();"></div>'),$("#sectionLeft").append('<div id="cookie_monster_timer_bars_div" style="position:absolute; z-index:1000; bottom:-1px; left:0px; width:100%; pointer-events:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:16px; background:rgba(0,0,0,0.6); border-top:1px solid black;"></div>'),$("link").each(function(){"img/favicon.ico"==$(this).attr("href")&&$(this).attr("id","cm_favicon")}),Make_Table(),Save_Tooltips(),Update_Game_Scripts(),Load_Settings(),Set_Up_Tooltips(),Main_Loop(),Game.Popup('<span style="color:#FFFF00; text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black !important;">Cookie Monster '+version+" Loaded!</span>"),void 0)}function Main_Loop(){Update_Table(),Update_Tooltips("all"),Do_Emphasize(),Manage_Buffs(),loops++,1==loops&&Game.RebuildStore(),setTimeout(function(){Main_Loop()},settings[3])}function Fav_Icon_Spinner(a){a>6&&(a=1),"(G) "==gc_avail?($("#cm_favicon").attr("href","http://frozenelm.com/cookiemonster/images/cm_gc_"+a+".png"),a++,setTimeout(function(){Fav_Icon_Spinner(a)},250)):$("#cm_favicon").attr("href","http://orteil.dashnet.org/cookieclicker/img/favicon.ico")}function Load_Settings(){settings=[1,1,1,1e3,1,1,1,1,0,1,1,1,1],"undefined"!=typeof Storage&&(void 0!=localStorage.FlashScreen?settings[0]=localStorage.FlashScreen:(localStorage.FlashScreen=1,settings[0]=1),void 0!=localStorage.CookieTimer?settings[1]=localStorage.CookieTimer:(localStorage.CookieTimer=1,settings[1]=1),void 0!=localStorage.BuffBars?settings[2]=localStorage.BuffBars:(localStorage.BuffBars=1,settings[2]=1),void 0!=localStorage.Refresh?settings[3]=localStorage.Refresh:(localStorage.Refresh=1e3,settings[3]=1e3),void 0!=localStorage.CookieCD?settings[4]=localStorage.CookieCD:(localStorage.CookieCD=1,settings[4]=1),void 0!=localStorage.CMBar?settings[5]=localStorage.CMBar:(localStorage.CMBar=1,settings[5]=1),void 0!=localStorage.ColoredPrices?settings[6]=localStorage.ColoredPrices:(localStorage.ColoredPrices=1,settings[6]=1),void 0!=localStorage.ShortNumbers?settings[7]=localStorage.ShortNumbers:(localStorage.ShortNumbers=1,settings[7]=1),void 0!=localStorage.CookieSound?settings[8]=localStorage.CookieSound:(localStorage.CookieSound=0,settings[8]=0),void 0!=localStorage.UpdateTitle?settings[9]=localStorage.UpdateTitle:(localStorage.UpdateTitle=1,settings[9]=1),void 0!=localStorage.LuckyAlert?settings[10]=localStorage.LuckyAlert:(localStorage.LuckyAlert=1,settings[10]=1),void 0!=localStorage.UpgradeIcons?settings[11]=localStorage.UpgradeIcons:(localStorage.UpgradeIcons=1,settings[11]=1),void 0!=localStorage.UpgradeDisplay?settings[12]=localStorage.UpgradeDisplay:(localStorage.UpgradeDisplay=1,settings[12]=1)),Show_Hide_CM_Bar()}function Save_Settings(){"undefined"!=typeof Storage&&(localStorage.FlashScreen=settings[0],localStorage.CookieTimer=settings[1],localStorage.BuffBars=settings[2],localStorage.Refresh=settings[3],localStorage.CookieCD=settings[4],localStorage.CMBar=settings[5],localStorage.ColoredPrices=settings[6],localStorage.ShortNumbers=settings[7],localStorage.CookieSound=settings[8],localStorage.UpdateTitle=settings[9],localStorage.LuckyAlert=settings[10],localStorage.UpgradeIcons=settings[11],localStorage.UpgradeDisplay=settings[12]),Show_Hide_CM_Bar()}function Show_Hide_CM_Bar(){0==settings[5]?($("#cookie_monster_bar").css("display","none"),$("#game").css("bottom","0px")):($("#cookie_monster_bar").css("display",""),$("#game").css("bottom","57px"))}function Update_Game_Scripts(){Game.Logic=new Function("",Game.Logic.toString().replace(".title=",".title=gc_avail+").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var a="\n\n'<div class=\"subsection\">'+'<div class=\"title\"><span style=\"color:#4bb8f0;\">Cookie Monster Goodies</span></div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required:</b> ' + CM_Lucky('reg', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required (Frenzy):</b> ' + CM_Lucky('frenzy', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX):</b> ' + CM_Lucky_Reward('max') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX) (Frenzy):</b> ' + CM_Lucky_Reward('max_frenzy') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (CUR):</b> ' + CM_Lucky_Reward('cur') + '</div>'+'</br><div class=\"listing\"><b>Heavenly Chips (MAX):</b> ' + CM_Heavenly_Chip('max') + '</div>'+'<div class=\"listing\"><b>Heavenly Chips (CUR):</b> ' + CM_Heavenly_Chip('cur') + '</div>'+'<div class=\"listing\"><b>Cookies To Next Chip:</b> ' + CM_Heavenly_Chip('next') + '</div>'+'<div class=\"listing\"><b>Time To Next Chip:</b> ' + CM_Heavenly_Chip('time') + '</div>'+'</div>'+";Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("Statistics</div>'+","Statistics</div>'+"+a).replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var b='\n\'<div class="subsection">\'+\'<div class="title"><span style="color:#4bb8f0;">Cookie Monster Settings</span></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Flash Screen \' + CM_Option_State(0) + \'</a><label>Flashes the screen when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Timer \' + CM_Option_State(1) + \'</a><label>Displays a timer on Golden Cookies and Red Cookies</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Sound \' + CM_Option_State(8) + \'</a><label>Plays a sound when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Next Cookie Timer \' + CM_Option_State(4) + \'</a><label>Displays a countdown bar and updates the Title for when the next Cookie will appear</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Update Title \' + CM_Option_State(9) + \'</a><label>Updates the Title to display if a Cookie is waiting to be clicked</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Buff Bars \' + CM_Option_State(2) + \'</a><label>Displays a countdown bar for each effect currently active</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Bottom Bar \' + CM_Option_State(5) + \'</a><label>Displays a bar at the bottom of the screen that shows all Building information</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Colored Prices \' + CM_Option_State(6) + \'</a><label>Changes the colors of all Building prices to correspond with their Cost Per Income</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Icons \' + CM_Option_State(11) + \'</a><label>Displays a small square icon on the Upgrade to better display the Cost Per Income color value</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Short Numbers \' + CM_Short_Numbers() + \'</a><label>Formats all numbers to be shorter when displayed</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Display (\' + CM_Upgrade_Display() + \')</a><label>Changes how the store displays Upgrades</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Lucky Alert (\' + CM_Lucky_Alert() + \')</a><label>Changes the tooltip to display if you would be under the number of cookies required for "Lucky!"</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Refresh Rate (\' + CM_Refresh() + \' fps)</a><label>The rate at which Cookie Monster updates data (higher rates may slow the game)</label></div>\'+\'</div>\'+';Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("OFF')+'</div>'+","OFF')+'</div>'+"+b).replace("startDate=Game.sayTime(date.getTime()/1000*Game.fps,2);","startDate = formatTime(((new Date).getTime() - Game.startDate) / 1000, '');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var c='\nvar cm_id = from.id;\nif(cm_id == "") { cm_id = $(from).parents(".product").prop("id"); }\nif(cm_id == "product5" || cm_id == "product6" || cm_id == "product7" || cm_id == "product8" || cm_id == "product9") { y -= 100; }\nif(cm_id == "product8" || cm_id == "product9") { y -= 13; }\nif(cm_id == "product9" && settings[7] == 0) { y -= 13; }\n';Game.tooltip.draw=new Function("from,text,x,y,origin",Game.tooltip.draw.toString().replace("implemented');}","implemented');}"+c).replace("this.on=1;","this.on=1;\nUpdate_Tooltips('all');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Reset=new Function("bypass",Game.Reset.toString().replace("Game.researchT=0;","Game.researchT=0;\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.LoadSave=new Function("data",Game.LoadSave.toString().replace("Game.Popup('Game loaded');","Game.Popup('Game loaded');\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.RebuildStore=new Function("",Game.RebuildStore.toString().replace("l('products').innerHTML=str;","l('products').innerHTML=str;\nUpdate_Tooltips('ob');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Draw=new Function("",Game.Draw.toString().replace("Beautify(Math.round(Game.cookiesd))","formatNumB(Game.cookiesd)").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var d="return formatNum(what);";Beautify=new Function("what,floats",Beautify.toString().replace("var str='';",d+"\nvar str='';").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""))}function CM_Heavenly_Chip(a){var b=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned),c=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned+sell_out),d=cookies_to_h_chips(Game.cookiesReset),e=h_chips_to_cookies(b+1)-(Game.cookiesReset+Game.cookiesEarned),f=h_chips_to_cookies(c+1)-(Game.cookiesReset+Game.cookiesEarned+sell_out);return"max"==a?formatNum(b)+" <small>("+formatNum(2*b)+"%)</small>":"max_sell_out"==a?formatNum(c)+" <small>("+formatNum(2*c)+"%)</small>":"cur"==a?formatNum(d)+" <small>("+formatNum(2*d)+"%)</small>":"next"==a?formatNum(Math.round(e)):"next_sell_out"==a?formatNum(Math.round(f)):"time"==a?formatTime(Math.round(e/Game.cookiesPs),""):void 0}function cookies_to_h_chips(a){return Math.floor(Math.sqrt(2.5*Math.pow(10,11)+2*a)/Math.pow(10,6)-.5)}function h_chips_to_cookies(a){return 5*Math.pow(10,11)*a*(a+1)}function CM_Upgrade_Display(){switch(1*settings[12]){case 1:return"Normal";case 2:return"All";case 0:return"None";default:return"Normal"}}function CM_Short_Numbers(){switch(1*settings[7]){case 1:return"ON (A)";case 2:return"ON (B)";case 0:return"OFF";default:return"OFF"}}function CM_Lucky_Alert(){switch(1*settings[10]){case 1:return"Both";case 2:return"Icons";case 3:return"Notes";case 0:return"Off";default:return"Both"}}function CM_Refresh(){switch(1*settings[3]){case 1e3:return"1";case 500:return"2";case 250:return"4";case 100:return"10";case 33:return"30";default:return"1"}}function CM_Option_State(a){return 0==settings[a]?"OFF":"ON"}function CM_Option_Toggle(a){a=$(a);var b=a.text();switch(b){case"Flash Screen ON":settings[0]=0,a.text("Flash Screen OFF");break;case"Flash Screen OFF":settings[0]=1,a.text("Flash Screen ON");break;case"Cookie Sound ON":settings[8]=0,a.text("Cookie Sound OFF");break;case"Cookie Sound OFF":settings[8]=1,a.text("Cookie Sound ON");break;case"Cookie Timer ON":settings[1]=0,a.text("Cookie Timer OFF");break;case"Cookie Timer OFF":settings[1]=1,a.text("Cookie Timer ON");break;case"Next Cookie Timer ON":settings[4]=0,a.text("Next Cookie Timer OFF");break;case"Next Cookie Timer OFF":settings[4]=1,a.text("Next Cookie Timer ON");break;case"Update Title ON":settings[9]=0,a.text("Update Title OFF");break;case"Update Title OFF":settings[9]=1,a.text("Update Title ON");break;case"Buff Bars ON":settings[2]=0,a.text("Buff Bars OFF");break;case"Buff Bars OFF":settings[2]=1,a.text("Buff Bars ON");break;case"Bottom Bar ON":settings[5]=0,a.text("Bottom Bar OFF");break;case"Bottom Bar OFF":settings[5]=1,a.text("Bottom Bar ON");break;case"Colored Prices ON":settings[6]=0,a.text("Colored Prices OFF"),Update_Tooltips("ob");break;case"Colored Prices OFF":settings[6]=1,a.text("Colored Prices ON"),Update_Tooltips("ob");break;case"Upgrade Icons ON":settings[11]=0,a.text("Upgrade Icons OFF"),Game.RebuildUpgrades();break;case"Upgrade Icons OFF":settings[11]=1,a.text("Upgrade Icons ON"),Game.RebuildUpgrades();break;case"Upgrade Display (All)":settings[12]=0,a.text("Upgrade Display (None)"),Update_Upgrade_Display();break;case"Upgrade Display (None)":settings[12]=1,a.text("Upgrade Display (Normal)"),Update_Upgrade_Display();break;case"Upgrade Display (Normal)":settings[12]=2,a.text("Upgrade Display (All)"),Update_Upgrade_Display();break;case"Short Numbers ON (B)":settings[7]=0,a.text("Short Numbers OFF"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers OFF":settings[7]=1,a.text("Short Numbers ON (A)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers ON (A)":settings[7]=2,a.text("Short Numbers ON (B)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Lucky Alert (Both)":settings[10]=2,a.text("Lucky Alert (Icons)");break;case"Lucky Alert (Icons)":settings[10]=3,a.text("Lucky Alert (Notes)");break;case"Lucky Alert (Notes)":settings[10]=0,a.text("Lucky Alert (Off)");break;case"Lucky Alert (Off)":settings[10]=1,a.text("Lucky Alert (Both)");break;case"Refresh Rate (1 fps)":settings[3]=500,a.text("Refresh Rate (2 fps)");break;case"Refresh Rate (2 fps)":settings[3]=250,a.text("Refresh Rate (4 fps)");break;case"Refresh Rate (4 fps)":settings[3]=100,a.text("Refresh Rate (10 fps)");break;case"Refresh Rate (10 fps)":settings[3]=33,a.text("Refresh Rate (30 fps)");break;case"Refresh Rate (30 fps)":settings[3]=1e3,a.text("Refresh Rate (1 fps)")}Save_Settings()}function Update_Upgrade_Display(){var a=$("#upgrades");switch(1*settings[12]){case 1:a.css("cssText","");break;case 2:a.css("cssText","height: auto !important;");break;case 0:a.css("cssText","height: 0px !important;")}}function CM_Lucky(a,b){var c=Game.cookiesPs;Game.frenzy>0&&(c/=Game.frenzyPower),"frenzy"==a&&(c=7*c);var d=Math.round((1200*c+13)/.1);return b||(d=d<=Game.cookies?'<span style="color:#00FF00; font-weight:bold;">'+formatNum(d)+"</span>":formatNum(d)),d}function CM_Lucky_Reward(a){var b=Game.cookiesPs;Game.frenzy>0&&"cur"!=a&&(b/=Game.frenzyPower),"max_frenzy"==a&&(b=7*b);var c=new Array(Math.round(1200*b+13),Math.round(.1*Game.cookies+13));return("max"==a||"max_frenzy"==a)&&Math.round((1200*b+13)/.1)>Game.cookies?formatNum(c[0]):formatNum(Math.min.apply(Math,c))}function Save_Tooltips(){Game.UpgradesById.forEach(function(a,b){tooltips[b]=a.desc}),Game.ObjectsById.forEach(function(a,b){building_tooltips[b]=a.desc})}function Set_Up_Tooltips(){var a=!1;Game.UpgradesById.forEach(function(b,c){for(var d=0;upgrade_count>d;d++)if(_cup(d,c,!0)){b.desc=Manage_Tooltip(d,c,!0,!1),a=!0;break}b.bought&&b.desc!=tooltips[c]&&(b.desc=tooltips[c],a=!0)}),a&&Game.RebuildUpgrades()}function Update_Tooltips(a){("all"==a||"up"==a)&&(in_store=new Array(0,0,0,0,0,0),Game.UpgradesById.forEach(function(a,b){for(var c=0;upgrade_count>c;c++)if(_cup(c,b,!1)){Manage_Tooltip(c,b,!1,!1);break}})),("all"==a||"ob"==a)&&Game.ObjectsById.forEach(function(a){Manage_Building_Tooltip(a)})}function _cup(a,b,c){if(up=Game.UpgradesById[b],-1==up.desc.indexOf("cm_up_div_")&&!c)return!1;switch(a){case 0:if(!up.bought&&"Reinforced index finger"==up.name)return!0;break;case 1:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors are <b>twice</b> as efficient."))return!0;break;case 2:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors gain"))return!0;break;case 3:if(!up.bought&&"Forwards from grandma"==up.name)return!0;break;case 4:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>twice</b> as efficient."))return!0;break;case 5:if(!up.bought&&"Cheap hoes"==up.name)return!0;break;case 6:if(!up.bought&&-1!=up.desc.indexOf("Farms are <b>twice</b> as efficient."))return!0;break;case 7:if(!up.bought&&"Sturdier conveyor belts"==up.name)return!0;break;case 8:if(!up.bought&&-1!=up.desc.indexOf("Factories are <b>twice</b> as efficient."))return!0;break;case 9:if(!up.bought&&"Sugar gas"==up.name)return!0;break;case 10:if(!up.bought&&-1!=up.desc.indexOf("Mines are <b>twice</b> as efficient."))return!0;break;case 11:if(!up.bought&&"Vanilla nebulae"==up.name)return!0;break;case 12:if(!up.bought&&-1!=up.desc.indexOf("Shipments are <b>twice</b> as efficient."))return!0;break;case 13:if(!up.bought&&"Antimony"==up.name)return!0;break;case 14:if(!up.bought&&-1!=up.desc.indexOf("Alchemy labs are <b>twice</b> as efficient."))return!0;break;case 15:if(!up.bought&&"Ancient tablet"==up.name)return!0;break;case 16:if(!up.bought&&-1!=up.desc.indexOf("Portals are <b>twice</b> as efficient."))return!0;break;case 17:if(!up.bought&&"Flux capacitors"==up.name)return!0;break;case 18:if(!up.bought&&-1!=up.desc.indexOf("Time machines are <b>twice</b> as efficient."))return!0;break;case 19:if(!up.bought&&-1!=up.desc.indexOf("the more milk you have"))return!0;break;case 20:if(!up.bought&&-1!=up.desc.indexOf("Cookie production multiplier <b>+"))return!0;break;case 21:if(!up.bought&&-1!=up.desc.indexOf("for each 50 grandmas"))return!0;break;case 22:if(!up.bought&&-1!=up.desc.indexOf("for each 20 portals"))return!0;break;case 23:if(!up.bought&&"Elder Pledge"==up.name)return!0;break;case 24:if(!up.bought&&"Elder Covenant"==up.name)return!0;break;case 25:if(!up.bought&&"Sacrificial rolling pins"==up.name)return!0;break;case 26:if(!up.bought&&-1!=up.desc.indexOf("Golden cookie"))return!0;break;case 27:if(!up.bought&&-1!=up.desc.indexOf("Clicking gains <b>+1% of your CpS</b>."))return!0;break;case 28:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>4 times</b> as efficient."))return!0;break;case 29:if(!up.bought&&-1!=up.desc.indexOf("Antimatter condensers are <b>twice</b> as efficient."))return!0;break;case 30:if(!up.bought&&"Sugar bosons"==up.name)return!0;break;case 31:if(!up.bought&&"Revoke Elder Covenant"==up.name)return!0;break;case 32:if(!up.bought&&-1!=up.desc.indexOf("heavenly chips"))return!0}return!1}function Manage_Tooltip(a,b,c,d){var e=0,f=0;switch(a){case 0:e=_bam("The mouse and cursors",.1,0);break;case 1:e=_bte(0);break;case 2:e=_mcg(b);break;case 3:e=_bam("Grandmas",.3,1);break;case 4:e=_bte(1),_lgt(b)&&f++;break;case 5:e=_bam("Farms",.5,2);break;case 6:e=_bte(2);break;case 7:e=_bam("Factories",4,3);break;case 8:e=_bte(3);break;case 9:e=_bam("Mines",10,4);break;case 10:e=_bte(4);break;case 11:e=_bam("Shipments",30,5);break;case 12:e=_bte(5);break;case 13:e=_bam("Alchemy labs",100,6);break;case 14:e=_bte(6);break;case 15:e=_bam("Portals",1666,7);break;case 16:e=_bte(7);break;case 17:e=_bam("Time machines",9876,8);break;case 18:e=_bte(8);break;case 21:e=_gpg();break;case 22:e=_gpp();break;case 23:f+=_cha("Elder nap"),4==Game.pledges&&(f+=_cha("Elder slumber"));break;case 24:f+=_cha("Elder calm");break;case 28:e=_fte(1);break;case 29:e=_bte(9);break;case 30:e=_bam("Antimatter condensers",99999,9);break;case 32:e=_dhc(f,b,e),_lhc(b)&&(f+=_cha("Wholesome"))}return 19==Game.UpgradesOwned&&(f+=_cha("Enhancer")),49==Game.UpgradesOwned&&(f+=_cha("Augmenter")),99==Game.UpgradesOwned&&(f+=_cha("Upgrader")),e+=Get_Achi_Worth(f,b,e,0),d?e:tooltips[b]+Colorize(e,b,c)}function _dhc(a,b,c){var d=Game.UpgradesById[b],e=d.desc.indexOf("<b>")+3,f=d.desc.indexOf("%"),g=1*d.desc.substr(e,f-e),h=Get_Achi_Worth(a,b,c,2*Game.prestige["Heavenly chips"]*(g/100));return h-Game.cookiesPs}function _lhc(a){return"Heavenly key"==Game.UpgradesById[a].name?!0:!1}function _cpc(){return.01*Game.mouseCps()*usr_clk}function _lgt(a){if(1==_cha("Elder")&&-1!=Game.UpgradesById[a].name.indexOf(" grandmas")){var b=new Array,c=new Array;if(Game.UpgradesById.forEach(function(a,d){a.bought&&-1!=a.name.indexOf(" grandmas")?b.push(d):a.bought||-1==a.name.indexOf(" grandmas")||c.push(d)}),1==c.length&&c[0]==a)return!0}return!1}function _cha(a){var b=0;return Game.AchievementsById.forEach(function(c){c.won||c.name!=a||(b=1)}),b}function _gpp(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.05*Game.ObjectsById[7].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _gpg(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.02*Game.ObjectsById[1].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _mcg(a){var b=Game.UpgradesById[a].desc,c=31;-1!=b.indexOf(" another ")&&(c+=8);var d=1*b.substr(c,b.indexOf("<",c)-c);return d*(Game.BuildingsOwned-Game.ObjectsById[0].amount)*Game.ObjectsById[0].amount*Game.globalCpsMult}function _bte(a){return Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _fte(a){return 3*Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _bam(a,b,c){var d=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf(a+" are <b>twice</b> as efficient.")&&(d=2*d),b.bought&&-1!=b.desc.indexOf(a+" are <b>4 times</b> as efficient.")&&(d=4*d)}),b*d*Game.ObjectsById[c].amount*Game.globalCpsMult}function _inc(a){var b=0;return Game.AchievementsById.forEach(function(c){var d=c.desc.replace(/,/g,"");c.won||-1==d.indexOf(" per second.")||a>=1*d.substr(8,d.indexOf("</b>",8)-8)&&b++}),b}function Get_Achi_Worth(a,b,c,d){var e=0,f=Calc_Heavenly_Mult();0!=d&&(f=d);var g=0,h=new Array(0,0,0,0),i=Game.milkProgress,j=Get_Frenzy_Mult();Game.UpgradesById.forEach(function(a){var c=a.desc.replace("[Research]<br>","");a.bought&&-1!=c.indexOf("Cookie production multiplier <b>+")&&(f+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought||-1==c.indexOf("Cookie production multiplier <b>+")||a.id!=b||(g+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought&&"Kitten helpers"==a.name&&(h[0]=.05),a.bought&&"Kitten workers"==a.name&&(h[1]=.1),a.bought&&"Kitten engineers"==a.name&&(h[2]=.2),a.bought&&"Kitten overseers"==a.name&&(h[3]=.2)});var k=100+f;k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var l=c,m=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j;i+=.04*a,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var n=0;switch(Game.UpgradesById[b].name){case"Kitten helpers":n=.05;break;case"Kitten workers":n=.1;break;case"Kitten engineers":n=.2;break;case"Kitten overseers":n=.2}k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m;var o=_inc(e+m);return o>0&&(i+=.04*o,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i,k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m),0!=d&&(e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j),Game.Has("Elder Covenant")&&(e*=.95),e}function Calc_Heavenly_Mult(){var a=2*Game.prestige["Heavenly chips"],b=0;return Game.Has("Heavenly chip secret")&&(b+=.05),Game.Has("Heavenly cookie stand")&&(b+=.2),Game.Has("Heavenly bakery")&&(b+=.25),Game.Has("Heavenly confectionery")&&(b+=.25),Game.Has("Heavenly key")&&(b+=.25),a*b}function Get_Frenzy_Mult(){return Game.frenzy>0?Game.frenzyPower:1}function Manage_Building_Tooltip(a){var b=a.id,c=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),d=new Array("none","none"),e=(new Array("",""),new Array(0,0));Game.cookies-a.price<c[0]&&(d[0]="block",e[0]=c[0]-(Game.cookies-a.price)),Game.cookies-a.price<c[1]&&(d[1]="block",e[1]=c[1]-(Game.cookies-a.price)),a.desc==building_tooltips[a.id]&&(a.desc+='<div id="cm_ob_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #000000; margin:6px -6px -6px -6px; display:none;"></div>',a.desc+='<div id="cm_ob_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_ob_lucky_div_warning" style="background:url(http://frozenelm.com/cookiemonster/images/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_ob_lucky_div_caution" style="background:url(http://frozenelm.com/cookiemonster/images/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div>',a.desc+='<div id="cm_ob_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_ob_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_ob_warning_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/warning.png" height=16px width=16px></div></div><div id="cm_ob_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_ob_caution_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/caution.png" height=16px width=16px></div></div></div>',Game.RebuildStore());var f=new Array("FFFF00","FFFF00"),g=new Array(hold_cpi[b],hold_tc[b]),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));
for(i=0;i<f.length;i++)g[i]==j[i]?f[i]="00FF00":g[i]==h[i]?f[i]="FF0000":h[i]-g[i]<g[i]-j[i]&&(f[i]="FF7F00");1==$("#cm_ob_div_"+b).length&&($("#cm_ob_div_"+b).css("border","1px solid #"+f[0]),$("#cm_ob_div_"+b).css("display",""),$("#cm_ob_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(hold_is[b])+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"")+"</div>"),$("#cm_ob_warning_amount").text("Deficit: "+formatNum(e[0])),$("#cm_ob_caution_amount").text("Deficit: "+formatNum(e[1])),1==settings[10]||2==settings[10]?($("#cm_ob_lucky_div_warning").css("display",d[0]),$("#cm_ob_lucky_div_caution").css("display",d[1])):($("#cm_ob_lucky_div_warning").css("display","none"),$("#cm_ob_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_ob_note_div_warning").css("display",d[0]),$("#cm_ob_note_div_caution").css("display",d[1])):($("#cm_ob_note_div_warning").css("display","none"),$("#cm_ob_note_div_caution").css("display","none"))),1==settings[6]?$("#product"+b).find(".price").first().css("color","#"+f[0]):$("#product"+b).find(".price").first().css("color","")}function Make_Table(){var a='<th align=left width=130 style="color:#FFFF00;"> '+version+"</th>",b="",c="",d="";Game.ObjectsById.forEach(function(e,f){a+='<th align=middle id="cookie_monster_item_'+f+'" style="font-weight:bold;"></th>',b+='<td align=middle id="cookie_monster_is_'+f+'"></td>',c+='<td align=middle id="cookie_monster_cpi_'+f+'"></td>',d+='<td align=middle id="cookie_monster_tc_'+f+'"></td>'}),$("#cookie_monster_bar").html('<table style="width:100%; table-layout:fixed; margin-top:2px;"><tr>'+a+'</tr><tr><th align=right style="color:#4bb8f0;">Bonus Income</th>'+b+'</tr><tr><th align=right style="color:#4bb8f0;">Base Cost Per Income</th>'+c+'</tr><tr><th align=right style="color:#4bb8f0;">Time Left</th>'+d+"</tr></table>")}function Update_Table(){Game.ObjectsById.forEach(function(a,b){var c=a.price,d=a.amount,e=(a.storedTotalCps,a.storedCps*Game.globalCpsMult);"Grandma"==a.name&&(e=0);var f=Math.round(100*(e+Get_Upgrade_Bonuses(a.name,d,e)))/100,g=Math.round(c/f*100)/100,h=a.name.replace(/([^\s]+)/,"");hold_item[b]=a.name.replace(h,"")+' (<span style="color:#4bb8f0;">'+formatNum(d)+"</span>)",hold_is[b]=Math.round(100*f)/100,hold_cpi[b]=Math.round(100*g)/100,hold_tc[b]=Math.round(Seconds_Left(b,"ob"))}),Game.ObjectsById.forEach(function(a,b){var c=new Array("FFFF00","FFFF00"),d=new Array(hold_cpi[b],hold_tc[b]),e=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),f=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<c.length;i++)d[i]==f[i]?c[i]="00FF00":d[i]==e[i]?c[i]="FF0000":e[i]-d[i]<d[i]-f[i]&&(c[i]="FF7F00");$("#cookie_monster_item_"+b).html(hold_item[b]),$("#cookie_monster_is_"+b).html(formatNum(hold_is[b])),$("#cookie_monster_cpi_"+b).html('<span style="color:#'+c[0]+';">'+formatNum(d[0])+"</span>"),$("#cookie_monster_tc_"+b).html('<span style="color:#'+c[1]+';">'+formatTime(d[1],"min")+"</span>")})}function Do_Emphasize(){var a=$("#cookie_monster_golden_overlay"),b=$("#goldenCookie");if("none"!=b.css("display")||emphasize||(emphasize=!0,gc_avail=""),"none"!=b.css("display")&&emphasize){if(emphasize=!1,1==settings[9]&&(gc_avail="(G) ",Fav_Icon_Spinner(1)),1==settings[8]){var c=new Audio("http://frozenelm.com/cookiemonster/sounds/ba%20dink.mp3");c.volume=1,c.play()}1==settings[0]&&($("#cookie_monster_overlay").fadeIn(100),$("#cookie_monster_overlay").fadeOut(500))}"none"!=b.css("display")&&1==settings[1]?(a.css("display","block"),a.css("opacity",b.css("opacity")),a.css("left",b.css("left")),a.css("top",b.css("top")),a.html('<div style="position:absolute; top:30px; width:96px; height:36px;">'+Math.round(Game.goldenCookie.life/Game.fps)+"</div>")):a.css("display","none")}function Manage_Buffs(){var a="",b="",c=0,d=13+13*Game.Has("Get lucky"),e=new Array(Game.goldenCookie.time,Game.goldenCookie.minTime,Game.goldenCookie.maxTime),f=parseInt($("#cookie_monster_timer_bars_div").css("width"));switch(Game.frenzyPower){case 7:c=77+77*Game.Has("Get lucky"),a="Frenzy",b="FFFF00";break;case 666:c=6+6*Game.Has("Get lucky"),a="Blood Frenzy",b="00FF00",c=66+66*Game.Has("Get lucky"),a="Clot",b="FF0000"}Game.frenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_"+b).length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_'+b+'" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">'+a+'<td><td><div id="cmt_'+b+'" style="position:relative; background:#'+b+"; height:10px; width:"+Game.frenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_'+b+'" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+c+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_"+b).css("width",Game.frenzy/e[2]*100+"%"),$("#cmt_time_"+b).text(Math.round(Game.frenzy/Game.fps))),$("#cookie_monster_timer_"+b).fadeIn(250),"1"==$("#cookie_monster_timer_FFFF00").css("opacity")&&"FFFF00"!=b&&$("#cookie_monster_timer_FFFF00").fadeOut(250),"1"==$("#cookie_monster_timer_00FF00").css("opacity")&&"00FF00"!=b&&$("#cookie_monster_timer_00FF00").fadeOut(250),"1"==$("#cookie_monster_timer_FF0000").css("opacity")&&"FF0000"!=b&&$("#cookie_monster_timer_FF0000").fadeOut(250)):1==$("#cookie_monster_timer_"+b).length&&"1"==$("#cookie_monster_timer_"+b).css("opacity")&&$("#cookie_monster_timer_"+b).fadeOut(250),Game.clickFrenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_4BB8F0").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_4BB8F0" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Click Frenzy<td><td><div id="cmt_4BB8F0" style="position:relative; background:#4BB8F0; height:10px; width:'+Game.clickFrenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_4BB8F0" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+d+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_4BB8F0").css("width",Game.clickFrenzy/e[2]*100+"%"),$("#cmt_time_4BB8F0").text(Math.round(Game.clickFrenzy/Game.fps))),$("#cookie_monster_timer_4BB8F0").fadeIn(250)):1==$("#cookie_monster_timer_4BB8F0").length&&"1"==$("#cookie_monster_timer_4BB8F0").css("opacity")&&$("#cookie_monster_timer_4BB8F0").fadeOut(250),e[0]>0&&"none"==$("#goldenCookie").css("display")&&1==settings[4]?(1!=$("#cookie_monster_timer_FF00FF").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_FF00FF" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Next Cookie<td><td><div id="cmt_FF00FF" style="position:relative; background:#aaaaaa; height:10px; width:100%; margin-left:4px; border:1px solid black;"><div id="cmt2_FF00FF" style="position:relative; background:#FF00FF; height:10px; width:100%; margin-left:0px; max-width:'+.67*(f-189)+'px; float:right;"></div><div id="cmt_time_FF00FF" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+Math.round((e[2]-e[0])/Game.fps)+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt2_FF00FF").css("max-width",.67*(f-189)+"px"),$("#cmt_FF00FF").css("width",(e[2]-e[0])/e[2]*100+"%"),$("#cmt_time_FF00FF").text(Math.round((e[2]-e[0])/Game.fps))),$("#cookie_monster_timer_FF00FF").fadeIn(250)):1==$("#cookie_monster_timer_FF00FF").length&&"1"==$("#cookie_monster_timer_FF00FF").css("opacity")&&$("#cookie_monster_timer_FF00FF").fadeOut(250),(e[2]-e[0])/Game.fps>0&&"none"==$("#goldenCookie").css("display")&&(gc_avail=1==settings[4]?"("+Math.round((e[2]-e[0])/Game.fps)+") ":""),$("#versionNumber").css("bottom",$("#cookie_monster_timer_bars_div").css("height"))}function Get_Upgrade_Bonuses(a,b,c){var d=0,e=0;switch(a){case"Cursor":0==b&&(e+=_cha("Click")),1==b&&(e+=_cha("Double-click")),49==b&&(e+=_cha("Mouse wheel")),99==b&&(e+=_cha("Of Mice and Men")),199==b&&(e+=_cha("The Digital"));break;case"Grandma":d+=Get_Grandma_Mod_Total(b)*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Grandma's Cookies")),49==b&&(e+=_cha("Sloppy kisses")),99==b&&(e+=_cha("Retirement home")),149==b&&(e+=_cha("Friend of the ancients")),199==b&&(e+=_cha("Ruler of the ancients"));break;case"Farm":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("My first farm")),49==b&&(e+=_cha("Reap what you sow")),99==b&&(e+=_cha("Farm ill"));break;case"Factory":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Production chain")),49==b&&(e+=_cha("Industrial revolution")),99==b&&(e+=_cha("Global warming"));break;case"Mine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("You know the drill")),49==b&&(e+=_cha("Excavation site")),99==b&&(e+=_cha("Hollow the planet"));break;case"Shipment":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Expedition")),49==b&&(e+=_cha("Galactic highway")),99==b&&(e+=_cha("Far far away"));break;case"Alchemy lab":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Transmutation")),49==b&&(e+=_cha("Transmogrification")),99==b&&(e+=_cha("Gold member"));break;case"Portal":d+=Get_Portal_Mod_Total()*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("A whole new world")),49==b&&(e+=_cha("Now you're thinking")),99==b&&(e+=_cha("Dimensional shift"));break;case"Time machine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Time warp")),49==b&&(e+=_cha("Alternate timeline")),99==b&&(e+=_cha("Rewriting history"));break;case"Antimatter condenser":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Antibatter")),49==b&&(e+=_cha("Quirky quarks")),99==b&&(e+=_cha("It does matter!"))}return 99==Game.BuildingsOwned&&(e+=_cha("Builder")),399==Game.BuildingsOwned&&(e+=_cha("Architect")),799==Game.BuildingsOwned&&(e+=_cha("Engineer")),_owe(a)&&e++,_mat(a)&&e++,_bat(a)&&e++,_cen(a)&&e++,d+Get_Achi_Worth(e,0,d+c,0)}function _bat(a){if(1==_cha("Base 10")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=10*c.length,e=0;e<c.length;e++){if(c[e]<d)return!1;d-=10}return!0}return!1}function _mat(a){if(1==_cha("Mathematician")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=128,e=0;e<c.length;e++)if(e>2&&(d/=2),c[e]<d)return!1;return!0}return!1}function _owe(a){if(1==_cha("One with everything")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>0?b.push(a.name):c.push(a.name)}),1==c.length&&c[0]==a)return!0}return!1}function _cen(a){if(1==_cha("Centennial")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>=100?b.push(a.name):c.push(a)}),1==c.length&&c[0].name==a&&99==c[0].amount)return!0}return!1}function Get_Cursor_Mod_Total(){var a=0;return Game.UpgradesById.forEach(function(b){if(b.bought&&-1!=b.desc.indexOf("The mouse and cursors gain")){var c=31;-1!=b.desc.indexOf(" another ")&&(c+=8),a+=1*b.desc.substr(c,b.desc.indexOf("<",c)-c)}}),a*Game.ObjectsById[0].amount}function Get_Grandma_Mod_Total(a){var b=.5,c=0,d=1;return Game.UpgradesById.forEach(function(e){e.bought&&"Forwards from grandma"==e.name&&(b+=.3),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(d=2*d),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(d=4*d),e.bought&&-1!=e.desc.indexOf("for each 50 grandmas")&&(c+=.02*(a+1)*(a+1)-.02*a*a),e.bought&&-1!=e.desc.indexOf("for each 20 portals")&&(c+=.05*Game.ObjectsById[7].amount)}),b*d+c*d}function Get_Portal_Mod_Total(){var a=0,b=1;return Game.UpgradesById.forEach(function(c){c.bought&&-1!=c.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(b=2*b),c.bought&&-1!=c.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(b=4*b),c.bought&&-1!=c.desc.indexOf("for each 20 portals")&&(a+=.05*Game.ObjectsById[1].amount)}),a*b}function inStore(a){return-1!=Game.UpgradesInStore.indexOf(a)?!0:!1}function formatNum(a){return _sts(a,!1).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatNumB(a){return _sts(a,!0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatTime(a,b){if(a=Math.round(a),1/0==a)return"Never";if(0==a)return"Done!";if(a/86400>1e3)return"> 1,000 days";var c=parseInt(a/86400)%999,d=parseInt(a/3600)%24,e=parseInt(a/60)%60,f=a%60,g=new Array(" days, "," hours, "," minutes, "," seconds");"min"!=b?(1==c&&(g[0]=" day, "),1==d&&(g[1]=" hour, "),1==e&&(g[2]=" minute, "),1==f&&(g[3]=" second")):g=new Array("d, ","h, ","m, ","s");var h="";return c>0&&(h=h+c+g[0]),(c>0||d>0)&&(h=h+d+g[1]),(c>0||d>0||e>0)&&(h=h+e+g[2]),(c>0||d>0||e>0||f>0)&&(h=h+f+g[3]),h}function Colorize(a,b,c){var d=Game.UpgradesById[b],e=d.basePrice,f=new Array("FFFF00","FFFF00"),g=new Array(Math.round(e/a*100)/100,Math.round(Seconds_Left(b,"up"))),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<f.length;i++)g[i]<j[i]?(f[i]="4BB8F0",inStore(d)&&0==i&&in_store[0]++):g[i]==j[i]?(f[i]="00FF00",inStore(d)&&0==i&&in_store[1]++):g[i]==h[i]?(f[i]="FF0000",inStore(d)&&0==i&&in_store[4]++):g[i]>h[i]?(f[i]="FF00FF",inStore(d)&&0==i&&in_store[5]++):h[i]-g[i]<g[i]-j[i]?(f[i]="FF7F00",inStore(d)&&0==i&&in_store[3]++):inStore(d)&&0==i&&in_store[2]++;for(i=0;i<in_store.length;i++)$("#cm_up_q"+i).text(in_store[i]);if(settings[11]&&inStore(d)&&$("#upgrade"+Game.UpgradesInStore.indexOf(d)).html('<div style="background-color:#'+f[0]+'; border:1px solid black; position:absolute; z-index:21; top:2px; left:2px; height:14px; width:14px; pointer-events:none;"></div>'),1==$("#cm_up_div_"+b).length){var k=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),l=new Array("none","none"),m=new Array(0,0);Game.cookies-e<k[0]&&(l[0]="block",m[0]=k[0]-(Game.cookies-e)),Game.cookies-e<k[1]&&(l[1]="block",m[1]=k[1]-(Game.cookies-e)),$("#cm_up_div_"+b).css("border","1px solid #"+f[0]),$("#cm_up_div_"+b).css("display",""),$("#cm_up_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(Math.round(100*a)/100)+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"min")+"</div>"),$("#cm_up_warning_amount").text("Deficit: "+formatNum(m[0])),$("#cm_up_caution_amount").text("Deficit: "+formatNum(m[1])),1==settings[10]||2==settings[10]?($("#cm_up_lucky_div_warning").css("display",l[0]),$("#cm_up_lucky_div_caution").css("display",l[1])):($("#cm_up_lucky_div_warning").css("display","none"),$("#cm_up_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_up_note_div_warning").css("display",l[0]),$("#cm_up_note_div_caution").css("display",l[1])):($("#cm_up_note_div_warning").css("display","none"),$("#cm_up_note_div_caution").css("display","none"))}return c?(f="000000",'<div id="cm_up_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_up_lucky_div_warning" style="background:url(http://frozenelm.com/images/cookiemonster/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_up_lucky_div_caution" style="background:url(http://frozenelm.com/images/cookiemonster/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div><div id="cm_up_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #'+f+'; margin:6px -6px -6px -6px; display:none;"></div><div id="cm_up_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_up_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_up_warning_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/warning.png" height=16px width=16px></div></div><div id="cm_up_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_up_caution_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/caution.png" height=16px width=16px></div></div></div>'):void 0}function Factor_Time(a){var b=Game.cookies-a,c=Game.cookiesPs;if(0==c)return 1;if(0>b){var d=a/c;return 1- -1*b/c/d}return 1}function Seconds_Left(a,b){var c=0;"ob"==b&&(c=Game.ObjectsById[a].price),"up"==b&&(c=Game.UpgradesById[a].basePrice);var d=Game.cookies-c,e=Game.cookiesPs;if(0==e)return 0;if(0>d){var f=-1*d/e;return f}return 0}function _sts(a,b){var c=settings[7];if(c>0)for(var d=1e33,e=sts_type[c-1].length-1;e>=0;e--){var f=(a/d%999).toFixed(3);if(f>=1)return f+sts_type[c-1][e];d/=1e3}return b?Math.round(a):Math.round(100*a)/100}function Sell_Out_Value(){var a=0,b=Game.cookies,c=new Array,d=0;for(Game.ObjectsById.forEach(function(a,b){c[b]=a.amount,d+=a.amount});b>=15||d>0;)for(var e=c.length-1;e>=0;e--){for(var f=!1,g=c[e],h=Game.ObjectsById[e],i=g;i>0;i--)b+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),a+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),c[e]--,d--;for(;b>=h.basePrice*Math.pow(1.15,c[e]);)f=!0,b-=h.basePrice*Math.pow(1.15,c[e]),c[e]++,d++;if(f)break}sell_out=a}function Sell_Out(){confirm("*** WARNING ***\nYou will have no buildings or cookies left after this.")&&(Game.ObjectsById.forEach(function(a){setTimeout(function(){for(;a.amount>0;)a.sell()})}),setTimeout(function(){Buy_Sell()}))}function Buy_Sell(){if(Game.cookies<1e9&&Game.BuildingsOwned<100)return Buy_Sell_No_Wait(),!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.price<=Game.cookies)return b.buy(),setTimeout(function(){Buy_Sell()}),!1;if(b.price>Game.cookies&&b.amount>0)return b.sell(),setTimeout(function(){Buy_Sell()}),!1}setTimeout(function(){Buy_Sell()})}function Buy_Sell_No_Wait(){if(Game.cookies<15)return!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.sell(),b.price<=Game.cookies)return b.buy(),b.sell(),Buy_Sell_No_Wait(),!1}Buy_Sell_No_Wait()}function Get_True_CPI(a,b){var c=0,d=0,e=0;if("ob"==b&&(c=Seconds_Left(Game.ObjectsById[a],"ob"),d=Game.ObjectsById[a].price,e=hold_is[a]),"up"==b){c=Seconds_Left(Game.UpgradesById[a],"up"),d=Game.UpgradesById[a].basePrice;for(var f=0;upgrade_count>f;f++)if(_cup(f,a,!1)){e=Manage_Tooltip(f,a,!1,!0);break}}var g=d/e;return Game.ObjectsById.forEach(function(f,h){var i=f.price,j=hold_is[h],k=Seconds_Left(f,"ob");if(c>k&&("up"==b||h!=a)){var l=c-k,m=j*l,n=d-i+m,o=n/e;o>g&&(g=o)}}),g}function Test_True_CPI(a,b){var c=0,d=0,e=0,f=0;if("ob"==b&&(c=Seconds_Left(a,"ob"),e=Game.ObjectsById[a].price,f=hold_is[a]),"up"==b){c=Seconds_Left(a,"up"),e=Game.UpgradesById[a].basePrice;for(var g=0;upgrade_count>g;g++)if(_cup(g,a,!1)){f=Manage_Tooltip(g,a,!1,!0);break}}var h=Organize_Object_List(),i=e,j=i/f,k=j,l=f;return h.forEach(function(g,j){if(e>g.price&&("up"==b||g.id!=a)){var m=g.price,n=hold_is[g.id],o=hold_cpi[g.id];0==l&&(l=n),0==k&&(k=o);var p=Seconds_Left(g.id,"ob"),q=0,r=h[j+1];if(r.id!=h.length&&(hold_cpi[r.id]<k||r.id==a)&&(q=Seconds_Left(r.id,"ob"),k=hold_cpi[r.id],l=n),c-d>p){var s=q-p;d+=s;var t=l*s;s>0&&(f-=l,i=i-m+t)}}}),j=i/f}function Organize_Object_List(){var a=new Array;return Game.ObjectsById.forEach(function(b){var c=!0;a.length>0?(a.forEach(function(d,e){b.price<d.price&&c&&(c=!1,a.splice(e,0,b),a.join())}),c&&a.push(b)):a.push(b)}),a}function Start_Cookie_Monster(){return 0!=$("#cookie_monster_bar").length?(alert("Cookie Monster "+version+"\n\nCookie Monster is already loaded, silly!"),!1):($("#topBar").css("display","none"),$("#tooltip").css("margin-top","32px"),$("#tooltip").css("pointer-events","none"),$("#cookies").css("background","rgba(0,0,0,0.75)"),$("#cookies").css("border-top","1px solid black"),$("#cookies").css("border-bottom","1px solid black"),$("#goldenCookie").css("cssText","z-index: 1000001 !important;"),$("#game").css("cssText","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;user-select: none;top: 0px;bottom: 57px;"),$("#storeTitle").css("cssText","font-size: 18px;padding: 4px 8px 2px 8px;border-bottom: 1px solid black;"),$("#storeTitle").after('<table cellpadding=0 cellspacing=0 style="width:300px; table-layout:fixed; padding:4px; font-weight:bold; background:rgba(0,0,0,0.6); border-bottom: 1px solid black; cursor:default;"><tr><td align=center style="color:#4bb8f0; padding:2px;" id="cm_up_q0">0</td><td align=center style="color:#00ff00; padding:2px;" id="cm_up_q1">0</td><td align=center style="color:#ffff00; padding:2px;" id="cm_up_q2">0</td><td align=center style="color:#ff7f00; padding:2px;" id="cm_up_q3">0</td><td align=center style="color:#ff0000; padding:2px;" id="cm_up_q4">0</td><td align=center style="color:#ff00ff; padding:2px;" id="cm_up_q5">0</td></tr></table>'),$("body").append("<div id=\"cookie_monster_bar\" style=\"z-index:1000; position:absolute; bottom:0px; left:0px; width:100%; height:56px; border-top:1px solid black; cursor:default;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;background: rgb(69,72,77); /* Old browsers */background: -moz-linear-gradient(top,  rgba(69,72,77,1) 0%, rgba(0,0,0,1) 100%); /* FF3.6+ */background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(69,72,77,1)), color-stop(100%,rgba(0,0,0,1))); /* Chrome,Safari4+ */background: -webkit-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Chrome10+,Safari5.1+ */background: -o-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Opera 11.10+ */background: -ms-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* IE10+ */background: linear-gradient(to bottom,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* W3C */filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#45484d', endColorstr='#000000',GradientType=0 ); /* IE6-9 */\"></div>"),$("body").append('<div id="cookie_monster_overlay" style="position:fixed; z-index:1000000; height:100%; width:100%; background:rgba(255,255,255,1); pointer-events:none; display:none;"></div>'),$("body").append('<div id="cookie_monster_golden_overlay" style="position:fixed; z-index:1000002; height:96px; width:96px; pointer-events:none; cursor:pointer; opacity:0; display:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:32px; text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black !important;" onclick="Game.goldenCookie.click();"></div>'),$("#sectionLeft").append('<div id="cookie_monster_timer_bars_div" style="position:absolute; z-index:1000; bottom:-1px; left:0px; width:100%; pointer-events:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:16px; background:rgba(0,0,0,0.6); border-top:1px solid black;"></div>'),$("link").each(function(){"img/favicon.ico"==$(this).attr("href")&&$(this).attr("id","cm_favicon")}),Make_Table(),Save_Tooltips(),Update_Game_Scripts(),Load_Settings(),Set_Up_Tooltips(),Main_Loop(),Game.Popup('<span style="color:#FFFF00; text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black !important;">Cookie Monster '+version+" Loaded!</span>"),void 0)}function Main_Loop(){Update_Table(),Update_Tooltips("all"),Do_Emphasize(),Manage_Buffs(),loops++,1==loops&&Game.RebuildStore(),setTimeout(function(){Main_Loop()},settings[3])}function Fav_Icon_Spinner(a){a>6&&(a=1),"(G) "==gc_avail?($("#cm_favicon").attr("href","http://frozenelm.com/cookiemonster/images/cm_gc_"+a+".png"),a++,setTimeout(function(){Fav_Icon_Spinner(a)},250)):$("#cm_favicon").attr("href","http://orteil.dashnet.org/cookieclicker/img/favicon.ico")}function Load_Settings(){settings=[1,1,1,1e3,1,1,1,1,0,1,1,1,1],"undefined"!=typeof Storage&&(void 0!=localStorage.FlashScreen?settings[0]=localStorage.FlashScreen:(localStorage.FlashScreen=1,settings[0]=1),void 0!=localStorage.CookieTimer?settings[1]=localStorage.CookieTimer:(localStorage.CookieTimer=1,settings[1]=1),void 0!=localStorage.BuffBars?settings[2]=localStorage.BuffBars:(localStorage.BuffBars=1,settings[2]=1),void 0!=localStorage.Refresh?settings[3]=localStorage.Refresh:(localStorage.Refresh=1e3,settings[3]=1e3),void 0!=localStorage.CookieCD?settings[4]=localStorage.CookieCD:(localStorage.CookieCD=1,settings[4]=1),void 0!=localStorage.CMBar?settings[5]=localStorage.CMBar:(localStorage.CMBar=1,settings[5]=1),void 0!=localStorage.ColoredPrices?settings[6]=localStorage.ColoredPrices:(localStorage.ColoredPrices=1,settings[6]=1),void 0!=localStorage.ShortNumbers?settings[7]=localStorage.ShortNumbers:(localStorage.ShortNumbers=1,settings[7]=1),void 0!=localStorage.CookieSound?settings[8]=localStorage.CookieSound:(localStorage.CookieSound=0,settings[8]=0),void 0!=localStorage.UpdateTitle?settings[9]=localStorage.UpdateTitle:(localStorage.UpdateTitle=1,settings[9]=1),void 0!=localStorage.LuckyAlert?settings[10]=localStorage.LuckyAlert:(localStorage.LuckyAlert=1,settings[10]=1),void 0!=localStorage.UpgradeIcons?settings[11]=localStorage.UpgradeIcons:(localStorage.UpgradeIcons=1,settings[11]=1),void 0!=localStorage.UpgradeDisplay?settings[12]=localStorage.UpgradeDisplay:(localStorage.UpgradeDisplay=1,settings[12]=1)),Show_Hide_CM_Bar()}function Save_Settings(){"undefined"!=typeof Storage&&(localStorage.FlashScreen=settings[0],localStorage.CookieTimer=settings[1],localStorage.BuffBars=settings[2],localStorage.Refresh=settings[3],localStorage.CookieCD=settings[4],localStorage.CMBar=settings[5],localStorage.ColoredPrices=settings[6],localStorage.ShortNumbers=settings[7],localStorage.CookieSound=settings[8],localStorage.UpdateTitle=settings[9],localStorage.LuckyAlert=settings[10],localStorage.UpgradeIcons=settings[11],localStorage.UpgradeDisplay=settings[12]),Show_Hide_CM_Bar()}function Show_Hide_CM_Bar(){0==settings[5]?($("#cookie_monster_bar").css("display","none"),$("#game").css("bottom","0px")):($("#cookie_monster_bar").css("display",""),$("#game").css("bottom","57px"))}function Update_Game_Scripts(){Game.Logic=new Function("",Game.Logic.toString().replace(".title=",".title=gc_avail+").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var a="\n\n'<div class=\"subsection\">'+'<div class=\"title\"><span style=\"color:#4bb8f0;\">Cookie Monster Goodies</span></div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required:</b> ' + CM_Lucky('reg', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required (Frenzy):</b> ' + CM_Lucky('frenzy', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX):</b> ' + CM_Lucky_Reward('max') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX) (Frenzy):</b> ' + CM_Lucky_Reward('max_frenzy') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (CUR):</b> ' + CM_Lucky_Reward('cur') + '</div>'+'</br><div class=\"listing\"><b>Heavenly Chips (MAX):</b> ' + CM_Heavenly_Chip('max') + '</div>'+'<div class=\"listing\"><b>Heavenly Chips (CUR):</b> ' + CM_Heavenly_Chip('cur') + '</div>'+'<div class=\"listing\"><b>Cookies To Next Chip:</b> ' + CM_Heavenly_Chip('next') + '</div>'+'<div class=\"listing\"><b>Time To Next Chip:</b> ' + CM_Heavenly_Chip('time') + '</div>'+'</div>'+";Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("Statistics</div>'+","Statistics</div>'+"+a).replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var b='\n\'<div class="subsection">\'+\'<div class="title"><span style="color:#4bb8f0;">Cookie Monster Settings</span></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Flash Screen \' + CM_Option_State(0) + \'</a><label>Flashes the screen when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Timer \' + CM_Option_State(1) + \'</a><label>Displays a timer on Golden Cookies and Red Cookies</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Sound \' + CM_Option_State(8) + \'</a><label>Plays a sound when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Next Cookie Timer \' + CM_Option_State(4) + \'</a><label>Displays a countdown bar and updates the Title for when the next Cookie will appear</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Update Title \' + CM_Option_State(9) + \'</a><label>Updates the Title to display if a Cookie is waiting to be clicked</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Buff Bars \' + CM_Option_State(2) + \'</a><label>Displays a countdown bar for each effect currently active</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Bottom Bar \' + CM_Option_State(5) + \'</a><label>Displays a bar at the bottom of the screen that shows all Building information</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Colored Prices \' + CM_Option_State(6) + \'</a><label>Changes the colors of all Building prices to correspond with their Cost Per Income</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Icons \' + CM_Option_State(11) + \'</a><label>Displays a small square icon on the Upgrade to better display the Cost Per Income color value</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Short Numbers \' + CM_Short_Numbers() + \'</a><label>Formats all numbers to be shorter when displayed</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Display (\' + CM_Upgrade_Display() + \')</a><label>Changes how the store displays Upgrades</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Lucky Alert (\' + CM_Lucky_Alert() + \')</a><label>Changes the tooltip to display if you would be under the number of cookies required for "Lucky!"</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Refresh Rate (\' + CM_Refresh() + \' fps)</a><label>The rate at which Cookie Monster updates data (higher rates may slow the game)</label></div>\'+\'</div>\'+';Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("OFF')+'</div>'+","OFF')+'</div>'+"+b).replace("startDate=Game.sayTime(date.getTime()/1000*Game.fps,2);","startDate = formatTime(((new Date).getTime() - Game.startDate) / 1000, '');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));
var c='\nvar cm_id = from.id;\nif(cm_id == "") { cm_id = $(from).parents(".product").prop("id"); }\nif(cm_id == "product5" || cm_id == "product6" || cm_id == "product7" || cm_id == "product8" || cm_id == "product9") { y -= 100; }\nif(cm_id == "product8" || cm_id == "product9") { y -= 13; }\nif(cm_id == "product9" && settings[7] == 0) { y -= 13; }\n';Game.tooltip.draw=new Function("from,text,x,y,origin",Game.tooltip.draw.toString().replace("implemented');}","implemented');}"+c).replace("this.on=1;","this.on=1;\nUpdate_Tooltips('all');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Reset=new Function("bypass",Game.Reset.toString().replace("Game.researchT=0;","Game.researchT=0;\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.LoadSave=new Function("data",Game.LoadSave.toString().replace("Game.Popup('Game loaded');","Game.Popup('Game loaded');\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.RebuildStore=new Function("",Game.RebuildStore.toString().replace("l('products').innerHTML=str;","l('products').innerHTML=str;\nUpdate_Tooltips('ob');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Draw=new Function("",Game.Draw.toString().replace("Beautify(Math.round(Game.cookiesd))","formatNumB(Game.cookiesd)").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var d="return formatNum(what);";Beautify=new Function("what,floats",Beautify.toString().replace("var str='';",d+"\nvar str='';").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""))}function CM_Heavenly_Chip(a){var b=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned),c=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned+sell_out),d=cookies_to_h_chips(Game.cookiesReset),e=h_chips_to_cookies(b+1)-(Game.cookiesReset+Game.cookiesEarned),f=h_chips_to_cookies(c+1)-(Game.cookiesReset+Game.cookiesEarned+sell_out);return"max"==a?formatNum(b)+" <small>("+formatNum(2*b)+"%)</small>":"max_sell_out"==a?formatNum(c)+" <small>("+formatNum(2*c)+"%)</small>":"cur"==a?formatNum(d)+" <small>("+formatNum(2*d)+"%)</small>":"next"==a?formatNum(Math.round(e)):"next_sell_out"==a?formatNum(Math.round(f)):"time"==a?formatTime(Math.round(e/Game.cookiesPs),""):void 0}function cookies_to_h_chips(a){return Math.floor(Math.sqrt(2.5*Math.pow(10,11)+2*a)/Math.pow(10,6)-.5)}function h_chips_to_cookies(a){return 5*Math.pow(10,11)*a*(a+1)}function CM_Upgrade_Display(){switch(1*settings[12]){case 1:return"Normal";case 2:return"All";case 0:return"None";default:return"Normal"}}function CM_Short_Numbers(){switch(1*settings[7]){case 1:return"ON (A)";case 2:return"ON (B)";case 0:return"OFF";default:return"OFF"}}function CM_Lucky_Alert(){switch(1*settings[10]){case 1:return"Both";case 2:return"Icons";case 3:return"Notes";case 0:return"Off";default:return"Both"}}function CM_Refresh(){switch(1*settings[3]){case 1e3:return"1";case 500:return"2";case 250:return"4";case 100:return"10";case 33:return"30";default:return"1"}}function CM_Option_State(a){return 0==settings[a]?"OFF":"ON"}function CM_Option_Toggle(a){a=$(a);var b=a.text();switch(b){case"Flash Screen ON":settings[0]=0,a.text("Flash Screen OFF");break;case"Flash Screen OFF":settings[0]=1,a.text("Flash Screen ON");break;case"Cookie Sound ON":settings[8]=0,a.text("Cookie Sound OFF");break;case"Cookie Sound OFF":settings[8]=1,a.text("Cookie Sound ON");break;case"Cookie Timer ON":settings[1]=0,a.text("Cookie Timer OFF");break;case"Cookie Timer OFF":settings[1]=1,a.text("Cookie Timer ON");break;case"Next Cookie Timer ON":settings[4]=0,a.text("Next Cookie Timer OFF");break;case"Next Cookie Timer OFF":settings[4]=1,a.text("Next Cookie Timer ON");break;case"Update Title ON":settings[9]=0,a.text("Update Title OFF");break;case"Update Title OFF":settings[9]=1,a.text("Update Title ON");break;case"Buff Bars ON":settings[2]=0,a.text("Buff Bars OFF");break;case"Buff Bars OFF":settings[2]=1,a.text("Buff Bars ON");break;case"Bottom Bar ON":settings[5]=0,a.text("Bottom Bar OFF");break;case"Bottom Bar OFF":settings[5]=1,a.text("Bottom Bar ON");break;case"Colored Prices ON":settings[6]=0,a.text("Colored Prices OFF"),Update_Tooltips("ob");break;case"Colored Prices OFF":settings[6]=1,a.text("Colored Prices ON"),Update_Tooltips("ob");break;case"Upgrade Icons ON":settings[11]=0,a.text("Upgrade Icons OFF"),Game.RebuildUpgrades();break;case"Upgrade Icons OFF":settings[11]=1,a.text("Upgrade Icons ON"),Game.RebuildUpgrades();break;case"Upgrade Display (All)":settings[12]=0,a.text("Upgrade Display (None)"),Update_Upgrade_Display();break;case"Upgrade Display (None)":settings[12]=1,a.text("Upgrade Display (Normal)"),Update_Upgrade_Display();break;case"Upgrade Display (Normal)":settings[12]=2,a.text("Upgrade Display (All)"),Update_Upgrade_Display();break;case"Short Numbers ON (B)":settings[7]=0,a.text("Short Numbers OFF"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers OFF":settings[7]=1,a.text("Short Numbers ON (A)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers ON (A)":settings[7]=2,a.text("Short Numbers ON (B)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Lucky Alert (Both)":settings[10]=2,a.text("Lucky Alert (Icons)");break;case"Lucky Alert (Icons)":settings[10]=3,a.text("Lucky Alert (Notes)");break;case"Lucky Alert (Notes)":settings[10]=0,a.text("Lucky Alert (Off)");break;case"Lucky Alert (Off)":settings[10]=1,a.text("Lucky Alert (Both)");break;case"Refresh Rate (1 fps)":settings[3]=500,a.text("Refresh Rate (2 fps)");break;case"Refresh Rate (2 fps)":settings[3]=250,a.text("Refresh Rate (4 fps)");break;case"Refresh Rate (4 fps)":settings[3]=100,a.text("Refresh Rate (10 fps)");break;case"Refresh Rate (10 fps)":settings[3]=33,a.text("Refresh Rate (30 fps)");break;case"Refresh Rate (30 fps)":settings[3]=1e3,a.text("Refresh Rate (1 fps)")}Save_Settings()}function Update_Upgrade_Display(){var a=$("#upgrades");switch(1*settings[12]){case 1:a.css("cssText","");break;case 2:a.css("cssText","height: auto !important;");break;case 0:a.css("cssText","height: 0px !important;")}}function CM_Lucky(a,b){var c=Game.cookiesPs;Game.frenzy>0&&(c/=Game.frenzyPower),"frenzy"==a&&(c=7*c);var d=Math.round((1200*c+13)/.1);return b||(d=d<=Game.cookies?'<span style="color:#00FF00; font-weight:bold;">'+formatNum(d)+"</span>":formatNum(d)),d}function CM_Lucky_Reward(a){var b=Game.cookiesPs;Game.frenzy>0&&"cur"!=a&&(b/=Game.frenzyPower),"max_frenzy"==a&&(b=7*b);var c=new Array(Math.round(1200*b+13),Math.round(.1*Game.cookies+13));return("max"==a||"max_frenzy"==a)&&Math.round((1200*b+13)/.1)>Game.cookies?formatNum(c[0]):formatNum(Math.min.apply(Math,c))}function Save_Tooltips(){Game.UpgradesById.forEach(function(a,b){tooltips[b]=a.desc}),Game.ObjectsById.forEach(function(a,b){building_tooltips[b]=a.desc})}function Set_Up_Tooltips(){var a=!1;Game.UpgradesById.forEach(function(b,c){for(var d=0;upgrade_count>d;d++)if(_cup(d,c,!0)){b.desc=Manage_Tooltip(d,c,!0,!1),a=!0;break}b.bought&&b.desc!=tooltips[c]&&(b.desc=tooltips[c],a=!0)}),a&&Game.RebuildUpgrades()}function Update_Tooltips(a){("all"==a||"up"==a)&&(in_store=new Array(0,0,0,0,0,0),Game.UpgradesById.forEach(function(a,b){for(var c=0;upgrade_count>c;c++)if(_cup(c,b,!1)){Manage_Tooltip(c,b,!1,!1);break}})),("all"==a||"ob"==a)&&Game.ObjectsById.forEach(function(a){Manage_Building_Tooltip(a)})}function _cup(a,b,c){if(up=Game.UpgradesById[b],-1==up.desc.indexOf("cm_up_div_")&&!c)return!1;switch(a){case 0:if(!up.bought&&"Reinforced index finger"==up.name)return!0;break;case 1:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors are <b>twice</b> as efficient."))return!0;break;case 2:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors gain"))return!0;break;case 3:if(!up.bought&&"Forwards from grandma"==up.name)return!0;break;case 4:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>twice</b> as efficient."))return!0;break;case 5:if(!up.bought&&"Cheap hoes"==up.name)return!0;break;case 6:if(!up.bought&&-1!=up.desc.indexOf("Farms are <b>twice</b> as efficient."))return!0;break;case 7:if(!up.bought&&"Sturdier conveyor belts"==up.name)return!0;break;case 8:if(!up.bought&&-1!=up.desc.indexOf("Factories are <b>twice</b> as efficient."))return!0;break;case 9:if(!up.bought&&"Sugar gas"==up.name)return!0;break;case 10:if(!up.bought&&-1!=up.desc.indexOf("Mines are <b>twice</b> as efficient."))return!0;break;case 11:if(!up.bought&&"Vanilla nebulae"==up.name)return!0;break;case 12:if(!up.bought&&-1!=up.desc.indexOf("Shipments are <b>twice</b> as efficient."))return!0;break;case 13:if(!up.bought&&"Antimony"==up.name)return!0;break;case 14:if(!up.bought&&-1!=up.desc.indexOf("Alchemy labs are <b>twice</b> as efficient."))return!0;break;case 15:if(!up.bought&&"Ancient tablet"==up.name)return!0;break;case 16:if(!up.bought&&-1!=up.desc.indexOf("Portals are <b>twice</b> as efficient."))return!0;break;case 17:if(!up.bought&&"Flux capacitors"==up.name)return!0;break;case 18:if(!up.bought&&-1!=up.desc.indexOf("Time machines are <b>twice</b> as efficient."))return!0;break;case 19:if(!up.bought&&-1!=up.desc.indexOf("the more milk you have"))return!0;break;case 20:if(!up.bought&&-1!=up.desc.indexOf("Cookie production multiplier <b>+"))return!0;break;case 21:if(!up.bought&&-1!=up.desc.indexOf("for each 50 grandmas"))return!0;break;case 22:if(!up.bought&&-1!=up.desc.indexOf("for each 20 portals"))return!0;break;case 23:if(!up.bought&&"Elder Pledge"==up.name)return!0;break;case 24:if(!up.bought&&"Elder Covenant"==up.name)return!0;break;case 25:if(!up.bought&&"Sacrificial rolling pins"==up.name)return!0;break;case 26:if(!up.bought&&-1!=up.desc.indexOf("Golden cookie"))return!0;break;case 27:if(!up.bought&&-1!=up.desc.indexOf("Clicking gains <b>+1% of your CpS</b>."))return!0;break;case 28:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>4 times</b> as efficient."))return!0;break;case 29:if(!up.bought&&-1!=up.desc.indexOf("Antimatter condensers are <b>twice</b> as efficient."))return!0;break;case 30:if(!up.bought&&"Sugar bosons"==up.name)return!0;break;case 31:if(!up.bought&&"Revoke Elder Covenant"==up.name)return!0;break;case 32:if(!up.bought&&-1!=up.desc.indexOf("heavenly chips"))return!0}return!1}function Manage_Tooltip(a,b,c,d){var e=0,f=0;switch(a){case 0:e=_bam("The mouse and cursors",.1,0);break;case 1:e=_bte(0);break;case 2:e=_mcg(b);break;case 3:e=_bam("Grandmas",.3,1);break;case 4:e=_bte(1),_lgt(b)&&f++;break;case 5:e=_bam("Farms",.5,2);break;case 6:e=_bte(2);break;case 7:e=_bam("Factories",4,3);break;case 8:e=_bte(3);break;case 9:e=_bam("Mines",10,4);break;case 10:e=_bte(4);break;case 11:e=_bam("Shipments",30,5);break;case 12:e=_bte(5);break;case 13:e=_bam("Alchemy labs",100,6);break;case 14:e=_bte(6);break;case 15:e=_bam("Portals",1666,7);break;case 16:e=_bte(7);break;case 17:e=_bam("Time machines",9876,8);break;case 18:e=_bte(8);break;case 21:e=_gpg();break;case 22:e=_gpp();break;case 23:f+=_cha("Elder nap"),4==Game.pledges&&(f+=_cha("Elder slumber"));break;case 24:f+=_cha("Elder calm");break;case 28:e=_fte(1);break;case 29:e=_bte(9);break;case 30:e=_bam("Antimatter condensers",99999,9);break;case 32:e=_dhc(f,b,e),_lhc(b)&&(f+=_cha("Wholesome"))}return 19==Game.UpgradesOwned&&(f+=_cha("Enhancer")),49==Game.UpgradesOwned&&(f+=_cha("Augmenter")),99==Game.UpgradesOwned&&(f+=_cha("Upgrader")),e+=Get_Achi_Worth(f,b,e,0),d?e:tooltips[b]+Colorize(e,b,c)}function _dhc(a,b,c){var d=Game.UpgradesById[b],e=d.desc.indexOf("<b>")+3,f=d.desc.indexOf("%"),g=1*d.desc.substr(e,f-e),h=Get_Achi_Worth(a,b,c,2*Game.prestige["Heavenly chips"]*(g/100));return h-Game.cookiesPs}function _lhc(a){return"Heavenly key"==Game.UpgradesById[a].name?!0:!1}function _cpc(){return.01*Game.mouseCps()*usr_clk}function _lgt(a){if(1==_cha("Elder")&&-1!=Game.UpgradesById[a].name.indexOf(" grandmas")){var b=new Array,c=new Array;if(Game.UpgradesById.forEach(function(a,d){a.bought&&-1!=a.name.indexOf(" grandmas")?b.push(d):a.bought||-1==a.name.indexOf(" grandmas")||c.push(d)}),1==c.length&&c[0]==a)return!0}return!1}function _cha(a){var b=0;return Game.AchievementsById.forEach(function(c){c.won||c.name!=a||(b=1)}),b}function _gpp(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.05*Game.ObjectsById[7].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _gpg(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.02*Game.ObjectsById[1].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _mcg(a){var b=Game.UpgradesById[a].desc,c=31;-1!=b.indexOf(" another ")&&(c+=8);var d=1*b.substr(c,b.indexOf("<",c)-c);return d*(Game.BuildingsOwned-Game.ObjectsById[0].amount)*Game.ObjectsById[0].amount*Game.globalCpsMult}function _bte(a){return Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _fte(a){return 3*Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _bam(a,b,c){var d=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf(a+" are <b>twice</b> as efficient.")&&(d=2*d),b.bought&&-1!=b.desc.indexOf(a+" are <b>4 times</b> as efficient.")&&(d=4*d)}),b*d*Game.ObjectsById[c].amount*Game.globalCpsMult}function _inc(a){var b=0;return Game.AchievementsById.forEach(function(c){var d=c.desc.replace(/,/g,"");c.won||-1==d.indexOf(" per second.")||a>=1*d.substr(8,d.indexOf("</b>",8)-8)&&b++}),b}function Get_Achi_Worth(a,b,c,d){var e=0,f=Calc_Heavenly_Mult();0!=d&&(f=d);var g=0,h=new Array(0,0,0,0),i=Game.milkProgress,j=Get_Frenzy_Mult();Game.UpgradesById.forEach(function(a){var c=a.desc.replace("[Research]<br>","");a.bought&&-1!=c.indexOf("Cookie production multiplier <b>+")&&(f+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought||-1==c.indexOf("Cookie production multiplier <b>+")||a.id!=b||(g+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought&&"Kitten helpers"==a.name&&(h[0]=.05),a.bought&&"Kitten workers"==a.name&&(h[1]=.1),a.bought&&"Kitten engineers"==a.name&&(h[2]=.2),a.bought&&"Kitten overseers"==a.name&&(h[3]=.2)});var k=100+f;k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var l=c,m=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j;i+=.04*a,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var n=0;switch(Game.UpgradesById[b].name){case"Kitten helpers":n=.05;break;case"Kitten workers":n=.1;break;case"Kitten engineers":n=.2;break;case"Kitten overseers":n=.2}k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m;var o=_inc(e+m);return o>0&&(i+=.04*o,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i,k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m),0!=d&&(e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j),Game.Has("Elder Covenant")&&(e*=.95),e}function Calc_Heavenly_Mult(){var a=2*Game.prestige["Heavenly chips"],b=0;return Game.Has("Heavenly chip secret")&&(b+=.05),Game.Has("Heavenly cookie stand")&&(b+=.2),Game.Has("Heavenly bakery")&&(b+=.25),Game.Has("Heavenly confectionery")&&(b+=.25),Game.Has("Heavenly key")&&(b+=.25),a*b}function Get_Frenzy_Mult(){return Game.frenzy>0?Game.frenzyPower:1}function Manage_Building_Tooltip(a){var b=a.id,c=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),d=new Array("none","none"),e=(new Array("",""),new Array(0,0));Game.cookies-a.price<c[0]&&(d[0]="block",e[0]=c[0]-(Game.cookies-a.price)),Game.cookies-a.price<c[1]&&(d[1]="block",e[1]=c[1]-(Game.cookies-a.price)),a.desc==building_tooltips[a.id]&&(a.desc+='<div id="cm_ob_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #000000; margin:6px -6px -6px -6px; display:none;"></div>',a.desc+='<div id="cm_ob_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_ob_lucky_div_warning" style="background:url(http://frozenelm.com/cookiemonster/images/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_ob_lucky_div_caution" style="background:url(http://frozenelm.com/cookiemonster/images/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div>',a.desc+='<div id="cm_ob_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_ob_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_ob_warning_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/warning.png" height=16px width=16px></div></div><div id="cm_ob_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_ob_caution_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/caution.png" height=16px width=16px></div></div></div>',Game.RebuildStore());var f=new Array("FFFF00","FFFF00"),g=new Array(hold_cpi[b],hold_tc[b]),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<f.length;i++)g[i]==j[i]?f[i]="00FF00":g[i]==h[i]?f[i]="FF0000":h[i]-g[i]<g[i]-j[i]&&(f[i]="FF7F00");1==$("#cm_ob_div_"+b).length&&($("#cm_ob_div_"+b).css("border","1px solid #"+f[0]),$("#cm_ob_div_"+b).css("display",""),$("#cm_ob_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(hold_is[b])+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"")+"</div>"),$("#cm_ob_warning_amount").text("Deficit: "+formatNum(e[0])),$("#cm_ob_caution_amount").text("Deficit: "+formatNum(e[1])),1==settings[10]||2==settings[10]?($("#cm_ob_lucky_div_warning").css("display",d[0]),$("#cm_ob_lucky_div_caution").css("display",d[1])):($("#cm_ob_lucky_div_warning").css("display","none"),$("#cm_ob_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_ob_note_div_warning").css("display",d[0]),$("#cm_ob_note_div_caution").css("display",d[1])):($("#cm_ob_note_div_warning").css("display","none"),$("#cm_ob_note_div_caution").css("display","none"))),1==settings[6]?$("#product"+b).find(".price").first().css("color","#"+f[0]):$("#product"+b).find(".price").first().css("color","")}function Make_Table(){var a='<th align=left width=130 style="color:#FFFF00;"> '+version+"</th>",b="",c="",d="";Game.ObjectsById.forEach(function(e,f){a+='<th align=middle id="cookie_monster_item_'+f+'" style="font-weight:bold;"></th>',b+='<td align=middle id="cookie_monster_is_'+f+'"></td>',c+='<td align=middle id="cookie_monster_cpi_'+f+'"></td>',d+='<td align=middle id="cookie_monster_tc_'+f+'"></td>'}),$("#cookie_monster_bar").html('<table style="width:100%; table-layout:fixed; margin-top:2px;"><tr>'+a+'</tr><tr><th align=right style="color:#4bb8f0;">Bonus Income</th>'+b+'</tr><tr><th align=right style="color:#4bb8f0;">Base Cost Per Income</th>'+c+'</tr><tr><th align=right style="color:#4bb8f0;">Time Left</th>'+d+"</tr></table>")}function Update_Table(){Game.ObjectsById.forEach(function(a,b){var c=a.price,d=a.amount,e=(a.storedTotalCps,a.storedCps*Game.globalCpsMult);"Grandma"==a.name&&(e=0);var f=Math.round(100*(e+Get_Upgrade_Bonuses(a.name,d,e)))/100,g=Math.round(c/f*100)/100,h=a.name.replace(/([^\s]+)/,"");hold_item[b]=a.name.replace(h,"")+' (<span style="color:#4bb8f0;">'+formatNum(d)+"</span>)",hold_is[b]=Math.round(100*f)/100,hold_cpi[b]=Math.round(100*g)/100,hold_tc[b]=Math.round(Seconds_Left(b,"ob"))}),Game.ObjectsById.forEach(function(a,b){var c=new Array("FFFF00","FFFF00"),d=new Array(hold_cpi[b],hold_tc[b]),e=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),f=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<c.length;i++)d[i]==f[i]?c[i]="00FF00":d[i]==e[i]?c[i]="FF0000":e[i]-d[i]<d[i]-f[i]&&(c[i]="FF7F00");$("#cookie_monster_item_"+b).html(hold_item[b]),$("#cookie_monster_is_"+b).html(formatNum(hold_is[b])),$("#cookie_monster_cpi_"+b).html('<span style="color:#'+c[0]+';">'+formatNum(d[0])+"</span>"),$("#cookie_monster_tc_"+b).html('<span style="color:#'+c[1]+';">'+formatTime(d[1],"min")+"</span>")})}function Do_Emphasize(){var a=$("#cookie_monster_golden_overlay"),b=$("#goldenCookie");if("none"!=b.css("display")||emphasize||(emphasize=!0,gc_avail=""),"none"!=b.css("display")&&emphasize){if(emphasize=!1,1==settings[9]&&(gc_avail="(G) ",Fav_Icon_Spinner(1)),1==settings[8]){var c=new Audio("http://frozenelm.com/cookiemonster/sounds/ba%20dink.mp3");c.volume=1,c.play()}1==settings[0]&&($("#cookie_monster_overlay").fadeIn(100),$("#cookie_monster_overlay").fadeOut(500))}"none"!=b.css("display")&&1==settings[1]?(a.css("display","block"),a.css("opacity",b.css("opacity")),a.css("left",b.css("left")),a.css("top",b.css("top")),a.html('<div style="position:absolute; top:30px; width:96px; height:36px;">'+Math.round(Game.goldenCookie.life/Game.fps)+"</div>")):a.css("display","none")}function Manage_Buffs(){var a="",b="",c=0,d=13+13*Game.Has("Get lucky"),e=new Array(Game.goldenCookie.time,Game.goldenCookie.minTime,Game.goldenCookie.maxTime),f=parseInt($("#cookie_monster_timer_bars_div").css("width"));switch(Game.frenzyPower){case 7:c=77+77*Game.Has("Get lucky"),a="Frenzy",b="FFFF00";break;case 666:c=6+6*Game.Has("Get lucky"),a="Blood Frenzy",b="00FF00",c=66+66*Game.Has("Get lucky"),a="Clot",b="FF0000"}Game.frenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_"+b).length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_'+b+'" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">'+a+'<td><td><div id="cmt_'+b+'" style="position:relative; background:#'+b+"; height:10px; width:"+Game.frenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_'+b+'" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+c+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_"+b).css("width",Game.frenzy/e[2]*100+"%"),$("#cmt_time_"+b).text(Math.round(Game.frenzy/Game.fps))),$("#cookie_monster_timer_"+b).fadeIn(250),"1"==$("#cookie_monster_timer_FFFF00").css("opacity")&&"FFFF00"!=b&&$("#cookie_monster_timer_FFFF00").fadeOut(250),"1"==$("#cookie_monster_timer_00FF00").css("opacity")&&"00FF00"!=b&&$("#cookie_monster_timer_00FF00").fadeOut(250),"1"==$("#cookie_monster_timer_FF0000").css("opacity")&&"FF0000"!=b&&$("#cookie_monster_timer_FF0000").fadeOut(250)):1==$("#cookie_monster_timer_"+b).length&&"1"==$("#cookie_monster_timer_"+b).css("opacity")&&$("#cookie_monster_timer_"+b).fadeOut(250),Game.clickFrenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_4BB8F0").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_4BB8F0" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Click Frenzy<td><td><div id="cmt_4BB8F0" style="position:relative; background:#4BB8F0; height:10px; width:'+Game.clickFrenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_4BB8F0" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+d+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_4BB8F0").css("width",Game.clickFrenzy/e[2]*100+"%"),$("#cmt_time_4BB8F0").text(Math.round(Game.clickFrenzy/Game.fps))),$("#cookie_monster_timer_4BB8F0").fadeIn(250)):1==$("#cookie_monster_timer_4BB8F0").length&&"1"==$("#cookie_monster_timer_4BB8F0").css("opacity")&&$("#cookie_monster_timer_4BB8F0").fadeOut(250),e[0]>0&&"none"==$("#goldenCookie").css("display")&&1==settings[4]?(1!=$("#cookie_monster_timer_FF00FF").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_FF00FF" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Next Cookie<td><td><div id="cmt_FF00FF" style="position:relative; background:#aaaaaa; height:10px; width:100%; margin-left:4px; border:1px solid black;"><div id="cmt2_FF00FF" style="position:relative; background:#FF00FF; height:10px; width:100%; margin-left:0px; max-width:'+.67*(f-189)+'px; float:right;"></div><div id="cmt_time_FF00FF" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+Math.round((e[2]-e[0])/Game.fps)+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt2_FF00FF").css("max-width",.67*(f-189)+"px"),$("#cmt_FF00FF").css("width",(e[2]-e[0])/e[2]*100+"%"),$("#cmt_time_FF00FF").text(Math.round((e[2]-e[0])/Game.fps))),$("#cookie_monster_timer_FF00FF").fadeIn(250)):1==$("#cookie_monster_timer_FF00FF").length&&"1"==$("#cookie_monster_timer_FF00FF").css("opacity")&&$("#cookie_monster_timer_FF00FF").fadeOut(250),(e[2]-e[0])/Game.fps>0&&"none"==$("#goldenCookie").css("display")&&(gc_avail=1==settings[4]?"("+Math.round((e[2]-e[0])/Game.fps)+") ":""),$("#versionNumber").css("bottom",$("#cookie_monster_timer_bars_div").css("height"))}function Get_Upgrade_Bonuses(a,b,c){var d=0,e=0;switch(a){case"Cursor":0==b&&(e+=_cha("Click")),1==b&&(e+=_cha("Double-click")),49==b&&(e+=_cha("Mouse wheel")),99==b&&(e+=_cha("Of Mice and Men")),199==b&&(e+=_cha("The Digital"));break;case"Grandma":d+=Get_Grandma_Mod_Total(b)*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Grandma's Cookies")),49==b&&(e+=_cha("Sloppy kisses")),99==b&&(e+=_cha("Retirement home")),149==b&&(e+=_cha("Friend of the ancients")),199==b&&(e+=_cha("Ruler of the ancients"));break;case"Farm":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("My first farm")),49==b&&(e+=_cha("Reap what you sow")),99==b&&(e+=_cha("Farm ill"));break;case"Factory":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Production chain")),49==b&&(e+=_cha("Industrial revolution")),99==b&&(e+=_cha("Global warming"));break;case"Mine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("You know the drill")),49==b&&(e+=_cha("Excavation site")),99==b&&(e+=_cha("Hollow the planet"));break;case"Shipment":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Expedition")),49==b&&(e+=_cha("Galactic highway")),99==b&&(e+=_cha("Far far away"));break;case"Alchemy lab":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Transmutation")),49==b&&(e+=_cha("Transmogrification")),99==b&&(e+=_cha("Gold member"));break;case"Portal":d+=Get_Portal_Mod_Total()*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("A whole new world")),49==b&&(e+=_cha("Now you're thinking")),99==b&&(e+=_cha("Dimensional shift"));break;case"Time machine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Time warp")),49==b&&(e+=_cha("Alternate timeline")),99==b&&(e+=_cha("Rewriting history"));break;case"Antimatter condenser":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Antibatter")),49==b&&(e+=_cha("Quirky quarks")),99==b&&(e+=_cha("It does matter!"))}return 99==Game.BuildingsOwned&&(e+=_cha("Builder")),399==Game.BuildingsOwned&&(e+=_cha("Architect")),799==Game.BuildingsOwned&&(e+=_cha("Engineer")),_owe(a)&&e++,_mat(a)&&e++,_bat(a)&&e++,_cen(a)&&e++,d+Get_Achi_Worth(e,0,d+c,0)}function _bat(a){if(1==_cha("Base 10")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=10*c.length,e=0;e<c.length;e++){if(c[e]<d)return!1;d-=10}return!0}return!1}function _mat(a){if(1==_cha("Mathematician")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=128,e=0;e<c.length;e++)if(e>2&&(d/=2),c[e]<d)return!1;return!0}return!1}function _owe(a){if(1==_cha("One with everything")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>0?b.push(a.name):c.push(a.name)}),1==c.length&&c[0]==a)return!0}return!1}function _cen(a){if(1==_cha("Centennial")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>=100?b.push(a.name):c.push(a)}),1==c.length&&c[0].name==a&&99==c[0].amount)return!0}return!1}function Get_Cursor_Mod_Total(){var a=0;return Game.UpgradesById.forEach(function(b){if(b.bought&&-1!=b.desc.indexOf("The mouse and cursors gain")){var c=31;-1!=b.desc.indexOf(" another ")&&(c+=8),a+=1*b.desc.substr(c,b.desc.indexOf("<",c)-c)}}),a*Game.ObjectsById[0].amount}function Get_Grandma_Mod_Total(a){var b=.5,c=0,d=1;return Game.UpgradesById.forEach(function(e){e.bought&&"Forwards from grandma"==e.name&&(b+=.3),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(d=2*d),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(d=4*d),e.bought&&-1!=e.desc.indexOf("for each 50 grandmas")&&(c+=.02*(a+1)*(a+1)-.02*a*a),e.bought&&-1!=e.desc.indexOf("for each 20 portals")&&(c+=.05*Game.ObjectsById[7].amount)}),b*d+c*d}function Get_Portal_Mod_Total(){var a=0,b=1;return Game.UpgradesById.forEach(function(c){c.bought&&-1!=c.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(b=2*b),c.bought&&-1!=c.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(b=4*b),c.bought&&-1!=c.desc.indexOf("for each 20 portals")&&(a+=.05*Game.ObjectsById[1].amount)}),a*b}function inStore(a){return-1!=Game.UpgradesInStore.indexOf(a)?!0:!1}function formatNum(a){return _sts(a,!1).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatNumB(a){return _sts(a,!0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatTime(a,b){if(a=Math.round(a),1/0==a)return"Never";if(0==a)return"Done!";if(a/86400>1e3)return"> 1,000 days";var c=parseInt(a/86400)%999,d=parseInt(a/3600)%24,e=parseInt(a/60)%60,f=a%60,g=new Array(" days, "," hours, "," minutes, "," seconds");"min"!=b?(1==c&&(g[0]=" day, "),1==d&&(g[1]=" hour, "),1==e&&(g[2]=" minute, "),1==f&&(g[3]=" second")):g=new Array("d, ","h, ","m, ","s");var h="";return c>0&&(h=h+c+g[0]),(c>0||d>0)&&(h=h+d+g[1]),(c>0||d>0||e>0)&&(h=h+e+g[2]),(c>0||d>0||e>0||f>0)&&(h=h+f+g[3]),h}function Colorize(a,b,c){var d=Game.UpgradesById[b],e=d.basePrice,f=new Array("FFFF00","FFFF00"),g=new Array(Math.round(e/a*100)/100,Math.round(Seconds_Left(b,"up"))),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<f.length;i++)g[i]<j[i]?(f[i]="4BB8F0",inStore(d)&&0==i&&in_store[0]++):g[i]==j[i]?(f[i]="00FF00",inStore(d)&&0==i&&in_store[1]++):g[i]==h[i]?(f[i]="FF0000",inStore(d)&&0==i&&in_store[4]++):g[i]>h[i]?(f[i]="FF00FF",inStore(d)&&0==i&&in_store[5]++):h[i]-g[i]<g[i]-j[i]?(f[i]="FF7F00",inStore(d)&&0==i&&in_store[3]++):inStore(d)&&0==i&&in_store[2]++;for(i=0;i<in_store.length;i++)$("#cm_up_q"+i).text(in_store[i]);
if(settings[11]&&inStore(d)&&$("#upgrade"+Game.UpgradesInStore.indexOf(d)).html('<div style="background-color:#'+f[0]+'; border:1px solid black; position:absolute; z-index:21; top:2px; left:2px; height:14px; width:14px; pointer-events:none;"></div>'),1==$("#cm_up_div_"+b).length){var k=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),l=new Array("none","none"),m=new Array(0,0);Game.cookies-e<k[0]&&(l[0]="block",m[0]=k[0]-(Game.cookies-e)),Game.cookies-e<k[1]&&(l[1]="block",m[1]=k[1]-(Game.cookies-e)),$("#cm_up_div_"+b).css("border","1px solid #"+f[0]),$("#cm_up_div_"+b).css("display",""),$("#cm_up_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(Math.round(100*a)/100)+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"min")+"</div>"),$("#cm_up_warning_amount").text("Deficit: "+formatNum(m[0])),$("#cm_up_caution_amount").text("Deficit: "+formatNum(m[1])),1==settings[10]||2==settings[10]?($("#cm_up_lucky_div_warning").css("display",l[0]),$("#cm_up_lucky_div_caution").css("display",l[1])):($("#cm_up_lucky_div_warning").css("display","none"),$("#cm_up_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_up_note_div_warning").css("display",l[0]),$("#cm_up_note_div_caution").css("display",l[1])):($("#cm_up_note_div_warning").css("display","none"),$("#cm_up_note_div_caution").css("display","none"))}return c?(f="000000",'<div id="cm_up_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_up_lucky_div_warning" style="background:url(http://frozenelm.com/images/cookiemonster/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_up_lucky_div_caution" style="background:url(http://frozenelm.com/images/cookiemonster/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div><div id="cm_up_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #'+f+'; margin:6px -6px -6px -6px; display:none;"></div><div id="cm_up_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_up_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_up_warning_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/warning.png" height=16px width=16px></div></div><div id="cm_up_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_up_caution_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/caution.png" height=16px width=16px></div></div></div>'):void 0}function Factor_Time(a){var b=Game.cookies-a,c=Game.cookiesPs;if(0==c)return 1;if(0>b){var d=a/c;return 1- -1*b/c/d}return 1}function Seconds_Left(a,b){var c=0;"ob"==b&&(c=Game.ObjectsById[a].price),"up"==b&&(c=Game.UpgradesById[a].basePrice);var d=Game.cookies-c,e=Game.cookiesPs;if(0==e)return 0;if(0>d){var f=-1*d/e;return f}return 0}function _sts(a,b){var c=settings[7];if(c>0)for(var d=1e33,e=sts_type[c-1].length-1;e>=0;e--){var f=(a/d%999).toFixed(3);if(f>=1)return f+sts_type[c-1][e];d/=1e3}return b?Math.round(a):Math.round(100*a)/100}function Sell_Out_Value(){var a=0,b=Game.cookies,c=new Array,d=0;for(Game.ObjectsById.forEach(function(a,b){c[b]=a.amount,d+=a.amount});b>=15||d>0;)for(var e=c.length-1;e>=0;e--){for(var f=!1,g=c[e],h=Game.ObjectsById[e],i=g;i>0;i--)b+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),a+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),c[e]--,d--;for(;b>=h.basePrice*Math.pow(1.15,c[e]);)f=!0,b-=h.basePrice*Math.pow(1.15,c[e]),c[e]++,d++;if(f)break}sell_out=a}function Sell_Out(){confirm("*** WARNING ***\nYou will have no buildings or cookies left after this.")&&(Game.ObjectsById.forEach(function(a){setTimeout(function(){for(;a.amount>0;)a.sell()})}),setTimeout(function(){Buy_Sell()}))}function Buy_Sell(){if(Game.cookies<1e9&&Game.BuildingsOwned<100)return Buy_Sell_No_Wait(),!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.price<=Game.cookies)return b.buy(),setTimeout(function(){Buy_Sell()}),!1;if(b.price>Game.cookies&&b.amount>0)return b.sell(),setTimeout(function(){Buy_Sell()}),!1}setTimeout(function(){Buy_Sell()})}function Buy_Sell_No_Wait(){if(Game.cookies<15)return!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.sell(),b.price<=Game.cookies)return b.buy(),b.sell(),Buy_Sell_No_Wait(),!1}Buy_Sell_No_Wait()}function Get_True_CPI(a,b){var c=0,d=0,e=0;if("ob"==b&&(c=Seconds_Left(Game.ObjectsById[a],"ob"),d=Game.ObjectsById[a].price,e=hold_is[a]),"up"==b){c=Seconds_Left(Game.UpgradesById[a],"up"),d=Game.UpgradesById[a].basePrice;for(var f=0;upgrade_count>f;f++)if(_cup(f,a,!1)){e=Manage_Tooltip(f,a,!1,!0);break}}var g=d/e;return Game.ObjectsById.forEach(function(f,h){var i=f.price,j=hold_is[h],k=Seconds_Left(f,"ob");if(c>k&&("up"==b||h!=a)){var l=c-k,m=j*l,n=d-i+m,o=n/e;o>g&&(g=o)}}),g}function Test_True_CPI(a,b){var c=0,d=0,e=0,f=0;if("ob"==b&&(c=Seconds_Left(a,"ob"),e=Game.ObjectsById[a].price,f=hold_is[a]),"up"==b){c=Seconds_Left(a,"up"),e=Game.UpgradesById[a].basePrice;for(var g=0;upgrade_count>g;g++)if(_cup(g,a,!1)){f=Manage_Tooltip(g,a,!1,!0);break}}var h=Organize_Object_List(),i=e,j=i/f,k=j,l=f;return h.forEach(function(g,j){if(e>g.price&&("up"==b||g.id!=a)){var m=g.price,n=hold_is[g.id],o=hold_cpi[g.id];0==l&&(l=n),0==k&&(k=o);var p=Seconds_Left(g.id,"ob"),q=0,r=h[j+1];if(r.id!=h.length&&(hold_cpi[r.id]<k||r.id==a)&&(q=Seconds_Left(r.id,"ob"),k=hold_cpi[r.id],l=n),c-d>p){var s=q-p;d+=s;var t=l*s;s>0&&(f-=l,i=i-m+t)}}}),j=i/f}function Organize_Object_List(){var a=new Array;return Game.ObjectsById.forEach(function(b){var c=!0;a.length>0?(a.forEach(function(d,e){b.price<d.price&&c&&(c=!1,a.splice(e,0,b),a.join())}),c&&a.push(b)):a.push(b)}),a}function Start_Cookie_Monster(){return 0!=$("#cookie_monster_bar").length?(alert("Cookie Monster "+version+"\n\nCookie Monster is already loaded, silly!"),!1):($("#topBar").css("display","none"),$("#tooltip").css("margin-top","32px"),$("#tooltip").css("pointer-events","none"),$("#cookies").css("background","rgba(0,0,0,0.75)"),$("#cookies").css("border-top","1px solid black"),$("#cookies").css("border-bottom","1px solid black"),$("#goldenCookie").css("cssText","z-index: 1000001 !important;"),$("#game").css("cssText","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;user-select: none;top: 0px;bottom: 57px;"),$("#storeTitle").css("cssText","font-size: 18px;padding: 4px 8px 2px 8px;border-bottom: 1px solid black;"),$("#storeTitle").after('<table cellpadding=0 cellspacing=0 style="width:300px; table-layout:fixed; padding:4px; font-weight:bold; background:rgba(0,0,0,0.6); border-bottom: 1px solid black; cursor:default;"><tr><td align=center style="color:#4bb8f0; padding:2px;" id="cm_up_q0">0</td><td align=center style="color:#00ff00; padding:2px;" id="cm_up_q1">0</td><td align=center style="color:#ffff00; padding:2px;" id="cm_up_q2">0</td><td align=center style="color:#ff7f00; padding:2px;" id="cm_up_q3">0</td><td align=center style="color:#ff0000; padding:2px;" id="cm_up_q4">0</td><td align=center style="color:#ff00ff; padding:2px;" id="cm_up_q5">0</td></tr></table>'),$("body").append("<div id=\"cookie_monster_bar\" style=\"z-index:1000; position:absolute; bottom:0px; left:0px; width:100%; height:56px; border-top:1px solid black; cursor:default;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;background: rgb(69,72,77); /* Old browsers */background: -moz-linear-gradient(top,  rgba(69,72,77,1) 0%, rgba(0,0,0,1) 100%); /* FF3.6+ */background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(69,72,77,1)), color-stop(100%,rgba(0,0,0,1))); /* Chrome,Safari4+ */background: -webkit-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Chrome10+,Safari5.1+ */background: -o-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Opera 11.10+ */background: -ms-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* IE10+ */background: linear-gradient(to bottom,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* W3C */filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#45484d', endColorstr='#000000',GradientType=0 ); /* IE6-9 */\"></div>"),$("body").append('<div id="cookie_monster_overlay" style="position:fixed; z-index:1000000; height:100%; width:100%; background:rgba(255,255,255,1); pointer-events:none; display:none;"></div>'),$("body").append('<div id="cookie_monster_golden_overlay" style="position:fixed; z-index:1000002; height:96px; width:96px; pointer-events:none; cursor:pointer; opacity:0; display:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:32px; text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black !important;" onclick="Game.goldenCookie.click();"></div>'),$("#sectionLeft").append('<div id="cookie_monster_timer_bars_div" style="position:absolute; z-index:1000; bottom:-1px; left:0px; width:100%; pointer-events:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:16px; background:rgba(0,0,0,0.6); border-top:1px solid black;"></div>'),$("link").each(function(){"img/favicon.ico"==$(this).attr("href")&&$(this).attr("id","cm_favicon")}),Make_Table(),Save_Tooltips(),Update_Game_Scripts(),Load_Settings(),Set_Up_Tooltips(),Main_Loop(),Game.Popup('<span style="color:#FFFF00; text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black !important;">Cookie Monster '+version+" Loaded!</span>"),void 0)}function Main_Loop(){Update_Table(),Update_Tooltips("all"),Do_Emphasize(),Manage_Buffs(),loops++,1==loops&&Game.RebuildStore(),setTimeout(function(){Main_Loop()},settings[3])}function Fav_Icon_Spinner(a){a>6&&(a=1),"(G) "==gc_avail?($("#cm_favicon").attr("href","http://frozenelm.com/cookiemonster/images/cm_gc_"+a+".png"),a++,setTimeout(function(){Fav_Icon_Spinner(a)},250)):$("#cm_favicon").attr("href","http://orteil.dashnet.org/cookieclicker/img/favicon.ico")}function Load_Settings(){settings=[1,1,1,1e3,1,1,1,1,0,1,1,1,1],"undefined"!=typeof Storage&&(void 0!=localStorage.FlashScreen?settings[0]=localStorage.FlashScreen:(localStorage.FlashScreen=1,settings[0]=1),void 0!=localStorage.CookieTimer?settings[1]=localStorage.CookieTimer:(localStorage.CookieTimer=1,settings[1]=1),void 0!=localStorage.BuffBars?settings[2]=localStorage.BuffBars:(localStorage.BuffBars=1,settings[2]=1),void 0!=localStorage.Refresh?settings[3]=localStorage.Refresh:(localStorage.Refresh=1e3,settings[3]=1e3),void 0!=localStorage.CookieCD?settings[4]=localStorage.CookieCD:(localStorage.CookieCD=1,settings[4]=1),void 0!=localStorage.CMBar?settings[5]=localStorage.CMBar:(localStorage.CMBar=1,settings[5]=1),void 0!=localStorage.ColoredPrices?settings[6]=localStorage.ColoredPrices:(localStorage.ColoredPrices=1,settings[6]=1),void 0!=localStorage.ShortNumbers?settings[7]=localStorage.ShortNumbers:(localStorage.ShortNumbers=1,settings[7]=1),void 0!=localStorage.CookieSound?settings[8]=localStorage.CookieSound:(localStorage.CookieSound=0,settings[8]=0),void 0!=localStorage.UpdateTitle?settings[9]=localStorage.UpdateTitle:(localStorage.UpdateTitle=1,settings[9]=1),void 0!=localStorage.LuckyAlert?settings[10]=localStorage.LuckyAlert:(localStorage.LuckyAlert=1,settings[10]=1),void 0!=localStorage.UpgradeIcons?settings[11]=localStorage.UpgradeIcons:(localStorage.UpgradeIcons=1,settings[11]=1),void 0!=localStorage.UpgradeDisplay?settings[12]=localStorage.UpgradeDisplay:(localStorage.UpgradeDisplay=1,settings[12]=1)),Show_Hide_CM_Bar()}function Save_Settings(){"undefined"!=typeof Storage&&(localStorage.FlashScreen=settings[0],localStorage.CookieTimer=settings[1],localStorage.BuffBars=settings[2],localStorage.Refresh=settings[3],localStorage.CookieCD=settings[4],localStorage.CMBar=settings[5],localStorage.ColoredPrices=settings[6],localStorage.ShortNumbers=settings[7],localStorage.CookieSound=settings[8],localStorage.UpdateTitle=settings[9],localStorage.LuckyAlert=settings[10],localStorage.UpgradeIcons=settings[11],localStorage.UpgradeDisplay=settings[12]),Show_Hide_CM_Bar()}function Show_Hide_CM_Bar(){0==settings[5]?($("#cookie_monster_bar").css("display","none"),$("#game").css("bottom","0px")):($("#cookie_monster_bar").css("display",""),$("#game").css("bottom","57px"))}function Update_Game_Scripts(){Game.Logic=new Function("",Game.Logic.toString().replace(".title=",".title=gc_avail+").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var a="\n\n'<div class=\"subsection\">'+'<div class=\"title\"><span style=\"color:#4bb8f0;\">Cookie Monster Goodies</span></div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required:</b> ' + CM_Lucky('reg', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required (Frenzy):</b> ' + CM_Lucky('frenzy', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX):</b> ' + CM_Lucky_Reward('max') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX) (Frenzy):</b> ' + CM_Lucky_Reward('max_frenzy') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (CUR):</b> ' + CM_Lucky_Reward('cur') + '</div>'+'</br><div class=\"listing\"><b>Heavenly Chips (MAX):</b> ' + CM_Heavenly_Chip('max') + '</div>'+'<div class=\"listing\"><b>Heavenly Chips (CUR):</b> ' + CM_Heavenly_Chip('cur') + '</div>'+'<div class=\"listing\"><b>Cookies To Next Chip:</b> ' + CM_Heavenly_Chip('next') + '</div>'+'<div class=\"listing\"><b>Time To Next Chip:</b> ' + CM_Heavenly_Chip('time') + '</div>'+'</div>'+";Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("Statistics</div>'+","Statistics</div>'+"+a).replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var b='\n\'<div class="subsection">\'+\'<div class="title"><span style="color:#4bb8f0;">Cookie Monster Settings</span></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Flash Screen \' + CM_Option_State(0) + \'</a><label>Flashes the screen when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Timer \' + CM_Option_State(1) + \'</a><label>Displays a timer on Golden Cookies and Red Cookies</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Sound \' + CM_Option_State(8) + \'</a><label>Plays a sound when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Next Cookie Timer \' + CM_Option_State(4) + \'</a><label>Displays a countdown bar and updates the Title for when the next Cookie will appear</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Update Title \' + CM_Option_State(9) + \'</a><label>Updates the Title to display if a Cookie is waiting to be clicked</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Buff Bars \' + CM_Option_State(2) + \'</a><label>Displays a countdown bar for each effect currently active</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Bottom Bar \' + CM_Option_State(5) + \'</a><label>Displays a bar at the bottom of the screen that shows all Building information</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Colored Prices \' + CM_Option_State(6) + \'</a><label>Changes the colors of all Building prices to correspond with their Cost Per Income</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Icons \' + CM_Option_State(11) + \'</a><label>Displays a small square icon on the Upgrade to better display the Cost Per Income color value</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Short Numbers \' + CM_Short_Numbers() + \'</a><label>Formats all numbers to be shorter when displayed</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Display (\' + CM_Upgrade_Display() + \')</a><label>Changes how the store displays Upgrades</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Lucky Alert (\' + CM_Lucky_Alert() + \')</a><label>Changes the tooltip to display if you would be under the number of cookies required for "Lucky!"</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Refresh Rate (\' + CM_Refresh() + \' fps)</a><label>The rate at which Cookie Monster updates data (higher rates may slow the game)</label></div>\'+\'</div>\'+';Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("OFF')+'</div>'+","OFF')+'</div>'+"+b).replace("startDate=Game.sayTime(date.getTime()/1000*Game.fps,2);","startDate = formatTime(((new Date).getTime() - Game.startDate) / 1000, '');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var c='\nvar cm_id = from.id;\nif(cm_id == "") { cm_id = $(from).parents(".product").prop("id"); }\nif(cm_id == "product5" || cm_id == "product6" || cm_id == "product7" || cm_id == "product8" || cm_id == "product9") { y -= 100; }\nif(cm_id == "product8" || cm_id == "product9") { y -= 13; }\nif(cm_id == "product9" && settings[7] == 0) { y -= 13; }\n';Game.tooltip.draw=new Function("from,text,x,y,origin",Game.tooltip.draw.toString().replace("implemented');}","implemented');}"+c).replace("this.on=1;","this.on=1;\nUpdate_Tooltips('all');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Reset=new Function("bypass",Game.Reset.toString().replace("Game.researchT=0;","Game.researchT=0;\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.LoadSave=new Function("data",Game.LoadSave.toString().replace("Game.Popup('Game loaded');","Game.Popup('Game loaded');\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.RebuildStore=new Function("",Game.RebuildStore.toString().replace("l('products').innerHTML=str;","l('products').innerHTML=str;\nUpdate_Tooltips('ob');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Draw=new Function("",Game.Draw.toString().replace("Beautify(Math.round(Game.cookiesd))","formatNumB(Game.cookiesd)").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var d="return formatNum(what);";Beautify=new Function("what,floats",Beautify.toString().replace("var str='';",d+"\nvar str='';").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""))}function CM_Heavenly_Chip(a){var b=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned),c=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned+sell_out),d=cookies_to_h_chips(Game.cookiesReset),e=h_chips_to_cookies(b+1)-(Game.cookiesReset+Game.cookiesEarned),f=h_chips_to_cookies(c+1)-(Game.cookiesReset+Game.cookiesEarned+sell_out);return"max"==a?formatNum(b)+" <small>("+formatNum(2*b)+"%)</small>":"max_sell_out"==a?formatNum(c)+" <small>("+formatNum(2*c)+"%)</small>":"cur"==a?formatNum(d)+" <small>("+formatNum(2*d)+"%)</small>":"next"==a?formatNum(Math.round(e)):"next_sell_out"==a?formatNum(Math.round(f)):"time"==a?formatTime(Math.round(e/Game.cookiesPs),""):void 0}function cookies_to_h_chips(a){return Math.floor(Math.sqrt(2.5*Math.pow(10,11)+2*a)/Math.pow(10,6)-.5)}function h_chips_to_cookies(a){return 5*Math.pow(10,11)*a*(a+1)}function CM_Upgrade_Display(){switch(1*settings[12]){case 1:return"Normal";case 2:return"All";case 0:return"None";default:return"Normal"}}function CM_Short_Numbers(){switch(1*settings[7]){case 1:return"ON (A)";case 2:return"ON (B)";case 0:return"OFF";default:return"OFF"}}function CM_Lucky_Alert(){switch(1*settings[10]){case 1:return"Both";case 2:return"Icons";case 3:return"Notes";case 0:return"Off";default:return"Both"}}function CM_Refresh(){switch(1*settings[3]){case 1e3:return"1";case 500:return"2";case 250:return"4";case 100:return"10";case 33:return"30";default:return"1"}}function CM_Option_State(a){return 0==settings[a]?"OFF":"ON"}function CM_Option_Toggle(a){a=$(a);var b=a.text();switch(b){case"Flash Screen ON":settings[0]=0,a.text("Flash Screen OFF");break;case"Flash Screen OFF":settings[0]=1,a.text("Flash Screen ON");break;case"Cookie Sound ON":settings[8]=0,a.text("Cookie Sound OFF");break;case"Cookie Sound OFF":settings[8]=1,a.text("Cookie Sound ON");break;case"Cookie Timer ON":settings[1]=0,a.text("Cookie Timer OFF");break;case"Cookie Timer OFF":settings[1]=1,a.text("Cookie Timer ON");break;case"Next Cookie Timer ON":settings[4]=0,a.text("Next Cookie Timer OFF");break;case"Next Cookie Timer OFF":settings[4]=1,a.text("Next Cookie Timer ON");break;case"Update Title ON":settings[9]=0,a.text("Update Title OFF");break;case"Update Title OFF":settings[9]=1,a.text("Update Title ON");break;case"Buff Bars ON":settings[2]=0,a.text("Buff Bars OFF");break;case"Buff Bars OFF":settings[2]=1,a.text("Buff Bars ON");break;case"Bottom Bar ON":settings[5]=0,a.text("Bottom Bar OFF");break;case"Bottom Bar OFF":settings[5]=1,a.text("Bottom Bar ON");break;case"Colored Prices ON":settings[6]=0,a.text("Colored Prices OFF"),Update_Tooltips("ob");break;case"Colored Prices OFF":settings[6]=1,a.text("Colored Prices ON"),Update_Tooltips("ob");break;case"Upgrade Icons ON":settings[11]=0,a.text("Upgrade Icons OFF"),Game.RebuildUpgrades();break;case"Upgrade Icons OFF":settings[11]=1,a.text("Upgrade Icons ON"),Game.RebuildUpgrades();break;case"Upgrade Display (All)":settings[12]=0,a.text("Upgrade Display (None)"),Update_Upgrade_Display();break;case"Upgrade Display (None)":settings[12]=1,a.text("Upgrade Display (Normal)"),Update_Upgrade_Display();break;case"Upgrade Display (Normal)":settings[12]=2,a.text("Upgrade Display (All)"),Update_Upgrade_Display();break;case"Short Numbers ON (B)":settings[7]=0,a.text("Short Numbers OFF"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers OFF":settings[7]=1,a.text("Short Numbers ON (A)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers ON (A)":settings[7]=2,a.text("Short Numbers ON (B)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Lucky Alert (Both)":settings[10]=2,a.text("Lucky Alert (Icons)");break;case"Lucky Alert (Icons)":settings[10]=3,a.text("Lucky Alert (Notes)");break;case"Lucky Alert (Notes)":settings[10]=0,a.text("Lucky Alert (Off)");break;case"Lucky Alert (Off)":settings[10]=1,a.text("Lucky Alert (Both)");break;case"Refresh Rate (1 fps)":settings[3]=500,a.text("Refresh Rate (2 fps)");break;case"Refresh Rate (2 fps)":settings[3]=250,a.text("Refresh Rate (4 fps)");break;case"Refresh Rate (4 fps)":settings[3]=100,a.text("Refresh Rate (10 fps)");break;case"Refresh Rate (10 fps)":settings[3]=33,a.text("Refresh Rate (30 fps)");break;case"Refresh Rate (30 fps)":settings[3]=1e3,a.text("Refresh Rate (1 fps)")}Save_Settings()}function Update_Upgrade_Display(){var a=$("#upgrades");switch(1*settings[12]){case 1:a.css("cssText","");break;case 2:a.css("cssText","height: auto !important;");break;case 0:a.css("cssText","height: 0px !important;")}}function CM_Lucky(a,b){var c=Game.cookiesPs;Game.frenzy>0&&(c/=Game.frenzyPower),"frenzy"==a&&(c=7*c);var d=Math.round((1200*c+13)/.1);return b||(d=d<=Game.cookies?'<span style="color:#00FF00; font-weight:bold;">'+formatNum(d)+"</span>":formatNum(d)),d}function CM_Lucky_Reward(a){var b=Game.cookiesPs;Game.frenzy>0&&"cur"!=a&&(b/=Game.frenzyPower),"max_frenzy"==a&&(b=7*b);var c=new Array(Math.round(1200*b+13),Math.round(.1*Game.cookies+13));return("max"==a||"max_frenzy"==a)&&Math.round((1200*b+13)/.1)>Game.cookies?formatNum(c[0]):formatNum(Math.min.apply(Math,c))}function Save_Tooltips(){Game.UpgradesById.forEach(function(a,b){tooltips[b]=a.desc}),Game.ObjectsById.forEach(function(a,b){building_tooltips[b]=a.desc})}function Set_Up_Tooltips(){var a=!1;Game.UpgradesById.forEach(function(b,c){for(var d=0;upgrade_count>d;d++)if(_cup(d,c,!0)){b.desc=Manage_Tooltip(d,c,!0,!1),a=!0;break}b.bought&&b.desc!=tooltips[c]&&(b.desc=tooltips[c],a=!0)}),a&&Game.RebuildUpgrades()}function Update_Tooltips(a){("all"==a||"up"==a)&&(in_store=new Array(0,0,0,0,0,0),Game.UpgradesById.forEach(function(a,b){for(var c=0;upgrade_count>c;c++)if(_cup(c,b,!1)){Manage_Tooltip(c,b,!1,!1);break}})),("all"==a||"ob"==a)&&Game.ObjectsById.forEach(function(a){Manage_Building_Tooltip(a)})}function _cup(a,b,c){if(up=Game.UpgradesById[b],-1==up.desc.indexOf("cm_up_div_")&&!c)return!1;switch(a){case 0:if(!up.bought&&"Reinforced index finger"==up.name)return!0;break;case 1:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors are <b>twice</b> as efficient."))return!0;break;case 2:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors gain"))return!0;break;case 3:if(!up.bought&&"Forwards from grandma"==up.name)return!0;break;case 4:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>twice</b> as efficient."))return!0;break;case 5:if(!up.bought&&"Cheap hoes"==up.name)return!0;break;case 6:if(!up.bought&&-1!=up.desc.indexOf("Farms are <b>twice</b> as efficient."))return!0;break;case 7:if(!up.bought&&"Sturdier conveyor belts"==up.name)return!0;break;case 8:if(!up.bought&&-1!=up.desc.indexOf("Factories are <b>twice</b> as efficient."))return!0;break;case 9:if(!up.bought&&"Sugar gas"==up.name)return!0;break;case 10:if(!up.bought&&-1!=up.desc.indexOf("Mines are <b>twice</b> as efficient."))return!0;break;case 11:if(!up.bought&&"Vanilla nebulae"==up.name)return!0;break;case 12:if(!up.bought&&-1!=up.desc.indexOf("Shipments are <b>twice</b> as efficient."))return!0;break;case 13:if(!up.bought&&"Antimony"==up.name)return!0;break;case 14:if(!up.bought&&-1!=up.desc.indexOf("Alchemy labs are <b>twice</b> as efficient."))return!0;break;case 15:if(!up.bought&&"Ancient tablet"==up.name)return!0;break;case 16:if(!up.bought&&-1!=up.desc.indexOf("Portals are <b>twice</b> as efficient."))return!0;break;case 17:if(!up.bought&&"Flux capacitors"==up.name)return!0;break;case 18:if(!up.bought&&-1!=up.desc.indexOf("Time machines are <b>twice</b> as efficient."))return!0;break;case 19:if(!up.bought&&-1!=up.desc.indexOf("the more milk you have"))return!0;break;case 20:if(!up.bought&&-1!=up.desc.indexOf("Cookie production multiplier <b>+"))return!0;break;case 21:if(!up.bought&&-1!=up.desc.indexOf("for each 50 grandmas"))return!0;break;case 22:if(!up.bought&&-1!=up.desc.indexOf("for each 20 portals"))return!0;break;case 23:if(!up.bought&&"Elder Pledge"==up.name)return!0;break;case 24:if(!up.bought&&"Elder Covenant"==up.name)return!0;break;case 25:if(!up.bought&&"Sacrificial rolling pins"==up.name)return!0;break;case 26:if(!up.bought&&-1!=up.desc.indexOf("Golden cookie"))return!0;break;case 27:if(!up.bought&&-1!=up.desc.indexOf("Clicking gains <b>+1% of your CpS</b>."))return!0;break;case 28:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>4 times</b> as efficient."))return!0;break;case 29:if(!up.bought&&-1!=up.desc.indexOf("Antimatter condensers are <b>twice</b> as efficient."))return!0;break;case 30:if(!up.bought&&"Sugar bosons"==up.name)return!0;break;case 31:if(!up.bought&&"Revoke Elder Covenant"==up.name)return!0;break;case 32:if(!up.bought&&-1!=up.desc.indexOf("heavenly chips"))return!0}return!1}function Manage_Tooltip(a,b,c,d){var e=0,f=0;switch(a){case 0:e=_bam("The mouse and cursors",.1,0);break;case 1:e=_bte(0);break;case 2:e=_mcg(b);break;case 3:e=_bam("Grandmas",.3,1);break;case 4:e=_bte(1),_lgt(b)&&f++;break;case 5:e=_bam("Farms",.5,2);break;case 6:e=_bte(2);break;case 7:e=_bam("Factories",4,3);break;case 8:e=_bte(3);break;case 9:e=_bam("Mines",10,4);break;case 10:e=_bte(4);break;case 11:e=_bam("Shipments",30,5);break;case 12:e=_bte(5);break;case 13:e=_bam("Alchemy labs",100,6);break;case 14:e=_bte(6);break;case 15:e=_bam("Portals",1666,7);break;case 16:e=_bte(7);break;case 17:e=_bam("Time machines",9876,8);break;case 18:e=_bte(8);break;case 21:e=_gpg();break;case 22:e=_gpp();break;case 23:f+=_cha("Elder nap"),4==Game.pledges&&(f+=_cha("Elder slumber"));break;case 24:f+=_cha("Elder calm");break;case 28:e=_fte(1);break;case 29:e=_bte(9);break;case 30:e=_bam("Antimatter condensers",99999,9);break;case 32:e=_dhc(f,b,e),_lhc(b)&&(f+=_cha("Wholesome"))}return 19==Game.UpgradesOwned&&(f+=_cha("Enhancer")),49==Game.UpgradesOwned&&(f+=_cha("Augmenter")),99==Game.UpgradesOwned&&(f+=_cha("Upgrader")),e+=Get_Achi_Worth(f,b,e,0),d?e:tooltips[b]+Colorize(e,b,c)}function _dhc(a,b,c){var d=Game.UpgradesById[b],e=d.desc.indexOf("<b>")+3,f=d.desc.indexOf("%"),g=1*d.desc.substr(e,f-e),h=Get_Achi_Worth(a,b,c,2*Game.prestige["Heavenly chips"]*(g/100));return h-Game.cookiesPs}function _lhc(a){return"Heavenly key"==Game.UpgradesById[a].name?!0:!1}function _cpc(){return.01*Game.mouseCps()*usr_clk}function _lgt(a){if(1==_cha("Elder")&&-1!=Game.UpgradesById[a].name.indexOf(" grandmas")){var b=new Array,c=new Array;if(Game.UpgradesById.forEach(function(a,d){a.bought&&-1!=a.name.indexOf(" grandmas")?b.push(d):a.bought||-1==a.name.indexOf(" grandmas")||c.push(d)}),1==c.length&&c[0]==a)return!0}return!1}function _cha(a){var b=0;return Game.AchievementsById.forEach(function(c){c.won||c.name!=a||(b=1)}),b}function _gpp(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.05*Game.ObjectsById[7].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _gpg(){var a=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(a=2*a),b.bought&&-1!=b.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(a=4*a)}),.02*Game.ObjectsById[1].amount*a*Game.ObjectsById[1].amount*Game.globalCpsMult}function _mcg(a){var b=Game.UpgradesById[a].desc,c=31;-1!=b.indexOf(" another ")&&(c+=8);var d=1*b.substr(c,b.indexOf("<",c)-c);return d*(Game.BuildingsOwned-Game.ObjectsById[0].amount)*Game.ObjectsById[0].amount*Game.globalCpsMult}function _bte(a){return Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _fte(a){return 3*Game.ObjectsById[a].storedTotalCps*Game.globalCpsMult}function _bam(a,b,c){var d=1;return Game.UpgradesById.forEach(function(b){b.bought&&-1!=b.desc.indexOf(a+" are <b>twice</b> as efficient.")&&(d=2*d),b.bought&&-1!=b.desc.indexOf(a+" are <b>4 times</b> as efficient.")&&(d=4*d)}),b*d*Game.ObjectsById[c].amount*Game.globalCpsMult}function _inc(a){var b=0;return Game.AchievementsById.forEach(function(c){var d=c.desc.replace(/,/g,"");c.won||-1==d.indexOf(" per second.")||a>=1*d.substr(8,d.indexOf("</b>",8)-8)&&b++}),b}function Get_Achi_Worth(a,b,c,d){var e=0,f=Calc_Heavenly_Mult();0!=d&&(f=d);var g=0,h=new Array(0,0,0,0),i=Game.milkProgress,j=Get_Frenzy_Mult();Game.UpgradesById.forEach(function(a){var c=a.desc.replace("[Research]<br>","");a.bought&&-1!=c.indexOf("Cookie production multiplier <b>+")&&(f+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought||-1==c.indexOf("Cookie production multiplier <b>+")||a.id!=b||(g+=1*c.substr(33,c.indexOf("%",33)-33)),a.bought&&"Kitten helpers"==a.name&&(h[0]=.05),a.bought&&"Kitten workers"==a.name&&(h[1]=.1),a.bought&&"Kitten engineers"==a.name&&(h[2]=.2),a.bought&&"Kitten overseers"==a.name&&(h[3]=.2)
});var k=100+f;k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var l=c,m=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j;i+=.04*a,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i;var n=0;switch(Game.UpgradesById[b].name){case"Kitten helpers":n=.05;break;case"Kitten workers":n=.1;break;case"Kitten engineers":n=.2;break;case"Kitten overseers":n=.2}k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m;var o=_inc(e+m);return o>0&&(i+=.04*o,k=100+f+g,k*=1+h[0]*i,k*=1+h[1]*i,k*=1+h[2]*i,k*=1+h[3]*i,k*=1+n*i,e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j-m),0!=d&&(e=(Game.cookiesPs+l)/Game.globalCpsMult*(k/100)*j),Game.Has("Elder Covenant")&&(e*=.95),e}function Calc_Heavenly_Mult(){var a=2*Game.prestige["Heavenly chips"],b=0;return Game.Has("Heavenly chip secret")&&(b+=.05),Game.Has("Heavenly cookie stand")&&(b+=.2),Game.Has("Heavenly bakery")&&(b+=.25),Game.Has("Heavenly confectionery")&&(b+=.25),Game.Has("Heavenly key")&&(b+=.25),a*b}function Get_Frenzy_Mult(){return Game.frenzy>0?Game.frenzyPower:1}function Manage_Building_Tooltip(a){var b=a.id,c=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),d=new Array("none","none"),e=(new Array("",""),new Array(0,0));Game.cookies-a.price<c[0]&&(d[0]="block",e[0]=c[0]-(Game.cookies-a.price)),Game.cookies-a.price<c[1]&&(d[1]="block",e[1]=c[1]-(Game.cookies-a.price)),a.desc==building_tooltips[a.id]&&(a.desc+='<div id="cm_ob_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #000000; margin:6px -6px -6px -6px; display:none;"></div>',a.desc+='<div id="cm_ob_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_ob_lucky_div_warning" style="background:url(http://frozenelm.com/cookiemonster/images/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_ob_lucky_div_caution" style="background:url(http://frozenelm.com/cookiemonster/images/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div>',a.desc+='<div id="cm_ob_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_ob_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_ob_warning_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/warning.png" height=16px width=16px></div></div><div id="cm_ob_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_ob_caution_amount"></span><div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/caution.png" height=16px width=16px></div></div></div>',Game.RebuildStore());var f=new Array("FFFF00","FFFF00"),g=new Array(hold_cpi[b],hold_tc[b]),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<f.length;i++)g[i]==j[i]?f[i]="00FF00":g[i]==h[i]?f[i]="FF0000":h[i]-g[i]<g[i]-j[i]&&(f[i]="FF7F00");1==$("#cm_ob_div_"+b).length&&($("#cm_ob_div_"+b).css("border","1px solid #"+f[0]),$("#cm_ob_div_"+b).css("display",""),$("#cm_ob_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(hold_is[b])+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"")+"</div>"),$("#cm_ob_warning_amount").text("Deficit: "+formatNum(e[0])),$("#cm_ob_caution_amount").text("Deficit: "+formatNum(e[1])),1==settings[10]||2==settings[10]?($("#cm_ob_lucky_div_warning").css("display",d[0]),$("#cm_ob_lucky_div_caution").css("display",d[1])):($("#cm_ob_lucky_div_warning").css("display","none"),$("#cm_ob_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_ob_note_div_warning").css("display",d[0]),$("#cm_ob_note_div_caution").css("display",d[1])):($("#cm_ob_note_div_warning").css("display","none"),$("#cm_ob_note_div_caution").css("display","none"))),1==settings[6]?$("#product"+b).find(".price").first().css("color","#"+f[0]):$("#product"+b).find(".price").first().css("color","")}function Make_Table(){var a='<th align=left width=130 style="color:#FFFF00;"> '+version+"</th>",b="",c="",d="";Game.ObjectsById.forEach(function(e,f){a+='<th align=middle id="cookie_monster_item_'+f+'" style="font-weight:bold;"></th>',b+='<td align=middle id="cookie_monster_is_'+f+'"></td>',c+='<td align=middle id="cookie_monster_cpi_'+f+'"></td>',d+='<td align=middle id="cookie_monster_tc_'+f+'"></td>'}),$("#cookie_monster_bar").html('<table style="width:100%; table-layout:fixed; margin-top:2px;"><tr>'+a+'</tr><tr><th align=right style="color:#4bb8f0;">Bonus Income</th>'+b+'</tr><tr><th align=right style="color:#4bb8f0;">Base Cost Per Income</th>'+c+'</tr><tr><th align=right style="color:#4bb8f0;">Time Left</th>'+d+"</tr></table>")}function Update_Table(){Game.ObjectsById.forEach(function(a,b){var c=a.price,d=a.amount,e=(a.storedTotalCps,a.storedCps*Game.globalCpsMult);"Grandma"==a.name&&(e=0);var f=Math.round(100*(e+Get_Upgrade_Bonuses(a.name,d,e)))/100,g=Math.round(c/f*100)/100,h=a.name.replace(/([^\s]+)/,"");hold_item[b]=a.name.replace(h,"")+' (<span style="color:#4bb8f0;">'+formatNum(d)+"</span>)",hold_is[b]=Math.round(100*f)/100,hold_cpi[b]=Math.round(100*g)/100,hold_tc[b]=Math.round(Seconds_Left(b,"ob"))}),Game.ObjectsById.forEach(function(a,b){var c=new Array("FFFF00","FFFF00"),d=new Array(hold_cpi[b],hold_tc[b]),e=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),f=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<c.length;i++)d[i]==f[i]?c[i]="00FF00":d[i]==e[i]?c[i]="FF0000":e[i]-d[i]<d[i]-f[i]&&(c[i]="FF7F00");$("#cookie_monster_item_"+b).html(hold_item[b]),$("#cookie_monster_is_"+b).html(formatNum(hold_is[b])),$("#cookie_monster_cpi_"+b).html('<span style="color:#'+c[0]+';">'+formatNum(d[0])+"</span>"),$("#cookie_monster_tc_"+b).html('<span style="color:#'+c[1]+';">'+formatTime(d[1],"min")+"</span>")})}function Do_Emphasize(){var a=$("#cookie_monster_golden_overlay"),b=$("#goldenCookie");if("none"!=b.css("display")||emphasize||(emphasize=!0,gc_avail=""),"none"!=b.css("display")&&emphasize){if(emphasize=!1,1==settings[9]&&(gc_avail="(G) ",Fav_Icon_Spinner(1)),1==settings[8]){var c=new Audio("http://frozenelm.com/cookiemonster/sounds/ba%20dink.mp3");c.volume=1,c.play()}1==settings[0]&&($("#cookie_monster_overlay").fadeIn(100),$("#cookie_monster_overlay").fadeOut(500))}"none"!=b.css("display")&&1==settings[1]?(a.css("display","block"),a.css("opacity",b.css("opacity")),a.css("left",b.css("left")),a.css("top",b.css("top")),a.html('<div style="position:absolute; top:30px; width:96px; height:36px;">'+Math.round(Game.goldenCookie.life/Game.fps)+"</div>")):a.css("display","none")}function Manage_Buffs(){var a="",b="",c=0,d=13+13*Game.Has("Get lucky"),e=new Array(Game.goldenCookie.time,Game.goldenCookie.minTime,Game.goldenCookie.maxTime),f=parseInt($("#cookie_monster_timer_bars_div").css("width"));switch(Game.frenzyPower){case 7:c=77+77*Game.Has("Get lucky"),a="Frenzy",b="FFFF00";break;case 666:c=6+6*Game.Has("Get lucky"),a="Blood Frenzy",b="00FF00",c=66+66*Game.Has("Get lucky"),a="Clot",b="FF0000"}Game.frenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_"+b).length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_'+b+'" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">'+a+'<td><td><div id="cmt_'+b+'" style="position:relative; background:#'+b+"; height:10px; width:"+Game.frenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_'+b+'" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+c+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_"+b).css("width",Game.frenzy/e[2]*100+"%"),$("#cmt_time_"+b).text(Math.round(Game.frenzy/Game.fps))),$("#cookie_monster_timer_"+b).fadeIn(250),"1"==$("#cookie_monster_timer_FFFF00").css("opacity")&&"FFFF00"!=b&&$("#cookie_monster_timer_FFFF00").fadeOut(250),"1"==$("#cookie_monster_timer_00FF00").css("opacity")&&"00FF00"!=b&&$("#cookie_monster_timer_00FF00").fadeOut(250),"1"==$("#cookie_monster_timer_FF0000").css("opacity")&&"FF0000"!=b&&$("#cookie_monster_timer_FF0000").fadeOut(250)):1==$("#cookie_monster_timer_"+b).length&&"1"==$("#cookie_monster_timer_"+b).css("opacity")&&$("#cookie_monster_timer_"+b).fadeOut(250),Game.clickFrenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_4BB8F0").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_4BB8F0" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Click Frenzy<td><td><div id="cmt_4BB8F0" style="position:relative; background:#4BB8F0; height:10px; width:'+Game.clickFrenzy/e[2]*100+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_4BB8F0" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+d+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt_4BB8F0").css("width",Game.clickFrenzy/e[2]*100+"%"),$("#cmt_time_4BB8F0").text(Math.round(Game.clickFrenzy/Game.fps))),$("#cookie_monster_timer_4BB8F0").fadeIn(250)):1==$("#cookie_monster_timer_4BB8F0").length&&"1"==$("#cookie_monster_timer_4BB8F0").css("opacity")&&$("#cookie_monster_timer_4BB8F0").fadeOut(250),e[0]>0&&"none"==$("#goldenCookie").css("display")&&1==settings[4]?(1!=$("#cookie_monster_timer_FF00FF").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_FF00FF" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Next Cookie<td><td><div id="cmt_FF00FF" style="position:relative; background:#aaaaaa; height:10px; width:100%; margin-left:4px; border:1px solid black;"><div id="cmt2_FF00FF" style="position:relative; background:#FF00FF; height:10px; width:100%; margin-left:0px; max-width:'+.67*(f-189)+'px; float:right;"></div><div id="cmt_time_FF00FF" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+Math.round((e[2]-e[0])/Game.fps)+'</div></div></td><td style="width:55px;"></td></table></div>'):($("#cmt2_FF00FF").css("max-width",.67*(f-189)+"px"),$("#cmt_FF00FF").css("width",(e[2]-e[0])/e[2]*100+"%"),$("#cmt_time_FF00FF").text(Math.round((e[2]-e[0])/Game.fps))),$("#cookie_monster_timer_FF00FF").fadeIn(250)):1==$("#cookie_monster_timer_FF00FF").length&&"1"==$("#cookie_monster_timer_FF00FF").css("opacity")&&$("#cookie_monster_timer_FF00FF").fadeOut(250),(e[2]-e[0])/Game.fps>0&&"none"==$("#goldenCookie").css("display")&&(gc_avail=1==settings[4]?"("+Math.round((e[2]-e[0])/Game.fps)+") ":""),$("#versionNumber").css("bottom",$("#cookie_monster_timer_bars_div").css("height"))}function Get_Upgrade_Bonuses(a,b,c){var d=0,e=0;switch(a){case"Cursor":0==b&&(e+=_cha("Click")),1==b&&(e+=_cha("Double-click")),49==b&&(e+=_cha("Mouse wheel")),99==b&&(e+=_cha("Of Mice and Men")),199==b&&(e+=_cha("The Digital"));break;case"Grandma":d+=Get_Grandma_Mod_Total(b)*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Grandma's Cookies")),49==b&&(e+=_cha("Sloppy kisses")),99==b&&(e+=_cha("Retirement home")),149==b&&(e+=_cha("Friend of the ancients")),199==b&&(e+=_cha("Ruler of the ancients"));break;case"Farm":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("My first farm")),49==b&&(e+=_cha("Reap what you sow")),99==b&&(e+=_cha("Farm ill"));break;case"Factory":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Production chain")),49==b&&(e+=_cha("Industrial revolution")),99==b&&(e+=_cha("Global warming"));break;case"Mine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("You know the drill")),49==b&&(e+=_cha("Excavation site")),99==b&&(e+=_cha("Hollow the planet"));break;case"Shipment":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Expedition")),49==b&&(e+=_cha("Galactic highway")),99==b&&(e+=_cha("Far far away"));break;case"Alchemy lab":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Transmutation")),49==b&&(e+=_cha("Transmogrification")),99==b&&(e+=_cha("Gold member"));break;case"Portal":d+=Get_Portal_Mod_Total()*Game.globalCpsMult,d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("A whole new world")),49==b&&(e+=_cha("Now you're thinking")),99==b&&(e+=_cha("Dimensional shift"));break;case"Time machine":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Time warp")),49==b&&(e+=_cha("Alternate timeline")),99==b&&(e+=_cha("Rewriting history"));break;case"Antimatter condenser":d+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==b&&(e+=_cha("Antibatter")),49==b&&(e+=_cha("Quirky quarks")),99==b&&(e+=_cha("It does matter!"))}return 99==Game.BuildingsOwned&&(e+=_cha("Builder")),399==Game.BuildingsOwned&&(e+=_cha("Architect")),799==Game.BuildingsOwned&&(e+=_cha("Engineer")),_owe(a)&&e++,_mat(a)&&e++,_bat(a)&&e++,_cen(a)&&e++,d+Get_Achi_Worth(e,0,d+c,0)}function _bat(a){if(1==_cha("Base 10")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=10*c.length,e=0;e<c.length;e++){if(c[e]<d)return!1;d-=10}return!0}return!1}function _mat(a){if(1==_cha("Mathematician")){var b=new Array,c=new Array;Game.ObjectsById.forEach(function(a){b.push(a.name),c.push(a.amount)}),b.forEach(function(b,d){b==a&&c[d]++});for(var d=128,e=0;e<c.length;e++)if(e>2&&(d/=2),c[e]<d)return!1;return!0}return!1}function _owe(a){if(1==_cha("One with everything")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>0?b.push(a.name):c.push(a.name)}),1==c.length&&c[0]==a)return!0}return!1}function _cen(a){if(1==_cha("Centennial")){var b=new Array,c=new Array;if(Game.ObjectsById.forEach(function(a){a.amount>=100?b.push(a.name):c.push(a)}),1==c.length&&c[0].name==a&&99==c[0].amount)return!0}return!1}function Get_Cursor_Mod_Total(){var a=0;return Game.UpgradesById.forEach(function(b){if(b.bought&&-1!=b.desc.indexOf("The mouse and cursors gain")){var c=31;-1!=b.desc.indexOf(" another ")&&(c+=8),a+=1*b.desc.substr(c,b.desc.indexOf("<",c)-c)}}),a*Game.ObjectsById[0].amount}function Get_Grandma_Mod_Total(a){var b=.5,c=0,d=1;return Game.UpgradesById.forEach(function(e){e.bought&&"Forwards from grandma"==e.name&&(b+=.3),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(d=2*d),e.bought&&-1!=e.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(d=4*d),e.bought&&-1!=e.desc.indexOf("for each 50 grandmas")&&(c+=.02*(a+1)*(a+1)-.02*a*a),e.bought&&-1!=e.desc.indexOf("for each 20 portals")&&(c+=.05*Game.ObjectsById[7].amount)}),b*d+c*d}function Get_Portal_Mod_Total(){var a=0,b=1;return Game.UpgradesById.forEach(function(c){c.bought&&-1!=c.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(b=2*b),c.bought&&-1!=c.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(b=4*b),c.bought&&-1!=c.desc.indexOf("for each 20 portals")&&(a+=.05*Game.ObjectsById[1].amount)}),a*b}function inStore(a){return-1!=Game.UpgradesInStore.indexOf(a)?!0:!1}function formatNum(a){return _sts(a,!1).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatNumB(a){return _sts(a,!0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatTime(a,b){if(a=Math.round(a),1/0==a)return"Never";if(0==a)return"Done!";if(a/86400>1e3)return"> 1,000 days";var c=parseInt(a/86400)%999,d=parseInt(a/3600)%24,e=parseInt(a/60)%60,f=a%60,g=new Array(" days, "," hours, "," minutes, "," seconds");"min"!=b?(1==c&&(g[0]=" day, "),1==d&&(g[1]=" hour, "),1==e&&(g[2]=" minute, "),1==f&&(g[3]=" second")):g=new Array("d, ","h, ","m, ","s");var h="";return c>0&&(h=h+c+g[0]),(c>0||d>0)&&(h=h+d+g[1]),(c>0||d>0||e>0)&&(h=h+e+g[2]),(c>0||d>0||e>0||f>0)&&(h=h+f+g[3]),h}function Colorize(a,b,c){var d=Game.UpgradesById[b],e=d.basePrice,f=new Array("FFFF00","FFFF00"),g=new Array(Math.round(e/a*100)/100,Math.round(Seconds_Left(b,"up"))),h=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),j=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<f.length;i++)g[i]<j[i]?(f[i]="4BB8F0",inStore(d)&&0==i&&in_store[0]++):g[i]==j[i]?(f[i]="00FF00",inStore(d)&&0==i&&in_store[1]++):g[i]==h[i]?(f[i]="FF0000",inStore(d)&&0==i&&in_store[4]++):g[i]>h[i]?(f[i]="FF00FF",inStore(d)&&0==i&&in_store[5]++):h[i]-g[i]<g[i]-j[i]?(f[i]="FF7F00",inStore(d)&&0==i&&in_store[3]++):inStore(d)&&0==i&&in_store[2]++;for(i=0;i<in_store.length;i++)$("#cm_up_q"+i).text(in_store[i]);if(settings[11]&&inStore(d)&&$("#upgrade"+Game.UpgradesInStore.indexOf(d)).html('<div style="background-color:#'+f[0]+'; border:1px solid black; position:absolute; z-index:21; top:2px; left:2px; height:14px; width:14px; pointer-events:none;"></div>'),1==$("#cm_up_div_"+b).length){var k=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),l=new Array("none","none"),m=new Array(0,0);Game.cookies-e<k[0]&&(l[0]="block",m[0]=k[0]-(Game.cookies-e)),Game.cookies-e<k[1]&&(l[1]="block",m[1]=k[1]-(Game.cookies-e)),$("#cm_up_div_"+b).css("border","1px solid #"+f[0]),$("#cm_up_div_"+b).css("display",""),$("#cm_up_div_"+b).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(Math.round(100*a)/100)+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+f[0]+';">'+formatNum(g[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+f[1]+';">'+formatTime(g[1],"min")+"</div>"),$("#cm_up_warning_amount").text("Deficit: "+formatNum(m[0])),$("#cm_up_caution_amount").text("Deficit: "+formatNum(m[1])),1==settings[10]||2==settings[10]?($("#cm_up_lucky_div_warning").css("display",l[0]),$("#cm_up_lucky_div_caution").css("display",l[1])):($("#cm_up_lucky_div_warning").css("display","none"),$("#cm_up_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_up_note_div_warning").css("display",l[0]),$("#cm_up_note_div_caution").css("display",l[1])):($("#cm_up_note_div_warning").css("display","none"),$("#cm_up_note_div_caution").css("display","none"))}return c?(f="000000",'<div id="cm_up_lucky_div_'+b+'" style="position:absolute; top:-25px; left:-12px; height:32px;"><div id="cm_up_lucky_div_warning" style="background:url(http://frozenelm.com/images/cookiemonster/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div><div id="cm_up_lucky_div_caution" style="background:url(http://frozenelm.com/images/cookiemonster/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div></div><div id="cm_up_div_'+b+'" style="position:relative; height:96px; background:#222222; border:1px solid #'+f+'; margin:6px -6px -6px -6px; display:none;"></div><div id="cm_up_note_div_'+b+'" style="position:absolute; left:0px; margin-top:10px; color:white;"><div id="cm_up_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_up_warning_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/warning.png" height=16px width=16px></div></div><div id="cm_up_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_up_caution_amount"></span><div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/caution.png" height=16px width=16px></div></div></div>'):void 0}function Factor_Time(a){var b=Game.cookies-a,c=Game.cookiesPs;if(0==c)return 1;if(0>b){var d=a/c;return 1- -1*b/c/d}return 1}function Seconds_Left(a,b){var c=0;"ob"==b&&(c=Game.ObjectsById[a].price),"up"==b&&(c=Game.UpgradesById[a].basePrice);var d=Game.cookies-c,e=Game.cookiesPs;if(0==e)return 0;if(0>d){var f=-1*d/e;return f}return 0}function _sts(a,b){var c=settings[7];if(c>0)for(var d=1e33,e=sts_type[c-1].length-1;e>=0;e--){var f=(a/d%999).toFixed(3);if(f>=1)return f+sts_type[c-1][e];d/=1e3}return b?Math.round(a):Math.round(100*a)/100}function Sell_Out_Value(){var a=0,b=Game.cookies,c=new Array,d=0;for(Game.ObjectsById.forEach(function(a,b){c[b]=a.amount,d+=a.amount});b>=15||d>0;)for(var e=c.length-1;e>=0;e--){for(var f=!1,g=c[e],h=Game.ObjectsById[e],i=g;i>0;i--)b+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),a+=Math.floor(h.basePrice*Math.pow(1.15,i)/2),c[e]--,d--;for(;b>=h.basePrice*Math.pow(1.15,c[e]);)f=!0,b-=h.basePrice*Math.pow(1.15,c[e]),c[e]++,d++;if(f)break}sell_out=a}function Sell_Out(){confirm("*** WARNING ***\nYou will have no buildings or cookies left after this.")&&(Game.ObjectsById.forEach(function(a){setTimeout(function(){for(;a.amount>0;)a.sell()})}),setTimeout(function(){Buy_Sell()}))}function Buy_Sell(){if(Game.cookies<1e9&&Game.BuildingsOwned<100)return Buy_Sell_No_Wait(),!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.price<=Game.cookies)return b.buy(),setTimeout(function(){Buy_Sell()}),!1;if(b.price>Game.cookies&&b.amount>0)return b.sell(),setTimeout(function(){Buy_Sell()}),!1}setTimeout(function(){Buy_Sell()})}function Buy_Sell_No_Wait(){if(Game.cookies<15)return!1;for(var a=Game.ObjectsById.length-1;a>=0;a--){var b=Game.ObjectsById[a];if(b.sell(),b.price<=Game.cookies)return b.buy(),b.sell(),Buy_Sell_No_Wait(),!1}Buy_Sell_No_Wait()}function Get_True_CPI(a,b){var c=0,d=0,e=0;if("ob"==b&&(c=Seconds_Left(Game.ObjectsById[a],"ob"),d=Game.ObjectsById[a].price,e=hold_is[a]),"up"==b){c=Seconds_Left(Game.UpgradesById[a],"up"),d=Game.UpgradesById[a].basePrice;for(var f=0;upgrade_count>f;f++)if(_cup(f,a,!1)){e=Manage_Tooltip(f,a,!1,!0);break}}var g=d/e;return Game.ObjectsById.forEach(function(f,h){var i=f.price,j=hold_is[h],k=Seconds_Left(f,"ob");if(c>k&&("up"==b||h!=a)){var l=c-k,m=j*l,n=d-i+m,o=n/e;o>g&&(g=o)}}),g}function Test_True_CPI(a,b){var c=0,d=0,e=0,f=0;if("ob"==b&&(c=Seconds_Left(a,"ob"),e=Game.ObjectsById[a].price,f=hold_is[a]),"up"==b){c=Seconds_Left(a,"up"),e=Game.UpgradesById[a].basePrice;for(var g=0;upgrade_count>g;g++)if(_cup(g,a,!1)){f=Manage_Tooltip(g,a,!1,!0);break}}var h=Organize_Object_List(),i=e,j=i/f,k=j,l=f;return h.forEach(function(g,j){if(e>g.price&&("up"==b||g.id!=a)){var m=g.price,n=hold_is[g.id],o=hold_cpi[g.id];0==l&&(l=n),0==k&&(k=o);var p=Seconds_Left(g.id,"ob"),q=0,r=h[j+1];if(r.id!=h.length&&(hold_cpi[r.id]<k||r.id==a)&&(q=Seconds_Left(r.id,"ob"),k=hold_cpi[r.id],l=n),c-d>p){var s=q-p;d+=s;var t=l*s;s>0&&(f-=l,i=i-m+t)}}}),j=i/f}function Organize_Object_List(){var a=new Array;return Game.ObjectsById.forEach(function(b){var c=!0;a.length>0?(a.forEach(function(d,e){b.price<d.price&&c&&(c=!1,a.splice(e,0,b),a.join())}),c&&a.push(b)):a.push(b)}),a}var version="v.1.038.01",emphasize=!0,tooltips=new Array,building_tooltips=new Array,hold_item=new Array,hold_is=new Array,hold_cpi=new Array,hold_tc=new Array,gc_avail="",settings=new Array,in_store=new Array(0,0,0,0,0,0),sell_out=0,upgrade_count=33,sts_type=new Array([" M"," B"," T"," Qa"," Qi"," Sx"," Sp"," Oc"," No"," Dc"],[" M"," G"," T"," P"," E"," Z"," Y"," Oc"," No"," Dc"]),loops=0;-1!=document.title.indexOf("Cookie Clicker")&&0!=$("#game").length?Start_Cookie_Monster():alert("Cookie Monster "+version+"\n\nThese aren't the droids you're looking for.");var version="v.1.038.01",emphasize=!0,tooltips=new Array,building_tooltips=new Array,hold_item=new Array,hold_is=new Array,hold_cpi=new Array,hold_tc=new Array,gc_avail="",settings=new Array,in_store=new Array(0,0,0,0,0,0),sell_out=0,upgrade_count=33,sts_type=new Array([" M"," B"," T"," Qa"," Qi"," Sx"," Sp"," Oc"," No"," Dc"],[" M"," G"," T"," P"," E"," Z"," Y"," Oc"," No"," Dc"]),loops=0;-1!=document.title.indexOf("Cookie Clicker")&&0!=$("#game").length?Start_Cookie_Monster():alert("Cookie Monster "+version+"\n\nThese aren't the droids you're looking for.");var version="v.1.038.01",emphasize=!0,tooltips=new Array,building_tooltips=new Array,hold_item=new Array,hold_is=new Array,hold_cpi=new Array,hold_tc=new Array,gc_avail="",settings=new Array,in_store=new Array(0,0,0,0,0,0),sell_out=0,upgrade_count=33,sts_type=new Array([" M"," B"," T"," Qa"," Qi"," Sx"," Sp"," Oc"," No"," Dc"],[" M"," G"," T"," P"," E"," Z"," Y"," Oc"," No"," Dc"]),loops=0;-1!=document.title.indexOf("Cookie Clicker")&&0!=$("#game").length?Start_Cookie_Monster():alert("Cookie Monster "+version+"\n\nThese aren't the droids you're looking for.");var version="v.1.038.01",emphasize=!0,tooltips=new Array,building_tooltips=new Array,hold_item=new Array,hold_is=new Array,hold_cpi=new Array,hold_tc=new Array,gc_avail="",settings=new Array,in_store=new Array(0,0,0,0,0,0),sell_out=0,upgrade_count=33,sts_type=new Array([" M"," B"," T"," Qa"," Qi"," Sx"," Sp"," Oc"," No"," Dc"],[" M"," G"," T"," P"," E"," Z"," Y"," Oc"," No"," Dc"]),loops=0;-1!=document.title.indexOf("Cookie Clicker")&&0!=$("#game").length?Start_Cookie_Monster():alert("Cookie Monster "+version+"\n\nThese aren't the droids you're looking for.");var version="v.1.038.01",emphasize=!0,tooltips=new Array,building_tooltips=new Array,hold_item=new Array,hold_is=new Array,hold_cpi=new Array,hold_tc=new Array,gc_avail="",settings=new Array,in_store=new Array(0,0,0,0,0,0),sell_out=0,upgrade_count=33,sts_type=new Array([" M"," B"," T"," Qa"," Qi"," Sx"," Sp"," Oc"," No"," Dc"],[" M"," G"," T"," P"," E"," Z"," Y"," Oc"," No"," Dc"]),loops=0;-1!=document.title.indexOf("Cookie Clicker")&&0!=$("#game").length?Start_Cookie_Monster():alert("Cookie Monster "+version+"\n\nThese aren't the droids you're looking for.");